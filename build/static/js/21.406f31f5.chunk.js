(this["webpackJsonpizze-admin"]=this["webpackJsonpizze-admin"]||[]).push([[21],{631:function(e,t,n){"use strict";n.r(t);var i=n(42),a=n(13),c=n(28),r=n.n(c),s=n(47),l=n(21),o=n(0),d=n(370),j=n(560),u=n(166),b=n(380),O=n(561),h=n(562),m=n(563),g=n(564),p=n(565),x=n(373),f=n(374),v=n(566),C=n(581),w=n(567),k=n(375),S=n(568),y=n(529),I=n(531),N=n(569),B=n(537),E=n(543),_=n(533),W=n(204),F=n(125),R=n(62),D=n(211),T=n.n(D),V=n(579),q=n(212),z=n.n(q),P=n(210),A=n.n(P),M=n(215),U=n.n(M),J=n(209),K=n.n(J),L=n(126),G=n(52),H=n(168),Q=n(81),X=n(61),Y=n(94),Z=n(213),$=n(4),ee=Object(d.a)((function(e){return{root:{width:e.breakpoints.values.lg,maxWidth:"100%",margin:"0 auto",padding:e.spacing(3)},addIcon:{marginRight:e.spacing(1)},content:{padding:0},inner:{minWidth:700},actions:{padding:e.spacing(1),justifyContent:"center"},tabCard:{marginTop:e.spacing(3)},sEvenly:{display:"flex",justifyContent:"space-evenly"},iconPadd:{padding:5},jCenter:{display:"flex",justifyContent:"center"},imageView:{width:"100%",height:"100%"},themeButton:{color:e.palette.white,backgroundColor:e.palette.green.main,"&:hover":{backgroundColor:e.palette.green.dark}},lColor:{color:"white"}}})),te=function(e){var t=e.isOpen,n=e.title,c=e.onClose,d=e.isEdit,u=e.data,O=e.onSuccess,h=e.okBtnText,m=void 0===h?"Ok":h,g={name:"",description:"",image:{file:null,prevImage:"",isNew:null}},p=ee(),x=Object(o.useRef)(null),f=Object(o.useRef)(null),v=Object(X.a)(),C=Object(Q.b)().Post,w=Object(o.useState)(Object(a.a)({},g)),k=Object(l.a)(w,2),S=k[0],D=k[1],T=function(e){e.persist();var t=e.target.files;if(t&&0!==t.length){var n=new FileReader,i=t[0];n.onloadend=function(){x.current.setFieldValue("image",{file:i,prevImage:n.result,isNew:!0})},n.readAsDataURL(i)}},V=function(e,t){var n=t.setSubmitting,i=t.resetForm;n(!0),C("app/addSkinCareIngredient",e).then((function(e){v.show(e.message,"success"),n(!1),i(),O()})).catch((function(e){v.show(e.message,"error")}))},q=function(e,t){var n=t.setSubmitting,i=t.resetForm;n(!0),C("app/editSkinCareIngredient",e).then((function(e){v.show(e.message,"success"),n(!1),i(),O()})).catch((function(e){v.show(e.message,"error")}))};return Object(o.useEffect)((function(){if(d){var e=u.image,t=u._id,n=Object(i.a)(u,["image","_id"]),c=Object(a.a)(Object(a.a)({},n),{},{id:t});c.image={file:e,prevImage:null===e||void 0===e?void 0:e.url,isNew:!1},D(c)}else D(g)}),[e]),Object($.jsxs)(y.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md","aria-labelledby":"dialog-title",open:t,children:[Object($.jsx)(H.a,{id:"dialog-title",onClose:c,children:n}),Object($.jsx)(F.b,{innerRef:x,enableReinitialize:!0,initialValues:S,onSubmit:function(e,t){try{t.setSubmitting(!0),function(){var n=Object(s.a)(r.a.mark((function n(){var a,c,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.image,c=Object(i.a)(e,["image"]),s=c,n.next=4,Object(Z.b)(a);case 4:s.image=n.sent,!d&&V(s,t),d&&q(s,t);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}catch(n){v.show("Image Upload Failed","error")}},validationSchema:R.d().shape({name:R.f().trim().required("Name is required"),description:R.f().trim().max(250,"Must be 250 characters or less").notRequired(),image:R.d({file:R.b().required("A file is required")})}),children:function(e){var t,n,i,a,r,s,l=e.values,o=e.errors,d=e.touched,u=e.handleChange,O=e.handleBlur,h=e.submitForm,g=e.isSubmitting;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)(I.a,{dividers:!0,children:Object($.jsxs)(j.a,{container:!0,spacing:3,children:[Object($.jsx)(j.a,{item:!0,md:12,xs:12,children:Object($.jsx)(N.a,{fullWidth:!0,label:"Name",name:"name",variant:"outlined",error:Boolean(d.name&&o.name),helperText:d.name&&o.name,value:l.name,onChange:u,onBlur:O})}),Object($.jsx)(j.a,{item:!0,md:12,xs:12,children:Object($.jsx)(N.a,{fullWidth:!0,multiline:!0,label:"Description",name:"description",variant:"outlined",error:Boolean(d.description&&o.description),helperText:d.description&&o.description,value:l.description,onChange:u,onBlur:O})}),Object($.jsxs)(j.a,{item:!0,md:12,xs:12,children:[Object($.jsx)("input",{name:"image",ref:f,type:"file",accept:".jpg,.png,jpeg",onChange:T,onBlur:O,hidden:!0}),Object($.jsx)(b.a,{fullWidth:!0,className:p.themeButton,variant:"contained",color:"default",onClick:function(){return f.current.click()},startIcon:Object($.jsx)(U.a,{}),children:"Upload"}),Object($.jsx)(B.a,{error:Boolean((null===d||void 0===d||null===(t=d.image)||void 0===t?void 0:t.file)&&(null===o||void 0===o||null===(n=o.image)||void 0===n?void 0:n.file)),children:Object($.jsx)(E.a,{children:(null===d||void 0===d||null===(i=d.image)||void 0===i?void 0:i.file)&&(null===o||void 0===o||null===(a=o.image)||void 0===a?void 0:a.file)})})]}),Object($.jsx)(j.a,{item:!0,md:12,xs:12,children:(null===(r=l.image)||void 0===r?void 0:r.prevImage)&&Object($.jsx)("img",{className:p.imageView,src:null===(s=l.image)||void 0===s?void 0:s.prevImage})})]})}),Object($.jsxs)(_.a,{children:[Object($.jsx)(b.a,{onClick:c,variant:"outlined",color:"secondary",children:"Cancel"}),Object($.jsx)(b.a,{className:p.themeButton,onClick:function(){return h()},disabled:g,variant:"outlined",children:g?Object($.jsx)(W.a,{size:24,className:p.lColor}):m})]})]})}})]})},ne=function(e){var t,n=e.isOpen,i=e.title,a=e.onClose,c=e.data,r=ee(),s=Object(o.useState)(c),d=Object(l.a)(s,2),u=d[0],O=d[1];return Object(o.useEffect)((function(){O(c)}),[e]),Object($.jsxs)(y.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md","aria-labelledby":"dialog-view-title",open:n,children:[Object($.jsx)(H.a,{id:"dialog-view-title",onClose:a,children:i}),Object($.jsx)(I.a,{dividers:!0,children:Object($.jsxs)(j.a,{container:!0,spacing:3,children:[Object($.jsx)(j.a,{item:!0,md:12,xs:12,children:null===u||void 0===u?void 0:u.name}),Object($.jsx)(j.a,{item:!0,md:12,xs:12,children:null===u||void 0===u?void 0:u.description}),Object($.jsx)(j.a,{item:!0,md:12,xs:12,children:(null===u||void 0===u?void 0:u.image)&&Object($.jsx)("img",{className:r.imageView,src:null===u||void 0===u||null===(t=u.image)||void 0===t?void 0:t.url})})]})}),Object($.jsx)(_.a,{children:Object($.jsx)(b.a,{onClick:a,variant:"outlined",color:"secondary",children:"Close"})})]})};t.default=function(){var e=ee(),t=Object(Q.b)().Post,n=Object(X.a)(),i=Object(Y.b)(),c=Object(o.useState)({page_no:1,page_limit:10}),d=Object(l.a)(c,2),y=d[0],I=d[1],N=Object(o.useState)(0),B=Object(l.a)(N,2),E=B[0],_=B[1],W=Object(o.useState)([]),F=Object(l.a)(W,2),R=F[0],D=F[1],q=Object(o.useState)(!0),P=Object(l.a)(q,2),M=P[0],U=P[1],J=Object(o.useState)({isOpen:!1,title:"",okBtnText:"",isEdit:!1,data:{}}),H=Object(l.a)(J,2),Z=H[0],ie=H[1],ae=Object(o.useState)({isOpen:!1,title:"",data:{}}),ce=Object(l.a)(ae,2),re=ce[0],se=ce[1],le=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(!0),t("app/listSkinCareIngredient",y).then((function(e){console.log("listSkinCareIngredient",e),U(!1),e.error?n.show(e.message,"error"):(D(e.data),_(e.page_count))})).catch((function(e){console.log("err",e),U(!1),n.show(e.message,"error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){ie((function(e){return Object(a.a)(Object(a.a)({},e),{},{isOpen:!1})}))},de=function(){le(),oe()};return Object(o.useEffect)((function(){le()}),[y]),Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(L.a,{title:"Ingredients"}),Object($.jsxs)(j.a,{alignItems:"flex-end",container:!0,justify:"space-between",spacing:3,children:[Object($.jsx)(j.a,{item:!0,children:Object($.jsx)(u.a,{component:"h1",variant:"h3",children:"Ingredients"})}),Object($.jsx)(j.a,{item:!0,children:Object($.jsx)(b.a,{variant:"contained",onClick:function(){ie((function(e){return Object(a.a)(Object(a.a)({},e),{},{isOpen:!0,isEdit:!1,title:"Add Ingredient",okBtnText:"Save"})}))},className:e.themeButton,startIcon:Object($.jsx)(T.a,{}),children:"Add"})})]}),Object($.jsxs)(O.a,{className:e.tabCard,children:[Object($.jsx)(h.a,{className:e.content,children:Object($.jsx)(m.a,{children:Object($.jsxs)(g.a,{children:[Object($.jsx)(p.a,{children:Object($.jsxs)(x.a,{children:[Object($.jsx)(f.a,{align:"center",children:"#"}),Object($.jsx)(f.a,{align:"center",children:"Image"}),Object($.jsx)(f.a,{align:"center",children:"Name"}),Object($.jsx)(f.a,{align:"center",children:"Description"}),Object($.jsx)(f.a,{align:"center",children:"Actions"})]})}),Object($.jsxs)(v.a,{children:[!M&&R.map((function(c,l){var o,d;return Object($.jsxs)(x.a,{hover:!0,children:[Object($.jsx)(f.a,{align:"center",children:y.page_limit*(y.page_no-1)+l+1}),Object($.jsx)(f.a,{align:"center",children:Object($.jsx)("div",{className:e.jCenter,children:Object($.jsx)(C.a,{variant:"square",src:null===c||void 0===c||null===(o=c.image)||void 0===o?void 0:o.url})})}),Object($.jsx)(f.a,{align:"center",children:null===c||void 0===c?void 0:c.name}),Object($.jsx)(f.a,{align:"center",children:Object($.jsx)(w.a,{title:null===c||void 0===c?void 0:c.description,children:Object($.jsx)("span",{children:(d=null===c||void 0===c?void 0:c.description,d.length>=25?"".concat(d.substring(0,40),"..."):d)})})}),Object($.jsx)(f.a,{align:"center",children:Object($.jsxs)("div",{className:e.sEvenly,children:[Object($.jsx)(w.a,{title:"View",arrow:!0,children:Object($.jsx)(k.a,{className:e.iconPadd,onClick:function(){return function(e){se((function(t){return Object(a.a)(Object(a.a)({},t),{},{isOpen:!0,data:e,title:"View Ingredient"})}))}(c)},children:Object($.jsx)(K.a,{color:"primary"})})}),Object($.jsx)(w.a,{title:"Edit",arrow:!0,children:Object($.jsx)(k.a,{className:e.iconPadd,onClick:function(){return function(e){ie((function(t){return Object(a.a)(Object(a.a)({},t),{},{isOpen:!0,isEdit:!0,data:e,title:"Edit Ingredient",okBtnText:"Edit"})}))}(c)},children:Object($.jsx)(A.a,{color:"action"})})}),Object($.jsx)(w.a,{title:"Delete",arrow:!0,children:Object($.jsx)(k.a,{className:e.iconPadd,onClick:function(){return function(e){var a=i.openModel,c=i.setLoading,l=i.closeModel;a((function(){c(!0),t("app/deleteSkinCareIngredient",{id:e._id}).then(function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!1),l(),de(),n.show(t.message,"success");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c(!1),n.show("Internal Server Error","error")}))}))}(c)},children:Object($.jsx)(z.a,{color:"secondary"})})})]})})]},l)})),M&&Object($.jsx)(G.a,{}),!M&&0==R.length&&Object($.jsx)(G.b,{children:"No Data Found"})]})]})})}),Object($.jsx)(S.a,{className:e.actions,children:Object($.jsx)(V.a,{count:E,page:y.page_no,onChange:function(e,t){I((function(e){return Object(a.a)(Object(a.a)({},e),{},{page_no:t})}))}})})]}),Object($.jsx)(te,Object(a.a)(Object(a.a)({},Z),{},{onClose:oe,onSuccess:de})),Object($.jsx)(ne,Object(a.a)(Object(a.a)({},re),{},{onClose:function(){se((function(e){return Object(a.a)(Object(a.a)({},e),{},{isOpen:!1})}))}}))]})}}}]);
//# sourceMappingURL=21.406f31f5.chunk.js.map