(this["webpackJsonpizze-admin"]=this["webpackJsonpizze-admin"]||[]).push([[18],{636:function(e,t,n){"use strict";n.r(t),n.d(t,"AddEditModel",(function(){return ie})),n.d(t,"ViewModel",(function(){return ae}));var i=n(39),a=n(220),r=n(13),c=n(28),l=n.n(c),s=n(45),o=n(24),d=n(0),j=n.n(d),u=n(367),b=n(557),m=n(204),h=n(377),O=n(110),g=n(566),p=n(558),x=n(559),f=n(560),v=n(561),w=n(562),C=n(370),y=n(371),k=n(563),N=n(577),B=n(564),S=n(372),T=n(565),_=n(526),A=n(528),R=n(534),I=n(540),E=n(530),U=n(203),W=n(212),q=n.n(W),F=n(211),P=n.n(F),V=n(575),z=n(644),L=n(210),D=n(91),K=n(165),M=n(55),G=n(209),J=n(90),H=n(78),Q=n(111),X=n(216),Y=n.n(X),Z=n(215),$=n(4),ee=Object(u.a)((function(e){return{root:{width:e.breakpoints.values.lg,maxWidth:"100%",margin:"0 auto",padding:e.spacing(3)},greenColor:{color:e.palette.green.main},themeButton:{color:e.palette.white,backgroundColor:e.palette.green.main,"&:hover":{backgroundColor:e.palette.green.dark}},deleteButton:{width:"100%",height:"50px"},content:{padding:0},inner:{minWidth:700},actions:{padding:e.spacing(1),justifyContent:"center"},tabCard:{marginTop:e.spacing(3)},sEvenly:{display:"flex",justifyContent:"space-evenly"},iconPadd:{padding:5},jCenter:{display:"flex",justifyContent:"center"},imageView:{width:"100%",height:"100%"},avatarRoot:{borderRadius:10,marginRight:15,width:e.spacing(10),height:e.spacing(10)},textPrimary:{marginTop:10,fontWeight:"bold"},textSecondary:{marginTop:10},ingrdientsGridMain:{marginTop:10},ingredientsAvatarRoot:{width:e.spacing(7),height:e.spacing(7),margin:"auto"},htmlContentGrid:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(1)},noIngredientsText:{marginBottom:e.spacing(3),display:"flex",justifyContent:"center"},textareaAdornedEnd:{paddingRight:0},htmlContent:{"& ul":{paddingLeft:"1.2rem"},"& p":{textAlign:"justify",wordBreak:"break-word"}},likeCountImg:{width:e.spacing(2),height:e.spacing(2)},noCommentsText:{textAlign:"center"},justifyCenter:{justifyContent:"center"},blogTypeStyle:{backgroundColor:"#F2805E",color:"white",padding:"5px",borderRadius:"5px",fontSize:"14px",marginLeft:"10px"},rejectButtonStyle:{backgroundColor:"red",color:"white",marginLeft:"10px","&:hover":{backgroundColor:"red"}}}})),te={email:"",password:"",name:"",image:{file:null,prevImage:"",isNew:null},user_type:""},ne=[{id:"ADMIN",name:"Admin"},{id:"NUTRITION",name:"Nutrition"},{id:"SKINCARE",name:"Skincare"},{id:"WORKOUT",name:"Workout"},{id:"CUSTOMERCARE",name:"Costomer Care"}],ie=function(e){var t=ee(),n=e.isEdit,a=e.isOpen,c=e.okBtnText,u=void 0===c?"OK":c,m=e.onClose,O=e.data,p=e.title,x=e.onSuccess,f=Object(d.useState)(Object(r.a)({},te)),v=Object(o.a)(f,2),w=v[0],C=v[1],y=j.a.useRef(null),k=j.a.useRef(null),N=(j.a.useRef(null),Object(Q.a)()),B=Object(H.b)().Post,S=function(e){var t=e.isNew,n=e.file;return t?Object(Z.a)(n):Promise.resolve(n)},T=function(e,t){var n=t.setSubmitting,i=t.resetForm;n(!0),B("app/addAdminUser",e).then((function(e){N.show(e.message,"success"),n(!1),i(),x()})).catch((function(e){N.show(e.message,"error")}))},W=function(e){e.persist();var t=e.target.files,n=e.target.name;if(t&&0!=t.length){var i=new FileReader,a=t[0];i.onloadend=function(){y.current.setFieldValue(n,{file:a,prevImage:i.result,isNew:!0})},i.readAsDataURL(a)}else y.current.setFieldValue(n,{file:null,prevImage:"",isNew:null})};return Object(d.useEffect)((function(){if(n){var e=O.image,t=O.image_thumbnail,a=O._id,c=Object(i.a)(O,["image","image_thumbnail","_id"]),l=Object(r.a)(Object(r.a)({},c),{},{id:a});l.image={file:e,prevImage:e.url,isNew:!1},l.image_thumbnail={file:t,prevImage:t.url,isNew:!1},C(l)}else C(te)}),[e]),Object($.jsxs)(_.a,{open:a,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md","aria-labelledby":"dialog-title",children:[Object($.jsx)(K.a,{id:"dialog-title",onClose:m,children:p}),Object($.jsx)(L.b,{innerRef:y,enableReinitialize:!0,initialValues:w,onSubmit:function(e,t){try{t.setSubmitting(!0),function(){var a=Object(s.a)(l.a.mark((function a(){var r,c,s,d,j,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.image,c=Object(i.a)(e,["image"]),s=c,a.next=4,Promise.all([S(r)]);case 4:d=a.sent,j=Object(o.a)(d,1),u=j[0],s.image=u,!n&&T(s,t);case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}catch(a){t.setSubmitting(!1),N.show("Image Upload Failed","error")}},validationSchema:D.d().shape({email:D.f().trim().required("Email is required").email(),password:D.f().trim().required("Password is required"),name:D.f().trim().required("Name is required"),image:D.d({file:D.b().required("A file is required")}),user_type:D.f().trim().required("User type is required")}),children:function(e){var n,i,a,c,l,s,o=e.values,d=e.errors,j=e.touched,O=e.handleBlur,p=e.handleChange,x=e.setFieldValue,f=e.submitForm,v=(e.setFieldTouched,e.isSubmitting);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)(A.a,{dividers:!0,children:Object($.jsxs)(b.a,{container:!0,spacing:2,children:[Object($.jsx)(b.a,{item:!0,xs:12,children:Object($.jsx)(g.a,{fullWidth:!0,label:"Email",name:"email",variant:"outlined",value:o.email,onChange:p,onBlur:O,error:Boolean(j.email&&d.email),helperText:j.email&&d.email})}),Object($.jsx)(b.a,{item:!0,xs:12,children:Object($.jsx)(g.a,{fullWidth:!0,label:"Password",name:"password",variant:"outlined",type:"password",value:o.password,onChange:p,onBlur:O,error:Boolean(j.password&&d.password),helperText:j.password&&d.password})}),Object($.jsx)(b.a,{item:!0,xs:12,children:Object($.jsx)(g.a,{fullWidth:!0,label:"Name",name:"name",variant:"outlined",value:o.name,onChange:p,onBlur:O,error:Boolean(j.name&&d.name),helperText:j.name&&d.name})}),Object($.jsx)(b.a,{item:!0,xs:12,children:Object($.jsx)(z.a,{fullWidth:!0,options:ne,value:ne.find((function(e){return e.id==o.user_type})),getOptionLabel:function(e){return e.name},onChange:function(e,t){x("user_type",(null===t||void 0===t?void 0:t.id)||"")},onBlur:O,renderInput:function(e){return Object($.jsx)(g.a,Object(r.a)(Object(r.a)({},e),{},{label:"User Type",name:"user_type",variant:"outlined",error:Boolean(j.user_type&&d.user_type),helperText:j.user_type&&d.user_type,inputProps:Object(r.a)({},e.inputProps)}))}})}),Object($.jsxs)(b.a,{item:!0,md:12,xs:12,children:[Object($.jsx)("input",{name:"image",ref:k,type:"file",accept:".jpg,.png,jpeg",onChange:W,onBlur:O,hidden:!0}),Object($.jsx)(h.a,{fullWidth:!0,className:t.themeButton,variant:"contained",color:"default",onClick:function(){return k.current.click()},startIcon:Object($.jsx)(Y.a,{}),children:"Upload Image"}),Object($.jsx)(R.a,{error:Boolean((null===j||void 0===j||null===(n=j.image)||void 0===n?void 0:n.file)&&(null===d||void 0===d||null===(i=d.image)||void 0===i?void 0:i.file)),children:Object($.jsx)(I.a,{children:(null===j||void 0===j||null===(a=j.image)||void 0===a?void 0:a.file)&&(null===d||void 0===d||null===(c=d.image)||void 0===c?void 0:c.file)})})]}),Object($.jsx)(b.a,{item:!0,md:12,xs:12,children:(null===(l=o.image)||void 0===l?void 0:l.prevImage)&&Object($.jsx)("img",{className:t.imageView,src:null===(s=o.image)||void 0===s?void 0:s.prevImage})})]})}),Object($.jsxs)(E.a,{children:[Object($.jsx)(h.a,{onClick:m,variant:"outlined",color:"secondary",children:"Cancel"}),Object($.jsx)(h.a,{className:t.themeButton,onClick:function(){return f()},disabled:v,variant:"outlined",children:v?Object($.jsx)(U.a,{size:24,style:{color:"white"}}):u})]})]})}})]})},ae=function(e){var t,n=e.isOpen,i=e.title,a=e.onClose,r=e.data,c=(e.onReload,ee()),l=Object(d.useState)(r),s=Object(o.a)(l,2),j=s[0];s[1];return console.log(j),Object($.jsxs)(_.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"sm","aria-labelledby":"dialog-view-title",open:n,children:[Object($.jsx)(K.a,{id:"dialog-view-title",onClose:a,children:i}),Object($.jsxs)(A.a,{dividers:!0,children:[Object($.jsx)("div",{children:Object($.jsx)("img",{src:null===j||void 0===j||null===(t=j.image)||void 0===t?void 0:t.url,className:c.imageView})}),Object($.jsx)(p.a,{children:Object($.jsx)(v.a,{children:Object($.jsxs)(k.a,{children:[Object($.jsxs)(C.a,{children:[Object($.jsx)(y.a,{children:"Name"}),Object($.jsx)(y.a,{children:null===j||void 0===j?void 0:j.name})]}),Object($.jsxs)(C.a,{children:[Object($.jsx)(y.a,{children:"Email"}),Object($.jsx)(y.a,{children:null===j||void 0===j?void 0:j.email})]}),Object($.jsxs)(C.a,{children:[Object($.jsx)(y.a,{children:"User Type"}),Object($.jsx)(y.a,{children:null===j||void 0===j?void 0:j.user_type})]})]})})})]}),Object($.jsx)(E.a,{children:Object($.jsx)(h.a,{onClick:a,variant:"outlined",color:"secondary",children:"Close"})})]})};t.default=function(){var e=ee(),t=Object(H.b)().Post,n=Object(Q.a)(),i=(Object(J.b)(),Object(d.useState)({page_no:1,page_limit:10,name:""})),c=Object(o.a)(i,2),u=c[0],_=c[1],A=Object(d.useState)(0),R=Object(o.a)(A,2),I=R[0],E=R[1],U=Object(d.useState)([]),W=Object(o.a)(U,2),F=W[0],z=W[1],L=Object(d.useState)(!0),D=Object(o.a)(L,2),K=D[0],X=D[1],Y=j.a.useState({isOpen:!1,title:"",data:{}}),Z=Object(o.a)(Y,2),te=Z[0],ne=Z[1],re=Object(d.useState)({isOpen:!1,title:"",okBtnText:"",isEdit:!1,data:{}}),ce=Object(o.a)(re,2),le=ce[0],se=ce[1],oe=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X(!0),t("app/listAdminUser",u).then((function(e){console.log("listAdminUser",e),X(!1),e.error?n.show(e.message,"error"):(z(e.data),E(e.page_count))})).catch((function(e){console.log("err",e),X(!1),n.show(e.message,"error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){se((function(e){return Object(r.a)(Object(r.a)({},e),{},{isOpen:!1})}))};return Object(d.useEffect)((function(){oe()}),[u]),Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(G.a,{title:"Admin Users"}),Object($.jsxs)(b.a,{alignItems:"flex-end",container:!0,justify:"space-between",spacing:3,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(m.a,{component:"h1",variant:"h3",children:"Admin Users"})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(h.a,{variant:"contained",onClick:function(){se((function(e){return Object(r.a)(Object(r.a)({},e),{},{isOpen:!0,title:"Add Admin User",isEdit:!1,okBtnText:"Save"})}))},className:e.themeButton,startIcon:Object($.jsx)(q.a,{}),children:"Add"})})]}),Object($.jsx)(b.a,{container:!0,spacing:3,children:Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(O.a,{elevation:0,children:Object($.jsx)(g.a,{fullWidth:!0,size:"small",placeholder:"Name",name:"name",value:null===u||void 0===u?void 0:u.name,variant:"outlined",onChange:function(e){e.persist();var t=e.target.name,n=e.target.value;_((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},t,n))}))}})})})}),Object($.jsxs)(p.a,{className:e.tabCard,children:[Object($.jsx)(x.a,{className:e.content,children:Object($.jsx)(f.a,{children:Object($.jsxs)(v.a,{children:[Object($.jsx)(w.a,{children:Object($.jsxs)(C.a,{children:[Object($.jsx)(y.a,{align:"center",children:"#"}),Object($.jsx)(y.a,{align:"center",children:"Image"}),Object($.jsx)(y.a,{align:"center",children:"Name"}),Object($.jsx)(y.a,{align:"center",children:"Email"}),Object($.jsx)(y.a,{align:"center",children:"User Type"}),Object($.jsx)(y.a,{align:"center",children:"Action"})]})}),Object($.jsxs)(k.a,{children:[!K&&F.map((function(t,n){var i;return Object($.jsxs)(C.a,{hover:!0,children:[Object($.jsx)(y.a,{align:"center",children:u.page_limit*(u.page_no-1)+n+1}),Object($.jsx)(y.a,{align:"center",children:Object($.jsx)("div",{className:e.jCenter,children:Object($.jsx)(N.a,{variant:"square",src:null===t||void 0===t||null===(i=t.image)||void 0===i?void 0:i.url})})}),Object($.jsx)(y.a,{align:"center",children:null===t||void 0===t?void 0:t.name}),Object($.jsx)(y.a,{align:"center",children:null===t||void 0===t?void 0:t.email}),Object($.jsx)(y.a,{align:"center",children:null===t||void 0===t?void 0:t.user_type}),Object($.jsx)(y.a,{align:"center",children:Object($.jsx)("div",{className:e.sEvenly,children:Object($.jsx)(B.a,{title:"View",arrow:!0,children:Object($.jsx)(S.a,{className:e.iconPadd,onClick:function(){return function(e){ne((function(t){return Object(r.a)(Object(r.a)({},t),{},{isOpen:!0,data:e,title:"View Admin User"})}))}(t)},children:Object($.jsx)(P.a,{color:"primary"})})})})})]},n)})),K&&Object($.jsx)(M.a,{}),!K&&0==F.length&&Object($.jsx)(M.b,{children:"No Data Found"})]})]})})}),Object($.jsx)(T.a,{className:e.actions,children:Object($.jsx)(V.a,{count:I,page:u.page_no,onChange:function(e,t){_((function(e){return Object(r.a)(Object(r.a)({},e),{},{page_no:t})}))}})})]}),le.isOpen&&Object($.jsx)(ie,Object(r.a)(Object(r.a)({},le),{},{onClose:de,onSuccess:function(){oe(),de()}})),te.isOpen&&Object($.jsx)(ae,Object(r.a)(Object(r.a)({},te),{},{onClose:function(){ne((function(e){return Object(r.a)(Object(r.a)({},e),{},{isOpen:!1})}))},onReload:function(){return oe()}}))]})}}}]);
//# sourceMappingURL=18.9697e9a3.chunk.js.map