(this["webpackJsonpizze-admin"]=this["webpackJsonpizze-admin"]||[]).push([[18],{625:function(e,t,n){"use strict";var a=n(35),i=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),c=(0,a(n(37)).default)(r.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.default=c},646:function(e,t,n){"use strict";n.r(t),n.d(t,"AddEditModel",(function(){return oe})),n.d(t,"ViewModel",(function(){return de}));var a=n(42),i=n(218),r=n(13),c=n(28),s=n.n(c),l=n(47),o=n(21),d=n(370),u=n(560),j=n(166),b=n(380),m=n(111),h=n(569),O=n(561),p=n(562),g=n(563),x=n(564),f=n(565),v=n(373),w=n(374),y=n(566),C=n(581),k=n(567),_=n(375),N=n(568),S=n(529),E=n(531),A=n(537),B=n(543),T=n(533),R=n(204),I=n(211),U=n.n(I),P=n(209),W=n.n(P),q=n(215),F=n.n(q),V=n(212),z=n.n(V),M=n(210),D=n.n(M),L=n(579),K=n(653),G=n(125),J=n(0),H=n.n(J),Q=n(62),X=n(168),Y=n(52),Z=n(126),$=n(94),ee=n(81),te=n(61),ne=n(213),ae=n(625),ie=n.n(ae),re=n(4),ce=Object(d.a)((function(e){return{root:{width:e.breakpoints.values.lg,maxWidth:"100%",margin:"0 auto",padding:e.spacing(3)},greenColor:{color:e.palette.green.main},themeButton:{color:e.palette.white,backgroundColor:e.palette.green.main,"&:hover":{backgroundColor:e.palette.green.dark}},deleteButton:{width:"100%",height:"50px"},content:{padding:0},inner:{minWidth:700},actions:{padding:e.spacing(1),justifyContent:"center"},tabCard:{marginTop:e.spacing(3)},sEvenly:{display:"flex",justifyContent:"space-evenly"},iconPadd:{padding:5},jCenter:{display:"flex",justifyContent:"center"},imageView:{width:"100%",height:"100%"},avatarRoot:{borderRadius:10,marginRight:15,width:e.spacing(10),height:e.spacing(10)},textPrimary:{marginTop:10,fontWeight:"bold"},textSecondary:{marginTop:10},ingrdientsGridMain:{marginTop:10},ingredientsAvatarRoot:{width:e.spacing(7),height:e.spacing(7),margin:"auto"},htmlContentGrid:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(1)},noIngredientsText:{marginBottom:e.spacing(3),display:"flex",justifyContent:"center"},textareaAdornedEnd:{paddingRight:0},htmlContent:{"& ul":{paddingLeft:"1.2rem"},"& p":{textAlign:"justify",wordBreak:"break-word"}},likeCountImg:{width:e.spacing(2),height:e.spacing(2)},noCommentsText:{textAlign:"center"},justifyCenter:{justifyContent:"center"},blogTypeStyle:{backgroundColor:"#F2805E",color:"white",padding:"5px",borderRadius:"5px",fontSize:"14px",marginLeft:"10px"},rejectButtonStyle:{backgroundColor:"red",color:"white",marginLeft:"10px","&:hover":{backgroundColor:"red"}}}})),se={email:"",password:"",name:"",image:{file:null,prevImage:"",isNew:null},user_type:""},le=[{id:"ADMIN",name:"Admin"},{id:"NUTRITION",name:"Nutrition"},{id:"SKINCARE",name:"Skincare"},{id:"WORKOUT",name:"Workout"},{id:"CUSTOMERCARE",name:"Customer Care"}],oe=function(e){var t=ce(),n=e.isEdit,i=e.isOpen,c=e.okBtnText,d=void 0===c?"OK":c,j=e.onClose,m=e.data,O=e.title,p=e.onSuccess,g=Object(J.useState)(Object(r.a)({},se)),x=Object(o.a)(g,2),f=x[0],v=x[1],w=H.a.useRef(null),y=H.a.useRef(null),C=(H.a.useRef(null),Object(te.a)()),k=Object(ee.b)().Post,_=function(e){var t=e.isNew,n=e.file;return t?Object(ne.a)(n):Promise.resolve(n)},N=function(e,t){var n=t.setSubmitting,a=t.resetForm;n(!0),k("app/addAdminUser",e).then((function(e){C.show(e.message,"success"),n(!1),a(),p()})).catch((function(e){C.show(e.message,"error")}))},I=function(e,t){var n=t.setSubmitting,a=t.resetForm,i={id:e.id,name:e.name,user_type:e.user_type,image:e.image};n(!0),k("app/updateAdmin",i).then((function(e){C.show(e.message,"success"),n(!1),a(),p()})).catch((function(e){C.show(e.message,"error")}))},U=function(e){e.persist();var t=e.target.files,n=e.target.name;if(t&&0!=t.length){var a=new FileReader,i=t[0];a.onloadend=function(){w.current.setFieldValue(n,{file:i,prevImage:a.result,isNew:!0})},a.readAsDataURL(i)}};return Object(J.useEffect)((function(){if(n){var e=m.image,t=m.image_thumbnail,i=m._id,c=Object(a.a)(m,["image","image_thumbnail","_id"]),s=Object(r.a)(Object(r.a)({},c),{},{id:i});s.image={file:e,prevImage:null===e||void 0===e?void 0:e.url,isNew:!1},s.image_thumbnail={file:t,prevImage:null===t||void 0===t?void 0:t.url,isNew:!1},v(s)}else v(se)}),[e]),Object(re.jsxs)(S.a,{open:i,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md","aria-labelledby":"dialog-title",children:[Object(re.jsx)(X.a,{id:"dialog-title",onClose:j,children:O}),Object(re.jsx)(G.b,{innerRef:w,enableReinitialize:!0,initialValues:f,onSubmit:function(e,t){try{t.setSubmitting(!0),function(){var i=Object(l.a)(s.a.mark((function i(){var r,c,l,d,u,j;return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=e.image,c=Object(a.a)(e,["image"]),l=c,i.next=4,Promise.all([_(r)]);case 4:d=i.sent,u=Object(o.a)(d,1),j=u[0],l.image=j,!n&&N(l,t),n&&I(l,t);case 10:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()()}catch(i){t.setSubmitting(!1),C.show("Image Upload Failed","error")}},validationSchema:Q.d().shape(Object(r.a)(Object(r.a)(Object(r.a)({},!n&&{email:Q.f().trim().required("Email is required").email()}),!n&&{password:Q.f().trim().min(6,"Password must be at least 6 characters").required("Password is required")}),{},{name:Q.f().trim().required("Name is required"),image:Q.d({file:Q.b().required("A file is required")}),user_type:Q.f().trim().required("User type is required")})),children:function(e){var a,i,c,s,l,o,m=e.values,O=e.errors,p=e.touched,g=e.handleBlur,x=e.handleChange,f=e.setFieldValue,v=e.submitForm,w=(e.setFieldTouched,e.isSubmitting);return Object(re.jsxs)(re.Fragment,{children:[console.log(O),Object(re.jsx)(E.a,{dividers:!0,children:Object(re.jsxs)(u.a,{container:!0,spacing:2,children:[!n&&Object(re.jsx)(u.a,{item:!0,xs:12,children:Object(re.jsx)(h.a,{fullWidth:!0,label:"Email",name:"email",variant:"outlined",value:m.email,onChange:x,onBlur:g,error:Boolean(p.email&&O.email),helperText:p.email&&O.email})}),!n&&Object(re.jsx)(u.a,{item:!0,xs:12,children:Object(re.jsx)(h.a,{fullWidth:!0,label:"Password",name:"password",variant:"outlined",type:"password",value:m.password,onChange:x,onBlur:g,error:Boolean(p.password&&O.password),helperText:p.password&&O.password})}),Object(re.jsx)(u.a,{item:!0,xs:12,children:Object(re.jsx)(h.a,{fullWidth:!0,label:"Name",name:"name",variant:"outlined",value:m.name,onChange:x,onBlur:g,error:Boolean(p.name&&O.name),helperText:p.name&&O.name})}),Object(re.jsx)(u.a,{item:!0,xs:12,children:Object(re.jsx)(K.a,{fullWidth:!0,options:le,value:le.find((function(e){return e.id==m.user_type})),getOptionLabel:function(e){return e.name},onChange:function(e,t){f("user_type",(null===t||void 0===t?void 0:t.id)||"")},onBlur:g,renderInput:function(e){return Object(re.jsx)(h.a,Object(r.a)(Object(r.a)({},e),{},{label:"User Type",name:"user_type",variant:"outlined",error:Boolean(p.user_type&&O.user_type),helperText:p.user_type&&O.user_type,inputProps:Object(r.a)({},e.inputProps)}))}})}),Object(re.jsxs)(u.a,{item:!0,md:12,xs:12,children:[Object(re.jsx)("input",{name:"image",ref:y,type:"file",accept:".jpg,.png,jpeg",onChange:U,onBlur:g,hidden:!0}),Object(re.jsx)(b.a,{fullWidth:!0,className:t.themeButton,variant:"contained",color:"default",onClick:function(){return y.current.click()},startIcon:Object(re.jsx)(F.a,{}),children:"Upload Image"}),Object(re.jsx)(A.a,{error:Boolean((null===p||void 0===p||null===(a=p.image)||void 0===a?void 0:a.file)&&(null===O||void 0===O||null===(i=O.image)||void 0===i?void 0:i.file)),children:Object(re.jsx)(B.a,{children:(null===p||void 0===p||null===(c=p.image)||void 0===c?void 0:c.file)&&(null===O||void 0===O||null===(s=O.image)||void 0===s?void 0:s.file)})})]}),Object(re.jsx)(u.a,{item:!0,md:12,xs:12,children:(null===(l=m.image)||void 0===l?void 0:l.prevImage)&&Object(re.jsx)("img",{className:t.imageView,src:null===(o=m.image)||void 0===o?void 0:o.prevImage})})]})}),Object(re.jsxs)(T.a,{children:[Object(re.jsx)(b.a,{onClick:j,variant:"outlined",color:"secondary",children:"Cancel"}),Object(re.jsx)(b.a,{className:t.themeButton,onClick:function(){return v()},disabled:w,variant:"outlined",children:w?Object(re.jsx)(R.a,{size:24,style:{color:"white"}}):d})]})]})}})]})},de=function(e){var t,n=e.isOpen,a=e.title,i=e.onClose,r=e.data,c=(e.onReload,ce()),s=Object(J.useState)(r),l=Object(o.a)(s,2),d=l[0];l[1];return console.log(d),Object(re.jsxs)(S.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"sm","aria-labelledby":"dialog-view-title",open:n,children:[Object(re.jsx)(X.a,{id:"dialog-view-title",onClose:i,children:a}),Object(re.jsxs)(E.a,{dividers:!0,children:[Object(re.jsx)("div",{children:Object(re.jsx)("img",{src:null===d||void 0===d||null===(t=d.image)||void 0===t?void 0:t.url,className:c.imageView})}),Object(re.jsx)(O.a,{children:Object(re.jsx)(x.a,{children:Object(re.jsxs)(y.a,{children:[Object(re.jsxs)(v.a,{children:[Object(re.jsx)(w.a,{children:"Name"}),Object(re.jsx)(w.a,{children:null===d||void 0===d?void 0:d.name})]}),Object(re.jsxs)(v.a,{children:[Object(re.jsx)(w.a,{children:"Email"}),Object(re.jsx)(w.a,{children:null===d||void 0===d?void 0:d.email})]}),Object(re.jsxs)(v.a,{children:[Object(re.jsx)(w.a,{children:"User Type"}),Object(re.jsx)(w.a,{children:null===d||void 0===d?void 0:d.user_type})]})]})})})]}),Object(re.jsx)(T.a,{children:Object(re.jsx)(b.a,{onClick:i,variant:"outlined",color:"secondary",children:"Close"})})]})};t.default=function(){var e=ce(),t=Object(ee.b)().Post,n=Object(te.a)(),a=Object($.b)(),c=Object(J.useState)({page_no:1,page_limit:10,name:""}),d=Object(o.a)(c,2),S=d[0],E=d[1],A=Object(J.useState)(0),B=Object(o.a)(A,2),T=B[0],R=B[1],I=Object(J.useState)([]),P=Object(o.a)(I,2),q=P[0],F=P[1],V=Object(J.useState)(!0),M=Object(o.a)(V,2),K=M[0],G=M[1],Q=H.a.useState({isOpen:!1,title:"",data:{}}),X=Object(o.a)(Q,2),ne=X[0],ae=X[1],se=Object(J.useState)({isOpen:!1,title:"",okBtnText:"",isEdit:!1,data:{}}),le=Object(o.a)(se,2),ue=le[0],je=le[1],be=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!0),t("app/listAdminUser",S).then((function(e){console.log("listAdminUser",e),G(!1),e.error?n.show(e.message,"error"):(F(e.data),R(e.page_count))})).catch((function(e){console.log("err",e),G(!1),n.show(e.message,"error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){je((function(e){return Object(r.a)(Object(r.a)({},e),{},{isOpen:!1})}))},he=function(){be(),me()};return Object(J.useEffect)((function(){be()}),[S]),Object(re.jsxs)("div",{className:e.root,children:[Object(re.jsx)(Z.a,{title:"Admin Users"}),Object(re.jsxs)(u.a,{alignItems:"flex-end",container:!0,justify:"space-between",spacing:3,children:[Object(re.jsx)(u.a,{item:!0,children:Object(re.jsx)(j.a,{component:"h1",variant:"h3",children:"Admin Users"})}),Object(re.jsx)(u.a,{item:!0,children:Object(re.jsx)(b.a,{variant:"contained",onClick:function(){je((function(e){return Object(r.a)(Object(r.a)({},e),{},{isOpen:!0,title:"Add Admin User",isEdit:!1,okBtnText:"Save"})}))},className:e.themeButton,startIcon:Object(re.jsx)(U.a,{}),children:"Add"})})]}),Object(re.jsx)(u.a,{container:!0,spacing:3,children:Object(re.jsx)(u.a,{item:!0,children:Object(re.jsx)(m.a,{elevation:0,children:Object(re.jsx)(h.a,{fullWidth:!0,size:"small",placeholder:"Name",name:"name",value:null===S||void 0===S?void 0:S.name,variant:"outlined",onChange:function(e){e.persist();var t=e.target.name,n=e.target.value;E((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t,n))}))}})})})}),Object(re.jsxs)(O.a,{className:e.tabCard,children:[Object(re.jsx)(p.a,{className:e.content,children:Object(re.jsx)(g.a,{children:Object(re.jsxs)(x.a,{children:[Object(re.jsx)(f.a,{children:Object(re.jsxs)(v.a,{children:[Object(re.jsx)(w.a,{align:"center",children:"#"}),Object(re.jsx)(w.a,{align:"center",children:"Image"}),Object(re.jsx)(w.a,{align:"center",children:"Name"}),Object(re.jsx)(w.a,{align:"center",children:"Email"}),Object(re.jsx)(w.a,{align:"center",children:"User Type"}),Object(re.jsx)(w.a,{align:"center",children:"Status"}),Object(re.jsx)(w.a,{align:"center",children:"Action"})]})}),Object(re.jsxs)(y.a,{children:[!K&&q.map((function(i,c){var o;return Object(re.jsxs)(v.a,{hover:!0,children:[Object(re.jsx)(w.a,{align:"center",children:S.page_limit*(S.page_no-1)+c+1}),Object(re.jsx)(w.a,{align:"center",children:Object(re.jsx)("div",{className:e.jCenter,children:Object(re.jsx)(C.a,{variant:"square",src:null===i||void 0===i||null===(o=i.image)||void 0===o?void 0:o.url})})}),Object(re.jsx)(w.a,{align:"center",children:null===i||void 0===i?void 0:i.name}),Object(re.jsx)(w.a,{align:"center",children:null===i||void 0===i?void 0:i.email}),Object(re.jsx)(w.a,{align:"center",children:null===i||void 0===i?void 0:i.user_type}),Object(re.jsx)(w.a,{align:"center",children:i.is_disabled?Object(re.jsx)(j.a,{color:"error",children:"Disabled"}):Object(re.jsx)(j.a,{style:{color:"#41a58d"},children:"Active"})}),Object(re.jsx)(w.a,{align:"center",children:Object(re.jsxs)("div",{className:e.sEvenly,children:[Object(re.jsx)(k.a,{title:"View",arrow:!0,children:Object(re.jsx)(_.a,{className:e.iconPadd,onClick:function(){return function(e){ae((function(t){return Object(r.a)(Object(r.a)({},t),{},{isOpen:!0,data:e,title:"View Admin User"})}))}(i)},children:Object(re.jsx)(W.a,{color:"primary"})})}),!i.is_disabled&&Object(re.jsx)(k.a,{title:"Edit",arrow:!0,children:Object(re.jsx)(_.a,{className:e.iconPadd,onClick:function(){return function(e){je((function(t){return Object(r.a)(Object(r.a)({},t),{},{isOpen:!0,isEdit:!0,data:e,title:"Edit Admin User",okBtnText:"Edit"})}))}(i)},children:Object(re.jsx)(D.a,{color:"action"})})}),Object(re.jsx)(k.a,{title:"Status",arrow:!0,children:Object(re.jsxs)(_.a,{className:e.iconPadd,onClick:function(){return function(e){var i=a.openModel,r=a.setLoading,c=a.closeModel;i((function(){r(!0),t("app/disableAdmin",{id:e._id}).then(function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(!1),c(),he(),n.show(t.message,"success");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r(!1),n.show("Internal Server Error","error")}))}),"Are you sure want to ".concat(e.is_disabled?"Enable":"Disable"," this user"),e.is_disabled?"Enable":"Disable")}(i)},children:[!i.is_disabled&&Object(re.jsx)(z.a,{color:"secondary"}),i.is_disabled&&Object(re.jsx)(ie.a,{color:"secondary"})]})})]})})]},c)})),K&&Object(re.jsx)(Y.a,{}),!K&&0==q.length&&Object(re.jsx)(Y.b,{children:"No Data Found"})]})]})})}),Object(re.jsx)(N.a,{className:e.actions,children:Object(re.jsx)(L.a,{count:T,page:S.page_no,onChange:function(e,t){E((function(e){return Object(r.a)(Object(r.a)({},e),{},{page_no:t})}))}})})]}),ue.isOpen&&Object(re.jsx)(oe,Object(r.a)(Object(r.a)({},ue),{},{onClose:me,onSuccess:he})),ne.isOpen&&Object(re.jsx)(de,Object(r.a)(Object(r.a)({},ne),{},{onClose:function(){ae((function(e){return Object(r.a)(Object(r.a)({},e),{},{isOpen:!1})}))},onReload:function(){return be()}}))]})}}}]);