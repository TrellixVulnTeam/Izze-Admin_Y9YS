{"ast":null,"code":"import _objectWithoutProperties from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _regeneratorRuntime from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Card,CardActions,CardContent,CardMedia,CircularProgress,Dialog,DialogActions,DialogContent,Divider,FormControl,FormHelperText,Grid,IconButton,makeStyles,Paper,Tab,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TextField,Tooltip,Typography}from'@material-ui/core';import AddIcon from'@material-ui/icons/Add';import CenterFocusStrongIcon from'@material-ui/icons/CenterFocusStrong';import CheckIcon from'@material-ui/icons/Check';import DeleteIcon from'@material-ui/icons/Delete';import EditIcon from'@material-ui/icons/Edit';import{Pagination,TabContext,TabList,TabPanel}from'@material-ui/lab';import Autocomplete from'@material-ui/lab/Autocomplete';import{Formik,getIn,useFormikContext,FieldArray}from'formik';import React,{useEffect,useRef,useState}from'react';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import{TableLoader,TableNoData}from'../../components/Loader/Loader';import Page from'../../components/Page/Page';import useConfModel from'../../hook/useConfModel';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import{initialFormValues,MealTime,validation}from'./FormikValues';import clsx from'clsx';import useCalories from'../../hook/useCalories';import ChevronRightIcon from'@material-ui/icons/ChevronRight';import KeyboardArrowUpIcon from'@material-ui/icons/KeyboardArrowUp';import getDropValues,{DietTypeDrop}from'../../utils/PlanDropdowns';import FileCopyIcon from'@material-ui/icons/FileCopy';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:theme.breakpoints.values.lg,maxWidth:'100%',margin:'0 auto',padding:theme.spacing(3)},content:{padding:0},tabCard:{marginTop:theme.spacing(3)},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},sEvenly:{display:'flex',justifyContent:'space-evenly'},sBetween:{display:'flex',justifyContent:'space-between'},iconPadd:{padding:5},jCenter:{display:'flex',justifyContent:'center'},actions:{padding:theme.spacing(1),justifyContent:'center'},tabRoot:{minWidth:0,textTransform:'none'// margin: '10px 0px',\n},tabIndicator:{backgroundColor:theme.palette.green.main},tabTextColorInherit:{backgroundColor:theme.palette.green.main,color:'white',border:'1px solid white'},tabPanelRoot:{padding:0,// paddingBottom: 0,\nwidth:'100%'},listItemRoot:{backgroundColor:'#7ac0af2b',margin:'10px 0px'},flexDisplay:{display:'flex'},paperRoot:{display:'flex',marginTop:'20px'},paperRoot1:{display:'flex',marginTop:'20px'},tablePanelRoot:{padding:'0px'},largeAvatar:{width:theme.spacing(10),height:theme.spacing(10)},justPadding:{padding:10,borderRadius:10},tabBtnIcon:{height:'100%',minWidth:0,textTransform:'none'},divTab:{flexDirection:'column',display:'flex'},cardRoot:{borderRadius:theme.spacing(3),position:'relative'},cardMediaRoot:{height:theme.spacing(25)},cardContentRoot:{backgroundColor:'#EFF1F3',padding:theme.spacing(2),paddingBottom:\"\".concat(theme.spacing(2),\"px !important\")},cardActionsRoot:{padding:0,paddingTop:theme.spacing(1)},ulRoot:{listStyle:'none',padding:0,margin:0},liRoot:{paddingLeft:'1em',textIndent:'-.7em'},colorProtein:{'&::before':{content:\"'•  '\",color:'#9A88FF'}},colorFat:{'&::before':{content:\"'•  '\",color:'#E57B91'}},colorCarbs:{'&::before':{content:\"'•  '\",color:''}},dividerRoot:{background:' #474749 0% 0% no-repeat padding-box',opacity:'0.25',height:theme.spacing(3)},mealTimeText:{margin:theme.spacing(2,0)},nutritionTextDiv:{border:'1px solid #EFF1F3',color:'#EFF1F3',borderRadius:20,padding:theme.spacing(0.5,1),width:'fit-content',position:'absolute',top:theme.spacing(2),left:theme.spacing(2)},nutritionText:{fontSize:'0.5rem'}};});var MealPlan=function MealPlan(){var classes=useStyles();var Snackbar=useSnackbar();var _useService=useService(),Post=_useService.Post;var ConfModel=useConfModel();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({page_no:1,page_limit:10}),_useState4=_slicedToArray(_useState3,2),stateData=_useState4[0],setStateData=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),pageCount=_useState6[0],setPageCount=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),mealPlanList=_useState8[0],setMealPlanList=_useState8[1];var _useState9=useState({isOpen:false,isDuplicate:false,title:'',okBtnText:'',isEdit:false,data:{}}),_useState10=_slicedToArray(_useState9,2),addEditDialog=_useState10[0],setAddEditDialog=_useState10[1];var _useState11=useState({isOpen:false,title:'',data:{}}),_useState12=_slicedToArray(_useState11,2),viewDialog=_useState12[0],setViewDialog=_useState12[1];var openAddDialog=function openAddDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,title:'Add Meal Plan',isEdit:false,okBtnText:'Save'});});};var openEditDialog=function openEditDialog(data){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,isEdit:true,data:data,title:'Edit Meal Plan',okBtnText:'Edit'});});};var openDuplicateDialog=function openDuplicateDialog(data){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isDuplicate:true,isOpen:true,isEdit:false,data:data,title:'Duplicate Nutrition Plan',okBtnText:'Duplicate'});});};var onDelete=function onDelete(data){var openModel=ConfModel.openModel,setLoading=ConfModel.setLoading,closeModel=ConfModel.closeModel;var submitFunction=function submitFunction(){setLoading(true);Post('app/deleteMealPlan',{id:data._id}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(false);closeModel();onSuccessAction();Snackbar.show(res.message,'success');case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){setLoading(false);Snackbar.show('Internal Server Error','error');});};openModel(submitFunction);};var openViewDialog=function openViewDialog(data){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,data:data,title:'View Meal Plan'});});};var listMealPlan=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);Post('app/listMealPlan',stateData).then(function(res){setLoading(false);if(!res.error){setMealPlanList(res.data);setPageCount(res.page_count);}else{Snackbar.show(res.message,'error');}}).catch(function(err){console.log('err',err);setLoading(false);Snackbar.show(err.message,'error');});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function listMealPlan(){return _ref2.apply(this,arguments);};}();var onPageChange=function onPageChange(event,value){setStateData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{page_no:value});});};var closeAddEditDialog=function closeAddEditDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false,isDuplicate:false});});};var closeViewDialog=function closeViewDialog(){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false});});};var onSuccessAction=function onSuccessAction(){listMealPlan();closeAddEditDialog();};useEffect(function(){listMealPlan();},[stateData]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Page,{title:\"Meal Plan\"}),/*#__PURE__*/_jsxs(Grid,{alignItems:\"flex-end\",container:true,justify:\"space-between\",spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h3\",children:\"Meal Plan\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return openAddDialog();},className:classes.themeButton,startIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Add\"})})]}),/*#__PURE__*/_jsxs(Card,{className:classes.tabCard,children:[/*#__PURE__*/_jsx(CardContent,{className:classes.content,children:/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"#\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Diet Type\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Calories\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[!loading&&mealPlanList.map(function(data,index){return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:stateData.page_limit*(stateData.page_no-1)+index+1}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:getDropValues(DietTypeDrop,data===null||data===void 0?void 0:data.diet_type)}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:data===null||data===void 0?void 0:data.calories}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.sEvenly,children:[/*#__PURE__*/_jsx(Tooltip,{title:\"View\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openViewDialog(data);},children:/*#__PURE__*/_jsx(CenterFocusStrongIcon,{color:\"primary\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Edit\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openEditDialog(data);},children:/*#__PURE__*/_jsx(EditIcon,{color:\"action\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Duplicate\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openDuplicateDialog(data);},children:/*#__PURE__*/_jsx(FileCopyIcon,{color:\"action\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Delete\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return onDelete(data);},children:/*#__PURE__*/_jsx(DeleteIcon,{color:\"secondary\"})})})]})})]},index);}),loading&&/*#__PURE__*/_jsx(TableLoader,{}),!loading&&mealPlanList.length==0&&/*#__PURE__*/_jsx(TableNoData,{children:\"No Data Found\"})]})]})})}),/*#__PURE__*/_jsx(CardActions,{className:classes.actions,children:/*#__PURE__*/_jsx(Pagination,{count:pageCount,page:stateData.page_no,onChange:onPageChange})})]}),addEditDialog.isOpen&&/*#__PURE__*/_jsx(AddEditModel,_objectSpread(_objectSpread({},addEditDialog),{},{onClose:closeAddEditDialog,onSuccess:onSuccessAction})),viewDialog.isOpen&&/*#__PURE__*/_jsx(ViewModel,_objectSpread(_objectSpread({},viewDialog),{},{onClose:closeViewDialog}))]});};export var AddEditModel=function AddEditModel(props){var isEdit=props.isEdit,isOpen=props.isOpen,isDuplicate=props.isDuplicate,_props$okBtnText=props.okBtnText,okBtnText=_props$okBtnText===void 0?'OK':_props$okBtnText,onClose=props.onClose,data=props.data,title=props.title,onSuccess=props.onSuccess;var formikRef=useRef(null);var getCaloriesData=useCalories();var classes=useStyles();var Snackbar=useSnackbar();var _useService2=useService(),Post=_useService2.Post;var _useState13=useState('0'),_useState14=_slicedToArray(_useState13,2),tabValue=_useState14[0],setTabValue=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),recipeList=_useState16[0],setRecipeList=_useState16[1];var _useState17=useState(_objectSpread({},initialFormValues)),_useState18=_slicedToArray(_useState17,2),initialValue=_useState18[0],setInitialValue=_useState18[1];var onSubmit=function onSubmit(value,helper){helper.setSubmitting(true);var postData=_objectSpread({},value);!isEdit||isDuplicate?addData(postData,helper):'';isEdit&&editData(postData,helper);};var addData=function addData(data,_ref3){var setSubmitting=_ref3.setSubmitting,resetForm=_ref3.resetForm;setSubmitting(true);Post('app/addMealPlan',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var editData=function editData(data,_ref4){var setSubmitting=_ref4.setSubmitting,resetForm=_ref4.resetForm;setSubmitting(true);Post('app/editMealPlan',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var handleChangeTab=function handleChangeTab(newValue){setTabValue(newValue);};var listAllMealRecipe=function listAllMealRecipe(){Post('app/listAllMealRecipe',{}).then(function(response){if(!response.error){setRecipeList(response.data);}else{Snackbar.show(response.message,'error');}}).catch(function(error){Snackbar.show(error.message,'error');});};useEffect(function(){if(isEdit||isDuplicate){var _id=data._id,rest=_objectWithoutProperties(data,[\"_id\"]);var _editData=_objectSpread(_objectSpread({},rest),{},{id:_id});var mealDays=_editData.meal_days.map(function(MealDays){var meals=MealDays.meals,rest=_objectWithoutProperties(MealDays,[\"meals\"]);var NewMeals=meals.map(function(MealData){var recipe=MealData.recipe,rest=_objectWithoutProperties(MealData,[\"recipe\"]);var RecipeIds=recipeList.map(function(_ref5){var _id=_ref5._id;return _id;});var NewRecipe=recipe.filter(function(_ref6){var _id=_ref6._id;return RecipeIds.includes(_id);}).map(function(_ref7){var _id=_ref7._id;return{id:_id};});return _objectSpread(_objectSpread({},rest),{},{isEdit:false,recipe:NewRecipe});});return _objectSpread(_objectSpread({},rest),{},{meals:NewMeals});});_editData.meal_days=mealDays;console.log('editData',_editData);setInitialValue(_editData);}else{setInitialValue(initialFormValues);}},[props,recipeList]);useEffect(function(){listAllMealRecipe();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Dialog,{open:isOpen,disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,fullScreen:true,maxWidth:\"lg\",\"aria-labelledby\":\"dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialValue,validationSchema:validation,onSubmit:onSubmit,children:function children(_ref8){var values=_ref8.values,errors=_ref8.errors,touched=_ref8.touched,handleChange=_ref8.handleChange,handleBlur=_ref8.handleBlur,setFieldValue=_ref8.setFieldValue,submitForm=_ref8.submitForm,isSubmitting=_ref8.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Autocomplete,{options:DietTypeDrop,value:DietTypeDrop.find(function(data){return data.id==values.diet_type;}),getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.diet_type;},onChange:function onChange(event,newValue){setFieldValue('diet_type',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Diet Types\",variant:\"outlined\",error:Boolean(touched.diet_type&&errors.diet_type),helperText:touched.diet_type&&errors.diet_type,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Autocomplete,{options:getCaloriesData,value:getCaloriesData.find(function(data){return data.id==values.calories;}),getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.calories;},onChange:function onChange(event,newValue){setFieldValue('calories',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Calories\",variant:\"outlined\",error:Boolean(touched.calories&&errors.calories),helperText:touched.calories&&errors.calories,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Add Meal Plan\"})})}),/*#__PURE__*/_jsxs(TabContext,{value:tabValue||'',children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(TabList,{classes:{indicator:classes.tabIndicator},onChange:function onChange(e,value){return handleChangeTab(value);},orientation:\"vertical\",variant:\"standard\",children:values===null||values===void 0?void 0:values.meal_days.map(function(mealDay,i){var day=mealDay.day;return/*#__PURE__*/_jsx(Tab,{classes:{root:classes.tabRoot,textColorInherit:classes.tabTextColorInherit},label:\"Day - \".concat(day),value:day.toString()});})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:values===null||values===void 0?void 0:values.meal_days.map(function(mealDay,i){var day=mealDay.day,meals=mealDay.meals;return/*#__PURE__*/_jsx(TabPanel,{className:classes.tabPanelRoot,value:day.toString(),children:/*#__PURE__*/_jsx(MealTab,{index:i,meals:meals,recipeList:recipeList},i)},i);})})]})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):okBtnText})]})]});}})]})});};var ViewModel=function ViewModel(props){var isOpen=props.isOpen,title=props.title,onClose=props.onClose,data=props.data;var classes=useStyles();var _useState19=useState(data),_useState20=_slicedToArray(_useState19,2),formValue=_useState20[0],setFormValue=_useState20[1];var _useState21=useState('1'),_useState22=_slicedToArray(_useState21,2),tabValue=_useState22[0],setTabValue=_useState22[1];var handleTabChange=function handleTabChange(event,newValue){setTabValue(newValue);};useEffect(function(){setFormValue(data);},[props]);return/*#__PURE__*/_jsxs(Dialog,{disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"md\",\"aria-labelledby\":\"dialog-view-title\",open:isOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-view-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Diet Type\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:getDropValues(DietTypeDrop,formValue===null||formValue===void 0?void 0:formValue.diet_type)})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Calories\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.calories})})]})]})})}),/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(TabContext,{value:tabValue||'',children:/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:12,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(TabList,{classes:{indicator:classes.tabIndicator},onChange:handleTabChange,orientation:\"vertical\",variant:\"standard\",children:formValue===null||formValue===void 0?void 0:formValue.meal_days.map(function(mealDay,i){var day=mealDay.day;return/*#__PURE__*/_jsx(Tab,{classes:{root:classes.tabRoot,textColorInherit:classes.tabTextColorInherit},label:\"Day - \".concat(day),value:day.toString()});})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:formValue===null||formValue===void 0?void 0:formValue.meal_days.map(function(mealDay,i){var day=mealDay.day,_mealDay$meals=mealDay.meals,meals=_mealDay$meals===void 0?[]:_mealDay$meals;return/*#__PURE__*/_jsx(TabPanel,{className:classes.tabPanelRoot,value:day.toString(),children:meals.map(function(mealData,i){var meal_time=mealData.meal_time,_mealData$recipe=mealData.recipe,recipe=_mealData$recipe===void 0?[]:_mealData$recipe;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,className:classes.mealTimeText,children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:/*#__PURE__*/_jsx(\"strong\",{children:meal_time})})}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,xs:12,spacing:2,children:recipe.map(function(recData,i){var _recData$image;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:12,md:6,children:/*#__PURE__*/_jsxs(Card,{elevation:0,className:classes.cardRoot,children:[/*#__PURE__*/_jsx(CardMedia,{className:classes.cardMediaRoot,image:(_recData$image=recData.image)===null||_recData$image===void 0?void 0:_recData$image.url,title:recData.name}),/*#__PURE__*/_jsx(\"div\",{className:classes.nutritionTextDiv,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.nutritionText,children:[\" \",recData.nutrition]})}),/*#__PURE__*/_jsxs(CardContent,{className:classes.cardContentRoot,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"h2\",children:recData.name}),/*#__PURE__*/_jsxs(CardActions,{disableSpacing:true,className:classes.cardActionsRoot,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:/*#__PURE__*/_jsx(\"ul\",{className:classes.ulRoot,children:/*#__PURE__*/_jsx(\"li\",{className:clsx(classes.liRoot,classes.colorProtein),children:\"Protein\"})})}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:recData.protein})]}),/*#__PURE__*/_jsx(Divider,{className:classes.dividerRoot,orientation:\"vertical\",variant:\"middle\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:/*#__PURE__*/_jsx(\"ul\",{className:classes.ulRoot,children:/*#__PURE__*/_jsx(\"li\",{className:clsx(classes.liRoot,classes.colorFat),children:\"Fat\"})})}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:recData.fat})]}),/*#__PURE__*/_jsx(Divider,{className:classes.dividerRoot,orientation:\"vertical\",variant:\"middle\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:/*#__PURE__*/_jsx(\"ul\",{className:classes.ulRoot,children:/*#__PURE__*/_jsx(\"li\",{className:clsx(classes.liRoot,classes.colorCarbs),children:\"Carbs\"})})}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:recData.carbs})]})]})]})]})});})})]});})},i);})})]})})})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Close\"})})]});};var MealTab=function MealTab(_ref9){var meals=_ref9.meals,recipeList=_ref9.recipeList,index=_ref9.index;var _useFormikContext=useFormikContext(),values=_useFormikContext.values,touched=_useFormikContext.touched,errors=_useFormikContext.errors,setFieldValue=_useFormikContext.setFieldValue,handleChange=_useFormikContext.handleChange,handleBlur=_useFormikContext.handleBlur;var classes=useStyles();var _useState23=useState('0'),_useState24=_slicedToArray(_useState23,2),tabValue=_useState24[0],setTabValue=_useState24[1];var FieldName=\"meal_days[\".concat(index,\"]\");var getArrayError=function getArrayError(error){return typeof error=='string'?error:'';};var handleChangeTab=function handleChangeTab(newValue){setTabValue(newValue);};var addNewTab=function addNewTab(values,setFieldValue,push){// const { meals } = getIn(values, FieldName)\npush(MealTime);// setFieldValue(`${FieldName}.meals`, meals)\n};var submitMealTime=function submitMealTime(i,values,setFieldValue){var _getIn=getIn(values,FieldName),meals=_getIn.meals;var NewMeals=_objectSpread({},meals[i]);NewMeals.isEdit=false;meals[i]=NewMeals;setFieldValue(\"\".concat(FieldName,\".meals\"),meals);handleChangeTab(i.toString());};var editMealTime=function editMealTime(i,values,setFieldValue){var _getIn2=getIn(values,FieldName),meals=_getIn2.meals;var NewMeals=_objectSpread({},meals[i]);NewMeals.isEdit=true;meals[i]=NewMeals;setFieldValue(\"\".concat(FieldName,\".meals\"),meals);handleChangeTab(i.toString());};var deleteMealTime=function deleteMealTime(i,values,setFieldValue){var _getIn3=getIn(values,FieldName),meals=_getIn3.meals;var NewMeals=meals.filter(function(d,index){return index!=i;});setFieldValue(\"\".concat(FieldName,\".meals\"),NewMeals);};return/*#__PURE__*/_jsx(TabContext,{value:tabValue||'',children:/*#__PURE__*/_jsx(FieldArray,{name:\"\".concat(FieldName,\".meals\"),validateOnChange:true,children:function children(_ref10){var push=_ref10.push,remove=_ref10.remove;return/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:12,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsxs(TabList,{classes:{indicator:classes.tabIndicator},orientation:\"vertical\",variant:\"standard\",children:[meals.map(function(mealData,i){var FieldNameSub=\"\".concat(FieldName,\".meals[\").concat(i,\"]\");var FieldTouched=getIn(touched,FieldNameSub);var FieldErrors=getIn(errors,FieldNameSub);var FieldValues=getIn(values,FieldNameSub);var TabSelected=i==Number(tabValue);var SelectedStyle=TabSelected?{borderRight:'2px solid #41a58d'}:{borderRight:'2px solid white'};return/*#__PURE__*/_jsx(\"div\",{className:classes.divTab,children:/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:12,spacing:1,style:_objectSpread({margin:'inherit'},SelectedStyle),children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:mealData.isEdit?10:6,children:[mealData.isEdit&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,size:\"small\",label:\"Name\",name:\"\".concat(FieldNameSub,\".meal_time\"),variant:\"outlined\",error:Boolean((FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.meal_time)&&(FieldErrors===null||FieldErrors===void 0?void 0:FieldErrors.meal_time)),helperText:(FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.meal_time)&&(FieldErrors===null||FieldErrors===void 0?void 0:FieldErrors.meal_time),value:mealData===null||mealData===void 0?void 0:mealData.meal_time,onChange:handleChange,onBlur:handleBlur}),!mealData.isEdit&&/*#__PURE__*/_jsx(Button,{fullWidth:true,className:!Boolean((FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.meal_time)&&(FieldErrors===null||FieldErrors===void 0?void 0:FieldErrors.meal_time))?classes.themeButton:'',classes:{fullWidth:classes.tabBtnIcon},variant:\"contained\",color:\"secondary\",children:!Boolean((FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.meal_time)&&(FieldErrors===null||FieldErrors===void 0?void 0:FieldErrors.meal_time))?mealData===null||mealData===void 0?void 0:mealData.meal_time:FieldErrors===null||FieldErrors===void 0?void 0:FieldErrors.meal_time})]}),mealData.isEdit&&/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,classes:{fullWidth:classes.tabBtnIcon},variant:\"contained\",color:\"secondary\",onClick:function onClick(){return submitMealTime(i,values,setFieldValue);},children:/*#__PURE__*/_jsx(CheckIcon,{})})}),!mealData.isEdit&&/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,classes:{fullWidth:classes.tabBtnIcon},variant:\"contained\",color:\"primary\",onClick:function onClick(e){return handleChangeTab(i.toString());},children:tabValue===i.toString()?/*#__PURE__*/_jsx(ChevronRightIcon,{}):/*#__PURE__*/_jsx(KeyboardArrowUpIcon,{})})}),!mealData.isEdit&&/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,classes:{fullWidth:classes.tabBtnIcon},variant:\"contained\",color:\"primary\",onClick:function onClick(){return editMealTime(i,values,setFieldValue);},children:/*#__PURE__*/_jsx(EditIcon,{})})}),!mealData.isEdit&&/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,classes:{fullWidth:classes.tabBtnIcon},variant:\"contained\",color:\"secondary\",onClick:function onClick(){return remove(i);},children:/*#__PURE__*/_jsx(DeleteIcon,{})})}),/*#__PURE__*/_jsx(FormHelperText,{children:/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"error\",children:getIn(touched,\"\".concat(FieldName,\".meals[\").concat(i,\"].recipe\"))&&getArrayError(getIn(errors,\"\".concat(FieldName,\".meals[\").concat(i,\"].recipe\")))})})]})});}),/*#__PURE__*/_jsx(\"div\",{className:classes.divTab,children:/*#__PURE__*/_jsx(Grid,{container:true,xs:12,spacing:1,style:{margin:'inherit'},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,error:Boolean(getIn(touched,\"\".concat(FieldName,\".meals\"))&&getArrayError(getIn(errors,\"\".concat(FieldName,\".meals\")))),children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,variant:\"contained\",color:\"secondary\",onClick:function onClick(){return addNewTab(values,setFieldValue,push);},endIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Add Meal Time\"}),/*#__PURE__*/_jsx(FormHelperText,{children:getIn(touched,'nutrition')&&getArrayError(getIn(errors,'nutrition'))})]})})})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:8,children:meals.map(function(mealData,i){var FieldNameSub=\"\".concat(FieldName,\".meals[\").concat(i,\"]\");var FieldTouched=getIn(touched,FieldNameSub);var FieldErrors=getIn(errors,FieldNameSub);return/*#__PURE__*/_jsx(TabPanel,{className:classes.tabPanelRoot,value:i.toString(),children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:mealData===null||mealData===void 0?void 0:mealData.meal_time})})}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:/*#__PURE__*/_jsx(Autocomplete,{multiple:true,options:recipeList,value:recipeList.filter(function(data){return mealData.recipe.map(function(_ref11){var id=_ref11.id;return id;}).includes(data._id);}),getOptionLabel:function getOptionLabel(option){return option.name;},onChange:function onChange(event,newValue){var RecIds=newValue.map(function(_ref12){var _id=_ref12._id;return{id:_id};});setFieldValue(\"\".concat(FieldNameSub,\".recipe\"),RecIds||[]);},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Recipe\",variant:\"outlined\",error:Boolean((FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.recipe)&&(FieldErrors===null||FieldErrors===void 0?void 0:FieldErrors.recipe)),helperText:(FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.recipe)&&(FieldErrors===null||FieldErrors===void 0?void 0:FieldErrors.recipe),inputProps:_objectSpread({},params.inputProps)}));}})})]})},i);})})]});}})});};export default MealPlan;","map":null,"metadata":{},"sourceType":"module"}