{"ast":null,"code":"import { Node, mergeAttributes } from '@tiptap/core';\nimport { textblockTypeInputRule } from 'prosemirror-inputrules';\nconst Heading = Node.create({\n  name: 'heading',\n  defaultOptions: {\n    levels: [1, 2, 3, 4, 5, 6],\n    HTMLAttributes: {}\n  },\n  content: 'inline*',\n  group: 'block',\n  defining: true,\n\n  addAttributes() {\n    return {\n      level: {\n        default: 1,\n        rendered: false\n      }\n    };\n  },\n\n  parseHTML() {\n    return this.options.levels.map(level => ({\n      tag: `h${level}`,\n      attrs: {\n        level\n      }\n    }));\n  },\n\n  renderHTML({\n    node,\n    HTMLAttributes\n  }) {\n    const hasLevel = this.options.levels.includes(node.attrs.level);\n    const level = hasLevel ? node.attrs.level : this.options.levels[0];\n    return [`h${level}`, mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n\n  addCommands() {\n    return {\n      setHeading: attributes => ({\n        commands\n      }) => {\n        if (!this.options.levels.includes(attributes.level)) {\n          return false;\n        }\n\n        return commands.setNode('heading', attributes);\n      },\n      toggleHeading: attributes => ({\n        commands\n      }) => {\n        if (!this.options.levels.includes(attributes.level)) {\n          return false;\n        }\n\n        return commands.toggleNode('heading', 'paragraph', attributes);\n      }\n    };\n  },\n\n  addKeyboardShortcuts() {\n    return this.options.levels.reduce((items, level) => ({ ...items,\n      ...{\n        [`Mod-Alt-${level}`]: () => this.editor.commands.toggleHeading({\n          level\n        })\n      }\n    }), {});\n  },\n\n  addInputRules() {\n    return this.options.levels.map(level => {\n      return textblockTypeInputRule(new RegExp(`^(#{1,${level}})\\\\s$`), this.type, {\n        level\n      });\n    });\n  }\n\n});\nexport default Heading;\nexport { Heading };","map":{"version":3,"sources":["../src/heading.ts"],"names":[],"mappings":";;MAyBa,OAAO,GAAG,IAAI,CAAC,MAAL,CAA4B;AACjD,EAAA,IAAI,EAAE,SAD2C;AAGjD,EAAA,cAAc,EAAE;AACd,IAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CADM;AAEd,IAAA,cAAc,EAAE;AAFF,GAHiC;AAQjD,EAAA,OAAO,EAAE,SARwC;AAUjD,EAAA,KAAK,EAAE,OAV0C;AAYjD,EAAA,QAAQ,EAAE,IAZuC;;AAcjD,EAAA,aAAa,GAAA;AACX,WAAO;AACL,MAAA,KAAK,EAAE;AACL,QAAA,OAAO,EAAE,CADJ;AAEL,QAAA,QAAQ,EAAE;AAFL;AADF,KAAP;AAMD,GArBgD;;AAuBjD,EAAA,SAAS,GAAA;AACP,WAAO,KAAK,OAAL,CAAa,MAAb,CACJ,GADI,CACC,KAAD,KAAmB;AACtB,MAAA,GAAG,EAAE,IAAI,KAAK,EADQ;AAEtB,MAAA,KAAK,EAAE;AAAE,QAAA;AAAF;AAFe,KAAnB,CADA,CAAP;AAKD,GA7BgD;;AA+BjD,EAAA,UAAU,CAAC;AAAE,IAAA,IAAF;AAAQ,IAAA;AAAR,GAAD,EAAyB;AACjC,UAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,MAAb,CAAoB,QAApB,CAA6B,IAAI,CAAC,KAAL,CAAW,KAAxC,CAAjB;AACA,UAAM,KAAK,GAAG,QAAQ,GAClB,IAAI,CAAC,KAAL,CAAW,KADO,GAElB,KAAK,OAAL,CAAa,MAAb,CAAoB,CAApB,CAFJ;AAIA,WAAO,CAAC,IAAI,KAAK,EAAV,EAAc,eAAe,CAAC,KAAK,OAAL,CAAa,cAAd,EAA8B,cAA9B,CAA7B,EAA4E,CAA5E,CAAP;AACD,GAtCgD;;AAwCjD,EAAA,WAAW,GAAA;AACT,WAAO;AACL,MAAA,UAAU,EAAE,UAAU,IAAI,CAAC;AAAE,QAAA;AAAF,OAAD,KAAa;AACrC,YAAI,CAAC,KAAK,OAAL,CAAa,MAAb,CAAoB,QAApB,CAA6B,UAAU,CAAC,KAAxC,CAAL,EAAqD;AACnD,iBAAO,KAAP;AACD;;AAED,eAAO,QAAQ,CAAC,OAAT,CAAiB,SAAjB,EAA4B,UAA5B,CAAP;AACD,OAPI;AAQL,MAAA,aAAa,EAAE,UAAU,IAAI,CAAC;AAAE,QAAA;AAAF,OAAD,KAAa;AACxC,YAAI,CAAC,KAAK,OAAL,CAAa,MAAb,CAAoB,QAApB,CAA6B,UAAU,CAAC,KAAxC,CAAL,EAAqD;AACnD,iBAAO,KAAP;AACD;;AAED,eAAO,QAAQ,CAAC,UAAT,CAAoB,SAApB,EAA+B,WAA/B,EAA4C,UAA5C,CAAP;AACD;AAdI,KAAP;AAgBD,GAzDgD;;AA2DjD,EAAA,oBAAoB,GAAA;AAClB,WAAO,KAAK,OAAL,CAAa,MAAb,CAAoB,MAApB,CAA2B,CAAC,KAAD,EAAQ,KAAR,MAAmB,EACnD,GAAG,KADgD;AAEnD,SAAG;AACD,SAAC,WAAW,KAAK,EAAjB,GAAsB,MAAM,KAAK,MAAL,CAAY,QAAZ,CAAqB,aAArB,CAAmC;AAAE,UAAA;AAAF,SAAnC;AAD3B;AAFgD,KAAnB,CAA3B,EAKH,EALG,CAAP;AAMD,GAlEgD;;AAoEjD,EAAA,aAAa,GAAA;AACX,WAAO,KAAK,OAAL,CAAa,MAAb,CAAoB,GAApB,CAAwB,KAAK,IAAA;AAClC,aAAO,sBAAsB,CAAC,IAAI,MAAJ,CAAW,SAAS,KAAK,QAAzB,CAAD,EAAqC,KAAK,IAA1C,EAAgD;AAAE,QAAA;AAAF,OAAhD,CAA7B;AACD,KAFM,CAAP;AAGD;;AAxEgD,CAA5B,C","sourcesContent":["import { Command, Node, mergeAttributes } from '@tiptap/core'\nimport { textblockTypeInputRule } from 'prosemirror-inputrules'\n\ntype Level = 1 | 2 | 3 | 4 | 5 | 6\n\nexport interface HeadingOptions {\n  levels: Level[],\n  HTMLAttributes: Record<string, any>,\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands {\n    heading: {\n      /**\n       * Set a heading node\n       */\n      setHeading: (attributes: { level: Level }) => Command,\n      /**\n       * Toggle a heading node\n       */\n      toggleHeading: (attributes: { level: Level }) => Command,\n    }\n  }\n}\n\nexport const Heading = Node.create<HeadingOptions>({\n  name: 'heading',\n\n  defaultOptions: {\n    levels: [1, 2, 3, 4, 5, 6],\n    HTMLAttributes: {},\n  },\n\n  content: 'inline*',\n\n  group: 'block',\n\n  defining: true,\n\n  addAttributes() {\n    return {\n      level: {\n        default: 1,\n        rendered: false,\n      },\n    }\n  },\n\n  parseHTML() {\n    return this.options.levels\n      .map((level: Level) => ({\n        tag: `h${level}`,\n        attrs: { level },\n      }))\n  },\n\n  renderHTML({ node, HTMLAttributes }) {\n    const hasLevel = this.options.levels.includes(node.attrs.level)\n    const level = hasLevel\n      ? node.attrs.level\n      : this.options.levels[0]\n\n    return [`h${level}`, mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  addCommands() {\n    return {\n      setHeading: attributes => ({ commands }) => {\n        if (!this.options.levels.includes(attributes.level)) {\n          return false\n        }\n\n        return commands.setNode('heading', attributes)\n      },\n      toggleHeading: attributes => ({ commands }) => {\n        if (!this.options.levels.includes(attributes.level)) {\n          return false\n        }\n\n        return commands.toggleNode('heading', 'paragraph', attributes)\n      },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return this.options.levels.reduce((items, level) => ({\n      ...items,\n      ...{\n        [`Mod-Alt-${level}`]: () => this.editor.commands.toggleHeading({ level }),\n      },\n    }), {})\n  },\n\n  addInputRules() {\n    return this.options.levels.map(level => {\n      return textblockTypeInputRule(new RegExp(`^(#{1,${level}})\\\\s$`), this.type, { level })\n    })\n  },\n})\n"]},"metadata":{},"sourceType":"module"}