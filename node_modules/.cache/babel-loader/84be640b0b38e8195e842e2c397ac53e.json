{"ast":null,"code":"import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Card,Table,TableBody,TableCell,TextField,TableHead,TableRow,Typography,Button,Dialog,DialogActions,DialogContent,Grid,CircularProgress}from'@material-ui/core';import{makeStyles}from'@material-ui/styles';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import React,{useEffect,useState}from'react';import getDropValues,{CcpaStatus,NoOption}from'../../utils/PlanDropdowns';import{Autocomplete}from'@material-ui/lab';import clsx from'clsx';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import{cloneDeep}from'lodash';import useEuropienCountriesList from'../../hook/useEuropienCountriesList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{marginTop10:{marginTop:10},lColor:{color:'white'},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},noTextTransform:{textTransform:'none'},content:{height:'50vh',display:'flex',justifyContent:'center',alignItems:'center'}};});var AppUserCCPA=function AppUserCCPA(props){var _formData$gdpr_share_,_formData$gdpr_protec,_formData$gdpr_person,_formData$ccpa_access,_formData$ccpa_access2,_formData$ccpa_access3,_formData$ccpa_access4,_formData$ccpa_access5,_formData$ccpa_share_,_formData$ccpa_share_2,_formData$ccpa_share_3,_formData$ccpa_delete,_formData$ccpa_delete2,_formData$ccpa_delete3,_formData$ccpa_delete4,_formData$ccpa_delete5;var classes=useStyles();var getCountryList=useEuropienCountriesList();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),isEuropienCountry=_useState2[0],setIsEuropienCountry=_useState2[1];var data=props.data,onRefresh=props.onRefresh;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var getRequestFor=function getRequestFor(data){switch(data===null||data===void 0?void 0:data.gdpr_type_value){case true:return'Enable';case false:return'Disable';default:return'No Request';}};var checkEuropiesCountry=function checkEuropiesCountry(){getCountryList.map(function(items,index){if(items.name===(formData===null||formData===void 0?void 0:formData.country)){setIsEuropienCountry(1);}});};var getRequestStatus=function getRequestStatus(data){var status=data.status;switch(status){case true:return'Enable';break;case false:return'Disable';break;default:return{status:status,is_display:false};}};useEffect(function(){setFormData(data);checkEuropiesCountry();},[props,formData,isEuropienCountry]);return/*#__PURE__*/_jsxs(\"div\",{children:[isEuropienCountry===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"GDPR\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{children:\"Current Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Request for\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Request Status\"}),/*#__PURE__*/_jsx(TableCell,{})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Share your personal data\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.isSharePersonalData)?'Enabled':'Disabled'}),/*#__PURE__*/_jsx(TableCell,{children:getRequestFor(formData===null||formData===void 0?void 0:formData.gdpr_share_data)}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$gdpr_share_=formData.gdpr_share_data)===null||_formData$gdpr_share_===void 0?void 0:_formData$gdpr_share_.status)}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.gdpr_share_data)&&/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.gdpr_share_data,apiUrl:'app/gdprUpdateData',onSuccess:onRefresh})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Protect your data\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.isProtectYourData)?'Enabled':'Disabled'}),/*#__PURE__*/_jsx(TableCell,{children:getRequestFor(formData===null||formData===void 0?void 0:formData.gdpr_protect_data)}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$gdpr_protec=formData.gdpr_protect_data)===null||_formData$gdpr_protec===void 0?void 0:_formData$gdpr_protec.status)}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.gdpr_protect_data)&&/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.gdpr_protect_data,apiUrl:'app/gdprUpdateData',onSuccess:onRefresh})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Personal Information\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.isPersonalInformation)?'Enabled':'Disabled'}),/*#__PURE__*/_jsx(TableCell,{children:getRequestFor(formData===null||formData===void 0?void 0:formData.gdpr_personal_data)}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$gdpr_person=formData.gdpr_personal_data)===null||_formData$gdpr_person===void 0?void 0:_formData$gdpr_person.status)}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.gdpr_personal_data)&&/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.gdpr_personal_data,apiUrl:'app/gdprUpdateData',onSuccess:onRefresh})})]})]})]})})]}),(formData===null||formData===void 0?void 0:formData.state)==='California'&&/*#__PURE__*/_jsxs(_Fragment,{children:[(formData===null||formData===void 0?void 0:formData.ccpa_access_data)&&/*#__PURE__*/_jsxs(\"div\",{className:classes.marginTop10,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"CCPA Access your data\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:(_formData$ccpa_access=formData.ccpa_access_data)===null||_formData$ccpa_access===void 0?void 0:_formData$ccpa_access.firstName)+' '+(formData===null||formData===void 0?void 0:(_formData$ccpa_access2=formData.ccpa_access_data)===null||_formData$ccpa_access2===void 0?void 0:_formData$ccpa_access2.lastName)}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_access3=formData.ccpa_access_data)===null||_formData$ccpa_access3===void 0?void 0:_formData$ccpa_access3.email}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"State\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_access4=formData.ccpa_access_data)===null||_formData$ccpa_access4===void 0?void 0:_formData$ccpa_access4.state}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$ccpa_access5=formData.ccpa_access_data)===null||_formData$ccpa_access5===void 0?void 0:_formData$ccpa_access5.status)}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.ccpa_access_data,apiUrl:'app/ccpaUpdateAccessData',onSuccess:onRefresh})})]})]})})})]}),(formData===null||formData===void 0?void 0:formData.ccpa_share_data)&&/*#__PURE__*/_jsxs(\"div\",{className:classes.marginTop10,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"CCPA Share your data\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_share_=formData.ccpa_share_data)===null||_formData$ccpa_share_===void 0?void 0:_formData$ccpa_share_.email}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"State\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_share_2=formData.ccpa_share_data)===null||_formData$ccpa_share_2===void 0?void 0:_formData$ccpa_share_2.state}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$ccpa_share_3=formData.ccpa_share_data)===null||_formData$ccpa_share_3===void 0?void 0:_formData$ccpa_share_3.status)}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.ccpa_share_data,apiUrl:'app/ccpaUpdateShareData',onSuccess:onRefresh})})]})]})})})]}),(formData===null||formData===void 0?void 0:formData.ccpa_delete_data)&&/*#__PURE__*/_jsxs(\"div\",{className:classes.marginTop10,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"CCPA Delete your data\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:(_formData$ccpa_delete=formData.ccpa_delete_data)===null||_formData$ccpa_delete===void 0?void 0:_formData$ccpa_delete.firstName)+' '+(formData===null||formData===void 0?void 0:(_formData$ccpa_delete2=formData.ccpa_delete_data)===null||_formData$ccpa_delete2===void 0?void 0:_formData$ccpa_delete2.lastName)}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_delete3=formData.ccpa_delete_data)===null||_formData$ccpa_delete3===void 0?void 0:_formData$ccpa_delete3.email}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"State\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_delete4=formData.ccpa_delete_data)===null||_formData$ccpa_delete4===void 0?void 0:_formData$ccpa_delete4.state}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$ccpa_delete5=formData.ccpa_delete_data)===null||_formData$ccpa_delete5===void 0?void 0:_formData$ccpa_delete5.status)}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.ccpa_delete_data,apiUrl:'app/ccpaUpdateDeleteData',onSuccess:onRefresh})})]})]})})})]})]}),isEuropienCountry!==1&&(formData===null||formData===void 0?void 0:formData.state)!=='California'&&/*#__PURE__*/_jsx(\"div\",{className:classes.content,children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"This is not available for user's Country\"})})})]});};export var ChangeStatusModel=function ChangeStatusModel(props){var _props$data;var classes=useStyles();var onSuccess=props.onSuccess;var _useService=useService(),Post=_useService.Post;var Snackbar=useSnackbar();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isOpen=_useState6[0],setIsOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submitting=_useState8[0],setSubmitting=_useState8[1];var _useState9=useState(props===null||props===void 0?void 0:props.data),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setFormData=_useState10[1];var _useState11=useState(props.apiUrl),_useState12=_slicedToArray(_useState11,2),apiUrl=_useState12[0],setApiUrl=_useState12[1];var _useState13=useState(props===null||props===void 0?void 0:(_props$data=props.data)===null||_props$data===void 0?void 0:_props$data.status),_useState14=_slicedToArray(_useState13,2),status=_useState14[0],setStatus=_useState14[1];var handleModel=function handleModel(){setIsOpen(!isOpen);setSubmitting(false);};var onSubmit=function onSubmit(){if(status==''){Snackbar.show('Status required','error');return;}setSubmitting(true);Post(apiUrl,{id:formData._id,status:status}).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);handleModel();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};useEffect(function(){var _cloneDeep=cloneDeep(props),data=_cloneDeep.data,apiUrl=_cloneDeep.apiUrl;var _cloneDeep2=cloneDeep(data),status=_cloneDeep2.status;setFormData(data);setStatus(status);setApiUrl(apiUrl);},[props,isOpen]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleModel,className:clsx(classes.themeButton,classes.noTextTransform),children:\"Change Status\"}),isOpen&&/*#__PURE__*/_jsxs(Dialog,{disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"dialog-title\",open:isOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:handleModel,children:\"Change Status\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Autocomplete,{options:CcpaStatus,value:CcpaStatus.find(function(data){return data.id==status;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==status;},onChange:function onChange(event,newValue){setStatus((newValue===null||newValue===void 0?void 0:newValue.id)||'');},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Change Status\",variant:\"outlined\",inputProps:_objectSpread({},params.inputProps)}));}})})})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleModel,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return onSubmit();},variant:\"outlined\",children:submitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,className:classes.lColor}):'Change'})]})]})]});};export default AppUserCCPA;","map":null,"metadata":{},"sourceType":"module"}