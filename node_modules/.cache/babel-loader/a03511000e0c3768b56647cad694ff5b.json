{"ast":null,"code":"import _regeneratorRuntime from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectWithoutProperties from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Grid,Button,Paper,makeStyles,Avatar,Table,TableBody,TableCell,TableRow,IconButton,Dialog,DialogActions,DialogContent,TextField}from'@material-ui/core';import Page from'../../components/Page/Page';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import EditIcon from'@material-ui/icons/Edit';import CircularProgress from'@material-ui/core/CircularProgress';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import{Formik}from'formik';import*as Yup from'yup';import{uploadNewImage}from'../../utils/CloudinaryUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyle=makeStyles(function(theme){return{root:{width:theme.breakpoints.values.lg,height:'100%',maxWidth:'100%',margin:'0 auto',padding:theme.spacing(3)},paperStyle:{padding:theme.spacing(8,8)},insidePaperDivStyle:{display:'flex',flexDirection:'column',justifyContent:'center',margin:'auto',alignItems:'center',height:'100%'},themeButton:{color:theme.palette.white,// textTransform: 'capitalize',\nbackgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},avatarStyle:{width:'150px',height:'150px'},lColor:{color:theme.palette.green.main}};});var AdminProfileDetails=function AdminProfileDetails(){var _profileData$image;var classes=useStyle();var _useService=useService(),Post=_useService.Post;var Snackbar=useSnackbar();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),profileData=_React$useState2[0],setProfileData=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];var getProfileDetails=function getProfileDetails(){setIsLoading(true);Post('app/getAdminUser',{}).then(function(res){setIsLoading(false);if(!res.error){setProfileData(res.data);}else{Snackbar.show(res.message,'error');}}).catch(function(err){setIsLoading(false);Snackbar.show(err.message,'error');});};React.useEffect(function(){getProfileDetails();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Page,{title:\"Admin Profile\"}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{xs:true,md:true,item:true}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsxs(Paper,{className:classes.paperStyle,children:[!isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:classes.insidePaperDivStyle,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatarStyle,src:profileData===null||profileData===void 0?void 0:(_profileData$image=profileData.image)===null||_profileData$image===void 0?void 0:_profileData$image.url,alt:profileData===null||profileData===void 0?void 0:profileData.name,variant:\"square\"}),/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:profileData===null||profileData===void 0?void 0:profileData.name}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(EditProfile,{data:profileData,onRefresh:getProfileDetails})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:profileData===null||profileData===void 0?void 0:profileData.email}),/*#__PURE__*/_jsx(TableCell,{align:\"right\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Admin Type\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:profileData===null||profileData===void 0?void 0:profileData.user_type}),/*#__PURE__*/_jsx(TableCell,{align:\"right\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Password\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"**********\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(ChangePassword,{onRefresh:getProfileDetails})})]})]})})]}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:classes.insidePaperDivStyle,children:/*#__PURE__*/_jsx(CircularProgress,{className:classes.lColor})})]})}),/*#__PURE__*/_jsx(Grid,{xs:true,md:true,item:true})]})]});};var initialEditValues={name:'',image:{file:null,prevImage:'',isNew:null}};export var EditProfile=function EditProfile(props){var data=props.data,onRefresh=props.onRefresh;var classes=useStyle();var formikRef=React.useRef(null);var imageRef=React.useRef(null);var _useService2=useService(),Post=_useService2.Post;var Snackbar=useSnackbar();var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEdit=_React$useState6[0],setIsEdit=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isOpen=_React$useState8[0],setIsOpen=_React$useState8[1];var _React$useState9=React.useState(_objectSpread({},initialEditValues)),_React$useState10=_slicedToArray(_React$useState9,2),initialFormValues=_React$useState10[0],setInitialFormValues=_React$useState10[1];React.useEffect(function(){if(isEdit){var image=data.image,_id=data._id,rest=_objectWithoutProperties(data,[\"image\",\"_id\"]);var editData=_objectSpread(_objectSpread({},rest),{},{id:_id});editData.image={file:image,prevImage:image===null||image===void 0?void 0:image.url,isNew:false};console.log(editData);setInitialFormValues(editData);}else{setInitialFormValues(initialEditValues);}},[props,isEdit]);var editProfileModel=function editProfileModel(){setIsOpen(!isOpen);setIsEdit(true);};var onClose=function onClose(){setIsOpen(!isOpen);};var onImageChange=function onImageChange(e){e.persist();var files=e.target.files;if(files&&files.length!=0){var reader=new FileReader();var file=files[0];reader.onloadend=function(){formikRef.current.setFieldValue('image',{file:file,prevImage:reader.result,isNew:true});};reader.readAsDataURL(file);}else{formikRef.current.setFieldValue('image',{file:null,prevImage:'',isNew:null});}};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value,helper){var name,image,postData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=value.name,image=value.image;postData={};postData.name=name;_context.next=5;return uploadNewImage(image);case 5:postData.image=_context.sent;editProfile(postData,helper);case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x,_x2){return _ref.apply(this,arguments);};}();var editProfile=function editProfile(data,_ref2){var setSubmitting=_ref2.setSubmitting,resetForm=_ref2.resetForm;Post('app/updateAdminDetails',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onClose();onRefresh();}).catch(function(err){Snackbar.show(err.message,'error');});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:editProfileModel,className:classes.themeButton,children:/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsxs(Dialog,{open:isOpen,disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:\"Edit Profile\"}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialFormValues,validationSchema:Yup.object().shape({name:Yup.string().required('Name is required'),image:Yup.object({file:Yup.mixed().required('A file is required')})}),onSubmit:onSubmit,children:function children(_ref3){var _values$image;var values=_ref3.values,errors=_ref3.errors,touched=_ref3.touched,handleChange=_ref3.handleChange,handleBlur=_ref3.handleBlur,setFieldValue=_ref3.setFieldValue,submitForm=_ref3.submitForm,isSubmitting=_ref3.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(\"input\",{name:\"recipe_image\",ref:imageRef,type:\"file\",accept:\".jpg,.png,jpeg\",onChange:onImageChange,onBlur:handleBlur,hidden:true}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(Avatar,{onClick:function onClick(){return imageRef.current.click();},className:classes.avatarStyle,src:values===null||values===void 0?void 0:(_values$image=values.image)===null||_values$image===void 0?void 0:_values$image.prevImage,alt:'profilePic',variant:\"square\"})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Name\",variant:\"outlined\",name:\"name\",value:values.name,onBlur:handleBlur,onChange:handleChange,error:Boolean(touched.name&&errors.name),helperText:touched.name&&errors.name})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):'Save'})]})]});}})]})]});};var initialValues={password:'',confirmPassword:''};export var ChangePassword=function ChangePassword(props){var onRefresh=props.onRefresh;var classes=useStyle();var formikRef=React.useRef(null);var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isOpen=_React$useState12[0],setIsOpen=_React$useState12[1];var _useService3=useService(),Post=_useService3.Post;var Snackbar=useSnackbar();var _React$useState13=React.useState(_objectSpread({},initialValues)),_React$useState14=_slicedToArray(_React$useState13,2),initialFormValues=_React$useState14[0],setInitialFormValues=_React$useState14[1];var changePasswordModel=function changePasswordModel(){setIsOpen(!isOpen);};var onClose=function onClose(){setIsOpen(!isOpen);};var onSubmit=function onSubmit(value,helper){var confirmPassword=value.confirmPassword;var postData={password:confirmPassword};changePasswordData(postData,helper);};var changePasswordData=function changePasswordData(data,_ref4){var setSubmitting=_ref4.setSubmitting,resetForm=_ref4.resetForm;Post('app/updateAdminPassword',data).then(function(res){if(res.error){Snackbar.show(res.message,'success');setSubmitting(false);}else{Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onClose();onRefresh();}}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:changePasswordModel,className:classes.themeButton,children:\"Change\"}),/*#__PURE__*/_jsxs(Dialog,{open:isOpen,disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:\"Change Password\"}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialFormValues,validationSchema:Yup.object().shape({password:Yup.string().required('Password is required').min(6,'Password must be at least 6 characters'),confirmPassword:Yup.string().oneOf([Yup.ref('password'),null],'Password must be same').required('Confirm password is required')}),onSubmit:onSubmit,children:function children(_ref5){var values=_ref5.values,errors=_ref5.errors,touched=_ref5.touched,handleChange=_ref5.handleChange,handleBlur=_ref5.handleBlur,setFieldValue=_ref5.setFieldValue,submitForm=_ref5.submitForm,isSubmitting=_ref5.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"New Password\",variant:\"outlined\",name:\"password\",type:\"password\",value:values.password,onBlur:handleBlur,onChange:handleChange,error:Boolean(touched.password&&errors.password),helperText:touched.password&&errors.password})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Confirm Password\",variant:\"outlined\",name:\"confirmPassword\",type:\"password\",value:values.confirmPassword,onBlur:handleBlur,onChange:handleChange,error:Boolean(touched.confirmPassword&&errors.confirmPassword),helperText:touched.confirmPassword&&errors.confirmPassword})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):'Submit'})]})]});}})]})]});};export default AdminProfileDetails;","map":{"version":3,"sources":["D:/Pyramidion/WebApp/Izze-Admin/src/pages/AdminProfileDetails/AdminProfileDetails.tsx"],"names":["React","Grid","Button","Paper","makeStyles","Avatar","Table","TableBody","TableCell","TableRow","IconButton","Dialog","DialogActions","DialogContent","TextField","Page","useService","useSnackbar","EditIcon","CircularProgress","DialogTitle","Formik","Yup","uploadNewImage","useStyle","theme","root","width","breakpoints","values","lg","height","maxWidth","margin","padding","spacing","paperStyle","insidePaperDivStyle","display","flexDirection","justifyContent","alignItems","themeButton","color","palette","white","backgroundColor","green","main","dark","avatarStyle","lColor","AdminProfileDetails","classes","Post","Snackbar","useState","profileData","setProfileData","isLoading","setIsLoading","getProfileDetails","then","res","error","data","show","message","catch","err","useEffect","image","url","name","email","user_type","initialEditValues","file","prevImage","isNew","EditProfile","props","onRefresh","formikRef","useRef","imageRef","isEdit","setIsEdit","isOpen","setIsOpen","initialFormValues","setInitialFormValues","_id","rest","editData","id","console","log","editProfileModel","onClose","onImageChange","e","persist","files","target","length","reader","FileReader","onloadend","current","setFieldValue","result","readAsDataURL","onSubmit","value","helper","postData","editProfile","setSubmitting","resetForm","object","shape","string","required","mixed","errors","touched","handleChange","handleBlur","submitForm","isSubmitting","click","Boolean","initialValues","password","confirmPassword","ChangePassword","changePasswordModel","changePasswordData","min","oneOf","ref"],"mappings":"8vBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,KAAvB,CAA8BC,UAA9B,CAA0CC,MAA1C,CAAkDC,KAAlD,CAAyDC,SAAzD,CAAoEC,SAApE,CAA+EC,QAA/E,CAAyFC,UAAzF,CAAqGC,MAArG,CAA6GC,aAA7G,CAA4HC,aAA5H,CAA2IC,SAA3I,KAAuN,mBAAvN,CACA,MAAOC,CAAAA,IAAP,KAAiB,4BAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,uBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,MAAOC,CAAAA,WAAP,KAAwB,2CAAxB,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,OAASC,cAAT,KAA+B,6BAA/B,C,6IAEA,GAAMC,CAAAA,QAAQ,CAAGpB,UAAU,CAAC,SAACqB,KAAD,QAAiB,CAC3CC,IAAI,CAAE,CACJC,KAAK,CAAEF,KAAK,CAACG,WAAN,CAAkBC,MAAlB,CAAyBC,EAD5B,CAEJC,MAAM,CAAE,MAFJ,CAGJC,QAAQ,CAAE,MAHN,CAIJC,MAAM,CAAE,QAJJ,CAKJC,OAAO,CAAET,KAAK,CAACU,OAAN,CAAc,CAAd,CALL,CADqC,CAQ3CC,UAAU,CAAE,CACVF,OAAO,CAAET,KAAK,CAACU,OAAN,CAAc,CAAd,CAAiB,CAAjB,CADC,CAR+B,CAW3CE,mBAAmB,CAAE,CACnBC,OAAO,CAAE,MADU,CAEnBC,aAAa,CAAE,QAFI,CAGnBC,cAAc,CAAE,QAHG,CAInBP,MAAM,CAAE,MAJW,CAKnBQ,UAAU,CAAE,QALO,CAMnBV,MAAM,CAAE,MANW,CAXsB,CAmB3CW,WAAW,CAAE,CACXC,KAAK,CAAElB,KAAK,CAACmB,OAAN,CAAcC,KADV,CAEX;AACAC,eAAe,CAAErB,KAAK,CAACmB,OAAN,CAAcG,KAAd,CAAoBC,IAH1B,CAIX,UAAW,CACTF,eAAe,CAAErB,KAAK,CAACmB,OAAN,CAAcG,KAAd,CAAoBE,IAD5B,CAJA,CAnB8B,CA2B3CC,WAAW,CAAE,CACXvB,KAAK,CAAE,OADI,CAEXI,MAAM,CAAE,OAFG,CA3B8B,CA+B3CoB,MAAM,CAAE,CACNR,KAAK,CAAElB,KAAK,CAACmB,OAAN,CAAcG,KAAd,CAAoBC,IADrB,CA/BmC,CAAjB,EAAD,CAA3B,CAqCA,GAAMI,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,wBAChC,GAAMC,CAAAA,OAAO,CAAG7B,QAAQ,EAAxB,CACA,gBAAiBR,UAAU,EAA3B,CAAQsC,IAAR,aAAQA,IAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGtC,WAAW,EAA5B,CACA,oBAAsCjB,KAAK,CAACwD,QAAN,CAAoB,EAApB,CAAtC,oDAAOC,WAAP,qBAAoBC,cAApB,qBACA,qBAAkC1D,KAAK,CAACwD,QAAN,CAAe,IAAf,CAAlC,qDAAOG,SAAP,qBAAkBC,YAAlB,qBAGA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9BD,YAAY,CAAC,IAAD,CAAZ,CACAN,IAAI,CAAC,kBAAD,CAAqB,EAArB,CAAJ,CACGQ,IADH,CACQ,SAACC,GAAD,CAAc,CAClBH,YAAY,CAAC,KAAD,CAAZ,CACA,GAAI,CAACG,GAAG,CAACC,KAAT,CAAgB,CACdN,cAAc,CAACK,GAAG,CAACE,IAAL,CAAd,CACD,CAFD,IAEO,CACLV,QAAQ,CAACW,IAAT,CAAcH,GAAG,CAACI,OAAlB,CAA2B,OAA3B,EACD,CACF,CARH,EASGC,KATH,CASS,SAACC,GAAD,CAAc,CACnBT,YAAY,CAAC,KAAD,CAAZ,CACAL,QAAQ,CAACW,IAAT,CAAcG,GAAG,CAACF,OAAlB,CAA2B,OAA3B,EACD,CAZH,EAaD,CAfD,CAiBAnE,KAAK,CAACsE,SAAN,CAAgB,UAAM,CACpBT,iBAAiB,GAClB,CAFD,CAEG,EAFH,EAIA,mBACE,aAAK,SAAS,CAAER,OAAO,CAAC3B,IAAxB,wBACE,KAAC,IAAD,EAAM,KAAK,CAAC,eAAZ,EADF,cAEE,MAAC,IAAD,EAAM,SAAS,KAAf,wBACE,KAAC,IAAD,EAAO,EAAE,KAAT,CAAU,EAAE,KAAZ,CAAa,IAAI,KAAjB,EADF,cAEE,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,uBACE,MAAC,KAAD,EAAO,SAAS,CAAE2B,OAAO,CAACjB,UAA1B,WACG,CAACuB,SAAD,eACC,aAAK,SAAS,CAAEN,OAAO,CAAChB,mBAAxB,wBACE,KAAC,MAAD,EAAQ,SAAS,CAAEgB,OAAO,CAACH,WAA3B,CAAwC,GAAG,CAAEO,WAAF,SAAEA,WAAF,qCAAEA,WAAW,CAAEc,KAAf,6CAAE,mBAAoBC,GAAjE,CAAsE,GAAG,CAAEf,WAAF,SAAEA,WAAF,iBAAEA,WAAW,CAAEgB,IAAxF,CAA8F,OAAO,CAAC,QAAtG,EADF,cAEE,KAAC,KAAD,wBACE,MAAC,SAAD,yBACE,MAAC,QAAD,yBACE,KAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,kBADF,cAEE,KAAC,SAAD,EAAW,KAAK,CAAC,QAAjB,UAA2BhB,WAA3B,SAA2BA,WAA3B,iBAA2BA,WAAW,CAAEgB,IAAxC,EAFF,cAGE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBAAyB,KAAC,WAAD,EAAa,IAAI,CAAEhB,WAAnB,CAAgC,SAAS,CAAEI,iBAA3C,EAAzB,EAHF,GADF,cAME,MAAC,QAAD,yBACE,KAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,mBADF,cAEE,KAAC,SAAD,EAAW,KAAK,CAAC,QAAjB,UAA2BJ,WAA3B,SAA2BA,WAA3B,iBAA2BA,WAAW,CAAEiB,KAAxC,EAFF,cAGE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,EAHF,GANF,cAWE,MAAC,QAAD,yBACE,KAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,wBADF,cAEE,KAAC,SAAD,EAAW,KAAK,CAAC,QAAjB,UAA2BjB,WAA3B,SAA2BA,WAA3B,iBAA2BA,WAAW,CAAEkB,SAAxC,EAFF,cAGE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,EAHF,GAXF,cAgBE,MAAC,QAAD,yBACE,KAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,sBADF,cAEE,KAAC,SAAD,EAAW,KAAK,CAAC,QAAjB,wBAFF,cAGE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBAAyB,KAAC,cAAD,EAAgB,SAAS,CAAEd,iBAA3B,EAAzB,EAHF,GAhBF,GADF,EAFF,GAFJ,CA+BGF,SAAS,eAAI,YAAK,SAAS,CAAEN,OAAO,CAAChB,mBAAxB,uBAA6C,KAAC,gBAAD,EAAkB,SAAS,CAAEgB,OAAO,CAACF,MAArC,EAA7C,EA/BhB,GADF,EAFF,cAsCE,KAAC,IAAD,EAAM,EAAE,KAAR,CAAS,EAAE,KAAX,CAAY,IAAI,KAAhB,EAtCF,GAFF,GADF,CA8CD,CA3ED,CA6EA,GAAMyB,CAAAA,iBAAiB,CAAG,CACxBH,IAAI,CAAE,EADkB,CAExBF,KAAK,CAAE,CAAEM,IAAI,CAAE,IAAR,CAAcC,SAAS,CAAE,EAAzB,CAA6BC,KAAK,CAAE,IAApC,CAFiB,CAA1B,CAKA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAgB,CACzC,GAAQhB,CAAAA,IAAR,CAA4BgB,KAA5B,CAAQhB,IAAR,CAAciB,SAAd,CAA4BD,KAA5B,CAAcC,SAAd,CACA,GAAM7B,CAAAA,OAAO,CAAG7B,QAAQ,EAAxB,CACA,GAAM2D,CAAAA,SAAS,CAAGnF,KAAK,CAACoF,MAAN,CAAkB,IAAlB,CAAlB,CACA,GAAMC,CAAAA,QAAQ,CAAGrF,KAAK,CAACoF,MAAN,CAAkB,IAAlB,CAAjB,CACA,iBAAiBpE,UAAU,EAA3B,CAAQsC,IAAR,cAAQA,IAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGtC,WAAW,EAA5B,CACA,qBAA4BjB,KAAK,CAACwD,QAAN,CAAe,KAAf,CAA5B,qDAAO8B,MAAP,qBAAeC,SAAf,qBACA,qBAA4BvF,KAAK,CAACwD,QAAN,CAAe,KAAf,CAA5B,qDAAOgC,MAAP,qBAAeC,SAAf,qBACA,qBAAkDzF,KAAK,CAACwD,QAAN,kBAAoBoB,iBAApB,EAAlD,sDAAOc,iBAAP,sBAA0BC,oBAA1B,sBAEA3F,KAAK,CAACsE,SAAN,CAAgB,UAAM,CACpB,GAAIgB,MAAJ,CAAY,CACV,GAAQf,CAAAA,KAAR,CAAgCN,IAAhC,CAAQM,KAAR,CAAeqB,GAAf,CAAgC3B,IAAhC,CAAe2B,GAAf,CAAuBC,IAAvB,0BAAgC5B,IAAhC,kBACA,GAAM6B,CAAAA,QAAQ,gCAAQD,IAAR,MAAcE,EAAE,CAAEH,GAAlB,EAAd,CACAE,QAAQ,CAACvB,KAAT,CAAiB,CACfM,IAAI,CAAEN,KADS,CAEfO,SAAS,CAAEP,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEC,GAFH,CAGfO,KAAK,CAAE,KAHQ,CAAjB,CAKAiB,OAAO,CAACC,GAAR,CAAYH,QAAZ,EACAH,oBAAoB,CAACG,QAAD,CAApB,CACD,CAVD,IAWK,CACHH,oBAAoB,CAACf,iBAAD,CAApB,CACD,CACF,CAfD,CAeG,CAACK,KAAD,CAAQK,MAAR,CAfH,EAiBA,GAAMY,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7BT,SAAS,CAAC,CAACD,MAAF,CAAT,CACAD,SAAS,CAAC,IAAD,CAAT,CACD,CAHD,CAKA,GAAMY,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBV,SAAS,CAAC,CAACD,MAAF,CAAT,CACD,CAFD,CAIA,GAAMY,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAA4C,CAChEA,CAAC,CAACC,OAAF,GACA,GAAMC,CAAAA,KAAK,CAAGF,CAAC,CAACG,MAAF,CAASD,KAAvB,CACA,GAAIA,KAAK,EAAIA,KAAK,CAACE,MAAN,EAAgB,CAA7B,CAAgC,CAC9B,GAAMC,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAf,CACA,GAAM9B,CAAAA,IAAI,CAAG0B,KAAK,CAAC,CAAD,CAAlB,CACAG,MAAM,CAACE,SAAP,CAAmB,UAAM,CACvBzB,SAAS,CAAC0B,OAAV,CAAkBC,aAAlB,CAAgC,OAAhC,CAAyC,CACvCjC,IAAI,CAAJA,IADuC,CAEvCC,SAAS,CAAE4B,MAAM,CAACK,MAFqB,CAGvChC,KAAK,CAAE,IAHgC,CAAzC,EAKD,CAND,CAOA2B,MAAM,CAACM,aAAP,CAAqBnC,IAArB,EACD,CAXD,IAWO,CACLM,SAAS,CAAC0B,OAAV,CAAkBC,aAAlB,CAAgC,OAAhC,CAAyC,CACvCjC,IAAI,CAAE,IADiC,CAEvCC,SAAS,CAAE,EAF4B,CAGvCC,KAAK,CAAE,IAHgC,CAAzC,EAKD,CACF,CArBD,CAuBA,GAAMkC,CAAAA,QAAQ,0FAAG,iBAAOC,KAAP,CAAmBC,MAAnB,0IACP1C,IADO,CACSyC,KADT,CACPzC,IADO,CACDF,KADC,CACS2C,KADT,CACD3C,KADC,CAET6C,QAFS,CAEO,EAFP,CAGfA,QAAQ,CAAC3C,IAAT,CAAgBA,IAAhB,CAHe,sBAIQlD,CAAAA,cAAc,CAACgD,KAAD,CAJtB,QAIf6C,QAAQ,CAAC7C,KAJM,eAKf8C,WAAW,CAACD,QAAD,CAAWD,MAAX,CAAX,CALe,sDAAH,kBAARF,CAAAA,QAAQ,gDAAd,CAQA,GAAMI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACpD,IAAD,OAAkD,IAApCqD,CAAAA,aAAoC,OAApCA,aAAoC,CAArBC,SAAqB,OAArBA,SAAqB,CACpEjE,IAAI,CAAC,wBAAD,CAA2BW,IAA3B,CAAJ,CACGH,IADH,CACQ,SAACC,GAAD,CAAc,CAClBR,QAAQ,CAACW,IAAT,CAAcH,GAAG,CAACI,OAAlB,CAA2B,SAA3B,EACAmD,aAAa,CAAC,KAAD,CAAb,CACAC,SAAS,GACTpB,OAAO,GACPjB,SAAS,GACV,CAPH,EAQGd,KARH,CAQS,SAACC,GAAD,CAAc,CACnBd,QAAQ,CAACW,IAAT,CAAcG,GAAG,CAACF,OAAlB,CAA2B,OAA3B,EACD,CAVH,EAWD,CAZD,CAeA,mBACE,wCACE,KAAC,UAAD,EAAY,IAAI,CAAC,OAAjB,CAAyB,OAAO,CAAE+B,gBAAlC,CAAoD,SAAS,CAAE7C,OAAO,CAACX,WAAvE,uBAAoF,KAAC,QAAD,EAAU,QAAQ,CAAC,OAAnB,EAApF,EADF,cAEE,MAAC,MAAD,EAAQ,IAAI,CAAE8C,MAAd,CAAsB,oBAAoB,KAA1C,CAA2C,oBAAoB,KAA/D,CAAgE,SAAS,KAAzE,CAA0E,QAAQ,CAAC,IAAnF,CAAwF,kBAAgB,cAAxG,wBACE,KAAC,WAAD,EAAa,EAAE,CAAC,cAAhB,CAA+B,OAAO,CAAEW,OAAxC,0BADF,cAKE,KAAC,MAAD,EACE,QAAQ,CAAEhB,SADZ,CAEE,kBAAkB,KAFpB,CAGE,aAAa,CAAEO,iBAHjB,CAIE,gBAAgB,CAAEpE,GAAG,CAACkG,MAAJ,GAAaC,KAAb,CAAmB,CACnChD,IAAI,CAAEnD,GAAG,CAACoG,MAAJ,GAAaC,QAAb,CAAsB,kBAAtB,CAD6B,CAEnCpD,KAAK,CAAEjD,GAAG,CAACkG,MAAJ,CAAW,CAAE3C,IAAI,CAAEvD,GAAG,CAACsG,KAAJ,GAAYD,QAAZ,CAAqB,oBAArB,CAAR,CAAX,CAF4B,CAAnB,CAJpB,CAQE,QAAQ,CAAEV,QARZ,UAUG,8CAAGpF,CAAAA,MAAH,OAAGA,MAAH,CAAWgG,MAAX,OAAWA,MAAX,CAAmBC,OAAnB,OAAmBA,OAAnB,CAA4BC,YAA5B,OAA4BA,YAA5B,CAA0CC,UAA1C,OAA0CA,UAA1C,CAAsDlB,aAAtD,OAAsDA,aAAtD,CAAqEmB,UAArE,OAAqEA,UAArE,CAAiFC,YAAjF,OAAiFA,YAAjF,oBACC,wCACE,KAAC,aAAD,EAAe,QAAQ,KAAvB,uBACE,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,wBACE,MAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,wBACE,cACE,IAAI,CAAC,cADP,CAEE,GAAG,CAAE7C,QAFP,CAGE,IAAI,CAAC,MAHP,CAIE,MAAM,CAAC,gBAJT,CAKE,QAAQ,CAAEe,aALZ,CAME,MAAM,CAAE4B,UANV,CAOE,MAAM,KAPR,EADF,cAUE,YAAK,KAAK,CAAE,CAAE1F,OAAO,CAAE,MAAX,CAAmBE,cAAc,CAAE,QAAnC,CAAZ,uBACE,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAM6C,CAAAA,QAAQ,CAACwB,OAAT,CAAiBsB,KAAjB,EAAN,EAAjB,CAAiD,SAAS,CAAE9E,OAAO,CAACH,WAApE,CAAiF,GAAG,CAAErB,MAAF,SAAEA,MAAF,gCAAEA,MAAM,CAAE0C,KAAV,wCAAE,cAAeO,SAArG,CAAgH,GAAG,CAAE,YAArH,CAAmI,OAAO,CAAC,QAA3I,EADF,EAVF,GADF,cAeE,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACE,KAAC,SAAD,EACE,SAAS,KADX,CAEE,KAAK,CAAC,MAFR,CAGE,OAAO,CAAC,UAHV,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAEjD,MAAM,CAAC4C,IALhB,CAME,MAAM,CAAEuD,UANV,CAOE,QAAQ,CAAED,YAPZ,CAQE,KAAK,CAAEK,OAAO,CAACN,OAAO,CAACrD,IAAR,EAAgBoD,MAAM,CAACpD,IAAxB,CARhB,CASE,UAAU,CAAEqD,OAAO,CAACrD,IAAR,EAAgBoD,MAAM,CAACpD,IATrC,EADF,EAfF,GADF,EADF,cAiCE,MAAC,aAAD,yBACE,KAAC,MAAD,EAAQ,OAAO,CAAE0B,OAAjB,CAA0B,OAAO,CAAC,UAAlC,CAA6C,KAAK,CAAC,WAAnD,oBADF,cAIE,KAAC,MAAD,EACE,SAAS,CAAE9C,OAAO,CAACX,WADrB,CAEE,OAAO,CAAE,yBAAMuF,CAAAA,UAAU,EAAhB,EAFX,CAGE,QAAQ,CAAEC,YAHZ,CAIE,OAAO,CAAC,UAJV,UAMGA,YAAY,cACX,KAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,CAA4B,KAAK,CAAE,CAAEvF,KAAK,CAAE,OAAT,CAAnC,EADW,CAGX,MATJ,EAJF,GAjCF,GADD,EAVH,EALF,GAFF,GADF,CA2ED,CA9JM,CAgKP,GAAM0F,CAAAA,aAAa,CAAG,CACpBC,QAAQ,CAAE,EADU,CAEpBC,eAAe,CAAE,EAFG,CAAtB,CAIA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACvD,KAAD,CAAgB,CAC5C,GAAQC,CAAAA,SAAR,CAAsBD,KAAtB,CAAQC,SAAR,CACA,GAAM7B,CAAAA,OAAO,CAAG7B,QAAQ,EAAxB,CACA,GAAM2D,CAAAA,SAAS,CAAGnF,KAAK,CAACoF,MAAN,CAAkB,IAAlB,CAAlB,CACA,sBAA4BpF,KAAK,CAACwD,QAAN,CAAe,KAAf,CAA5B,uDAAOgC,MAAP,sBAAeC,SAAf,sBACA,iBAAiBzE,UAAU,EAA3B,CAAQsC,IAAR,cAAQA,IAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGtC,WAAW,EAA5B,CACA,sBAAkDjB,KAAK,CAACwD,QAAN,kBAAoB6E,aAApB,EAAlD,uDAAO3C,iBAAP,sBAA0BC,oBAA1B,sBAEA,GAAM8C,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChChD,SAAS,CAAC,CAACD,MAAF,CAAT,CACD,CAFD,CAIA,GAAMW,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBV,SAAS,CAAC,CAACD,MAAF,CAAT,CACD,CAFD,CAIA,GAAMyB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAaC,MAAb,CAA6B,CAC5C,GAAQoB,CAAAA,eAAR,CAA4BrB,KAA5B,CAAQqB,eAAR,CACA,GAAInB,CAAAA,QAAQ,CAAG,CACbkB,QAAQ,CAAEC,eADG,CAAf,CAGAG,kBAAkB,CAACtB,QAAD,CAAWD,MAAX,CAAlB,CACD,CAND,CAQA,GAAMuB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACzE,IAAD,OAAkD,IAApCqD,CAAAA,aAAoC,OAApCA,aAAoC,CAArBC,SAAqB,OAArBA,SAAqB,CAC3EjE,IAAI,CAAC,yBAAD,CAA4BW,IAA5B,CAAJ,CACGH,IADH,CACQ,SAACC,GAAD,CAAc,CAClB,GAAGA,GAAG,CAACC,KAAP,CAAa,CACXT,QAAQ,CAACW,IAAT,CAAcH,GAAG,CAACI,OAAlB,CAA2B,SAA3B,EACAmD,aAAa,CAAC,KAAD,CAAb,CACD,CAHD,IAIK,CACH/D,QAAQ,CAACW,IAAT,CAAcH,GAAG,CAACI,OAAlB,CAA2B,SAA3B,EACAmD,aAAa,CAAC,KAAD,CAAb,CACAC,SAAS,GACTpB,OAAO,GACPjB,SAAS,GACV,CACF,CAbH,EAcGd,KAdH,CAcS,SAACC,GAAD,CAAc,CACnBiD,aAAa,CAAC,KAAD,CAAb,CACA/D,QAAQ,CAACW,IAAT,CAAcG,GAAG,CAACF,OAAlB,CAA2B,OAA3B,EACD,CAjBH,EAkBD,CAnBD,CAqBA,mBACE,wCACE,KAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,OAAO,CAAEsE,mBAA9B,CAAmD,SAAS,CAAEpF,OAAO,CAACX,WAAtE,oBADF,cAEE,MAAC,MAAD,EACE,IAAI,CAAE8C,MADR,CAEE,oBAAoB,KAFtB,CAGE,oBAAoB,KAHtB,CAIE,SAAS,KAJX,CAKE,QAAQ,CAAC,IALX,CAME,kBAAgB,cANlB,wBAQE,KAAC,WAAD,EAAa,EAAE,CAAC,cAAhB,CAA+B,OAAO,CAAEW,OAAxC,6BARF,cAWE,KAAC,MAAD,EACE,QAAQ,CAAEhB,SADZ,CAEE,kBAAkB,KAFpB,CAGE,aAAa,CAAEO,iBAHjB,CAIE,gBAAgB,CAAEpE,GAAG,CAACkG,MAAJ,GAAaC,KAAb,CAAmB,CACnCa,QAAQ,CAAEhH,GAAG,CAACoG,MAAJ,GAAaC,QAAb,CAAsB,sBAAtB,EAA8CgB,GAA9C,CAAkD,CAAlD,CAAqD,wCAArD,CADyB,CAEnCJ,eAAe,CAAEjH,GAAG,CAACoG,MAAJ,GAAakB,KAAb,CAAmB,CAACtH,GAAG,CAACuH,GAAJ,CAAQ,UAAR,CAAD,CAAsB,IAAtB,CAAnB,CAAgD,uBAAhD,EAAyElB,QAAzE,CAAkF,8BAAlF,CAFkB,CAAnB,CAJpB,CAQE,QAAQ,CAAEV,QARZ,UAUG,4BAAGpF,CAAAA,MAAH,OAAGA,MAAH,CAAWgG,MAAX,OAAWA,MAAX,CAAmBC,OAAnB,OAAmBA,OAAnB,CAA4BC,YAA5B,OAA4BA,YAA5B,CAA0CC,UAA1C,OAA0CA,UAA1C,CAAsDlB,aAAtD,OAAsDA,aAAtD,CAAqEmB,UAArE,OAAqEA,UAArE,CAAiFC,YAAjF,OAAiFA,YAAjF,oBACC,wCACE,KAAC,aAAD,EAAe,QAAQ,KAAvB,uBACE,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,wBACE,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACE,KAAC,SAAD,EACE,SAAS,KADX,CAEE,KAAK,CAAC,cAFR,CAGE,OAAO,CAAC,UAHV,CAIE,IAAI,CAAC,UAJP,CAKE,IAAI,CAAC,UALP,CAME,KAAK,CAAErG,MAAM,CAACyG,QANhB,CAOE,MAAM,CAAEN,UAPV,CAQE,QAAQ,CAAED,YARZ,CASE,KAAK,CAAEK,OAAO,CAACN,OAAO,CAACQ,QAAR,EAAoBT,MAAM,CAACS,QAA5B,CAThB,CAUE,UAAU,CAAER,OAAO,CAACQ,QAAR,EAAoBT,MAAM,CAACS,QAVzC,EADF,EADF,cAeE,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACE,KAAC,SAAD,EACE,SAAS,KADX,CAEE,KAAK,CAAC,kBAFR,CAGE,OAAO,CAAC,UAHV,CAIE,IAAI,CAAC,iBAJP,CAKE,IAAI,CAAC,UALP,CAME,KAAK,CAAEzG,MAAM,CAAC0G,eANhB,CAOE,MAAM,CAAEP,UAPV,CAQE,QAAQ,CAAED,YARZ,CASE,KAAK,CAAEK,OAAO,CAACN,OAAO,CAACS,eAAR,EAA2BV,MAAM,CAACU,eAAnC,CAThB,CAUE,UAAU,CAAET,OAAO,CAACS,eAAR,EAA2BV,MAAM,CAACU,eAVhD,EADF,EAfF,GADF,EADF,cAkCE,MAAC,aAAD,yBACE,KAAC,MAAD,EAAQ,OAAO,CAAEpC,OAAjB,CAA0B,OAAO,CAAC,UAAlC,CAA6C,KAAK,CAAC,WAAnD,oBADF,cAIE,KAAC,MAAD,EACE,SAAS,CAAE9C,OAAO,CAACX,WADrB,CAEE,OAAO,CAAE,yBAAMuF,CAAAA,UAAU,EAAhB,EAFX,CAGE,QAAQ,CAAEC,YAHZ,CAIE,OAAO,CAAC,UAJV,UAMGA,YAAY,cACX,KAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,CAA4B,KAAK,CAAE,CAAEvF,KAAK,CAAE,OAAT,CAAnC,EADW,CAGX,QATJ,EAJF,GAlCF,GADD,EAVH,EAXF,GAFF,GADF,CAkFD,CAhIM,CAkIP,cAAeS,CAAAA,mBAAf","sourcesContent":["import React from 'react'\r\nimport { Grid, Button, Paper, makeStyles, Avatar, Table, TableBody, TableCell, TableRow, IconButton, Dialog, DialogActions, DialogContent, TextField, List, ListItem, ListItemAvatar, ListItemText, Typography, } from '@material-ui/core'\r\nimport Page from '../../components/Page/Page';\r\nimport useService from '../../hook/useService';\r\nimport useSnackbar from '../../hook/useSnackbar';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport DialogTitle from '../../components/DialogTitlle/DialogTitle';\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { uploadNewImage } from '../../utils/CloudinaryUtils';\r\n\r\nconst useStyle = makeStyles((theme: any) => ({\r\n  root: {\r\n    width: theme.breakpoints.values.lg,\r\n    height: '100%',\r\n    maxWidth: '100%',\r\n    margin: '0 auto',\r\n    padding: theme.spacing(3),\r\n  },\r\n  paperStyle: {\r\n    padding: theme.spacing(8, 8)\r\n  },\r\n  insidePaperDivStyle: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    margin: 'auto',\r\n    alignItems: 'center',\r\n    height: '100%'\r\n  },\r\n  themeButton: {\r\n    color: theme.palette.white,\r\n    // textTransform: 'capitalize',\r\n    backgroundColor: theme.palette.green.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.green.dark,\r\n    },\r\n  },\r\n  avatarStyle: {\r\n    width: '150px',\r\n    height: '150px'\r\n  },\r\n  lColor: {\r\n    color: theme.palette.green.main,\r\n  }\r\n\r\n}));\r\n\r\nconst AdminProfileDetails = () => {\r\n  const classes = useStyle();\r\n  const { Post } = useService();\r\n  const Snackbar = useSnackbar();\r\n  const [profileData, setProfileData] = React.useState<any>('');\r\n  const [isLoading, setIsLoading] = React.useState(true)\r\n\r\n\r\n  const getProfileDetails = () => {\r\n    setIsLoading(true);\r\n    Post('app/getAdminUser', {})\r\n      .then((res: any) => {\r\n        setIsLoading(false);\r\n        if (!res.error) {\r\n          setProfileData(res.data);\r\n        } else {\r\n          Snackbar.show(res.message, 'error');\r\n        }\r\n      })\r\n      .catch((err: any) => {\r\n        setIsLoading(false);\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    getProfileDetails()\r\n  }, [])\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Page title='Admin Profile' />\r\n      <Grid container >\r\n        <Grid  xs md item />\r\n        <Grid item xs={12} md={8}>\r\n          <Paper className={classes.paperStyle}>\r\n            {!isLoading && (\r\n              <div className={classes.insidePaperDivStyle}>\r\n                <Avatar className={classes.avatarStyle} src={profileData?.image?.url} alt={profileData?.name} variant='square' />\r\n                <Table >\r\n                  <TableBody>\r\n                    <TableRow >\r\n                      <TableCell align='left'>Name</TableCell>\r\n                      <TableCell align='center'>{profileData?.name}</TableCell>\r\n                      <TableCell align='right'><EditProfile data={profileData} onRefresh={getProfileDetails} /></TableCell>\r\n                    </TableRow>\r\n                    <TableRow >\r\n                      <TableCell align='left'>Email</TableCell>\r\n                      <TableCell align='center'>{profileData?.email}</TableCell>\r\n                      <TableCell align='right'></TableCell>\r\n                    </TableRow>\r\n                    <TableRow >\r\n                      <TableCell align='left'>Admin Type</TableCell>\r\n                      <TableCell align='center'>{profileData?.user_type}</TableCell>\r\n                      <TableCell align='right'></TableCell>\r\n                    </TableRow>\r\n                    <TableRow >\r\n                      <TableCell align='left'>Password</TableCell>\r\n                      <TableCell align='center'>**********</TableCell>\r\n                      <TableCell align='right'><ChangePassword onRefresh={getProfileDetails} /></TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            )}\r\n\r\n            {isLoading && <div className={classes.insidePaperDivStyle}><CircularProgress className={classes.lColor} /></div>}\r\n\r\n          </Paper>\r\n        </Grid>\r\n        <Grid xs md item />\r\n      </Grid>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nconst initialEditValues = {\r\n  name: '',\r\n  image: { file: null, prevImage: '', isNew: null },\r\n}\r\n\r\nexport const EditProfile = (props: any) => {\r\n  const { data, onRefresh } = props;\r\n  const classes = useStyle();\r\n  const formikRef = React.useRef<any>(null);\r\n  const imageRef = React.useRef<any>(null);\r\n  const { Post } = useService();\r\n  const Snackbar = useSnackbar();\r\n  const [isEdit, setIsEdit] = React.useState(false)\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const [initialFormValues, setInitialFormValues] = React.useState({ ...initialEditValues });\r\n\r\n  React.useEffect(() => {\r\n    if (isEdit) {\r\n      const { image, _id, ...rest } = data;\r\n      const editData = { ...rest, id: _id }\r\n      editData.image = {\r\n        file: image,\r\n        prevImage: image?.url,\r\n        isNew: false,\r\n      }\r\n      console.log(editData)\r\n      setInitialFormValues(editData)\r\n    }\r\n    else {\r\n      setInitialFormValues(initialEditValues)\r\n    }\r\n  }, [props, isEdit])\r\n\r\n  const editProfileModel = () => {\r\n    setIsOpen(!isOpen);\r\n    setIsEdit(true)\r\n  }\r\n\r\n  const onClose = () => {\r\n    setIsOpen(!isOpen);\r\n  }\r\n\r\n  const onImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    e.persist();\r\n    const files = e.target.files;\r\n    if (files && files.length != 0) {\r\n      const reader = new FileReader();\r\n      const file = files[0];\r\n      reader.onloadend = () => {\r\n        formikRef.current.setFieldValue('image', {\r\n          file,\r\n          prevImage: reader.result,\r\n          isNew: true\r\n        });\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      formikRef.current.setFieldValue('image', {\r\n        file: null,\r\n        prevImage: '',\r\n        isNew: null\r\n      });\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (value: any, helper: any) => {\r\n    const { name, image } = value;\r\n    const postData: any = {};\r\n    postData.name = name;\r\n    postData.image = await uploadNewImage(image);\r\n    editProfile(postData, helper)\r\n  }\r\n\r\n  const editProfile = (data: any, { setSubmitting, resetForm }: any) => {\r\n    Post('app/updateAdminDetails', data)\r\n      .then((res: any) => {\r\n        Snackbar.show(res.message, 'success');\r\n        setSubmitting(false);\r\n        resetForm();\r\n        onClose();\r\n        onRefresh();\r\n      })\r\n      .catch((err: any) => {\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <IconButton size='small' onClick={editProfileModel} className={classes.themeButton}><EditIcon fontSize='small' /></IconButton>\r\n      <Dialog open={isOpen} disableBackdropClick disableEscapeKeyDown fullWidth maxWidth='sm' aria-labelledby='dialog-title'>\r\n        <DialogTitle id='dialog-title' onClose={onClose}>\r\n          Edit Profile\r\n        </DialogTitle>\r\n\r\n        <Formik\r\n          innerRef={formikRef}\r\n          enableReinitialize\r\n          initialValues={initialFormValues}\r\n          validationSchema={Yup.object().shape({\r\n            name: Yup.string().required('Name is required'),\r\n            image: Yup.object({ file: Yup.mixed().required('A file is required') })\r\n          })}\r\n          onSubmit={onSubmit}\r\n        >\r\n          {({ values, errors, touched, handleChange, handleBlur, setFieldValue, submitForm, isSubmitting }) => (\r\n            <>\r\n              <DialogContent dividers>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <input\r\n                      name='recipe_image'\r\n                      ref={imageRef}\r\n                      type='file'\r\n                      accept='.jpg,.png,jpeg'\r\n                      onChange={onImageChange}\r\n                      onBlur={handleBlur}\r\n                      hidden\r\n                    />\r\n                    <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                      <Avatar onClick={() => imageRef.current.click()} className={classes.avatarStyle} src={values?.image?.prevImage} alt={'profilePic'} variant='square' />\r\n                    </div>\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Name'\r\n                      variant='outlined'\r\n                      name='name'\r\n                      value={values.name}\r\n                      onBlur={handleBlur}\r\n                      onChange={handleChange}\r\n                      error={Boolean(touched.name && errors.name)}\r\n                      helperText={touched.name && errors.name}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </DialogContent>\r\n\r\n              <DialogActions>\r\n                <Button onClick={onClose} variant='outlined' color='secondary'>\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  className={classes.themeButton}\r\n                  onClick={() => submitForm()}\r\n                  disabled={isSubmitting}\r\n                  variant='outlined'\r\n                >\r\n                  {isSubmitting ? (\r\n                    <CircularProgress size={24} style={{ color: 'white' }} />\r\n                  ) : (\r\n                    'Save'\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </>\r\n  )\r\n}\r\n\r\nconst initialValues = {\r\n  password: '',\r\n  confirmPassword: '',\r\n}\r\nexport const ChangePassword = (props: any) => {\r\n  const { onRefresh } = props;\r\n  const classes = useStyle();\r\n  const formikRef = React.useRef<any>(null);\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const { Post } = useService();\r\n  const Snackbar = useSnackbar();\r\n  const [initialFormValues, setInitialFormValues] = React.useState({ ...initialValues })\r\n\r\n  const changePasswordModel = () => {\r\n    setIsOpen(!isOpen)\r\n  }\r\n\r\n  const onClose = () => {\r\n    setIsOpen(!isOpen);\r\n  }\r\n\r\n  const onSubmit = (value: any, helper: any) => {\r\n    const { confirmPassword } = value\r\n    let postData = {\r\n      password: confirmPassword\r\n    }\r\n    changePasswordData(postData, helper)\r\n  }\r\n\r\n  const changePasswordData = (data: any, { setSubmitting, resetForm }: any) => {\r\n    Post('app/updateAdminPassword', data)\r\n      .then((res: any) => {\r\n        if(res.error){\r\n          Snackbar.show(res.message, 'success');\r\n          setSubmitting(false);\r\n        }\r\n        else {\r\n          Snackbar.show(res.message, 'success');\r\n          setSubmitting(false);\r\n          resetForm();\r\n          onClose();\r\n          onRefresh()\r\n        }\r\n      })\r\n      .catch((err: any) => {\r\n        setSubmitting(false);\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button size='small' onClick={changePasswordModel} className={classes.themeButton}>Change</Button>\r\n      <Dialog\r\n        open={isOpen}\r\n        disableBackdropClick\r\n        disableEscapeKeyDown\r\n        fullWidth\r\n        maxWidth='sm'\r\n        aria-labelledby='dialog-title'\r\n      >\r\n        <DialogTitle id='dialog-title' onClose={onClose}>\r\n          Change Password\r\n        </DialogTitle>\r\n        <Formik\r\n          innerRef={formikRef}\r\n          enableReinitialize\r\n          initialValues={initialFormValues}\r\n          validationSchema={Yup.object().shape({\r\n            password: Yup.string().required('Password is required').min(6, 'Password must be at least 6 characters'),\r\n            confirmPassword: Yup.string().oneOf([Yup.ref('password'), null], 'Password must be same').required('Confirm password is required')\r\n          })}\r\n          onSubmit={onSubmit}\r\n        >\r\n          {({ values, errors, touched, handleChange, handleBlur, setFieldValue, submitForm, isSubmitting }) => (\r\n            <>\r\n              <DialogContent dividers>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='New Password'\r\n                      variant='outlined'\r\n                      name='password'\r\n                      type='password'\r\n                      value={values.password}\r\n                      onBlur={handleBlur}\r\n                      onChange={handleChange}\r\n                      error={Boolean(touched.password && errors.password)}\r\n                      helperText={touched.password && errors.password}\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Confirm Password'\r\n                      variant='outlined'\r\n                      name='confirmPassword'\r\n                      type='password'\r\n                      value={values.confirmPassword}\r\n                      onBlur={handleBlur}\r\n                      onChange={handleChange}\r\n                      error={Boolean(touched.confirmPassword && errors.confirmPassword)}\r\n                      helperText={touched.confirmPassword && errors.confirmPassword}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </DialogContent>\r\n\r\n              <DialogActions>\r\n                <Button onClick={onClose} variant='outlined' color='secondary'>\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  className={classes.themeButton}\r\n                  onClick={() => submitForm()}\r\n                  disabled={isSubmitting}\r\n                  variant='outlined'\r\n                >\r\n                  {isSubmitting ? (\r\n                    <CircularProgress size={24} style={{ color: 'white' }} />\r\n                  ) : (\r\n                    'Submit'\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AdminProfileDetails;\r\n"]},"metadata":{},"sourceType":"module"}