{"ast":null,"code":"import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useLayoutEffect,useRef,useState}from'react';import{Button,Card,CircularProgress,Grid,Table,TableBody,TableCell,TableRow,TextField}from'@material-ui/core';import{Autocomplete}from'@material-ui/lab';import{makeStyles}from'@material-ui/styles';import{Formik}from'formik';import clsx from'clsx';import*as Yup from'yup';import getDropValues,{DietTypeDrop,FitnessGoalDrop,FitnessGoalWomenDrop,LifeStyleDrop,NoOption}from'../../utils/PlanDropdowns';import useSnackbar from'../../hook/useSnackbar';import useService from'../../hook/useService';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{editCardRoot:{padding:theme.spacing(2)},marginLeft1:{marginLeft:theme.spacing(1)},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},actionGrid:{display:'flex',alignItems:\"center\",justifyContent:\"flex-end\"},editButtonDiv:{display:'flex',alignItems:\"center\",justifyContent:\"flex-end\",paddingBottom:theme.spacing(2)}};});var AppNutrition=function AppNutrition(props){var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEdit=_useState2[0],setIsEdit=_useState2[1];var data=props.data,onRefresh=props.onRefresh;var _useState3=useState(data),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];useEffect(function(){setFormData(props.data);},[props.data]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!isEdit&&/*#__PURE__*/_jsx(\"div\",{className:classes.editButtonDiv,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setIsEdit(true);},className:classes.themeButton,variant:\"outlined\",children:\"Edit\"})}),!isEdit&&/*#__PURE__*/_jsx(ViewCard,{data:formData}),isEdit&&/*#__PURE__*/_jsx(EditCard,{data:formData,onClose:function onClose(){return setIsEdit(false);},onSuccess:function onSuccess(){return onRefresh();}})]});};var EditCard=function EditCard(props){var classes=useStyles();var onClose=props.onClose,onSuccess=props.onSuccess;var formikRef=useRef(null);var Snackbar=useSnackbar();var _useService=useService(),Post=_useService.Post;var formInitialValue={id:\"\",fitnessGoal:\"\",lifestyle:\"\",diet_type:\"\",weight:0,weightUnit:\"kgs\",height:0,heightUnit:\"cm\"};console.log(props.data);var _useState5=useState(formInitialValue),_useState6=_slicedToArray(_useState5,2),initialValue=_useState6[0],setInitialValue=_useState6[1];var onSubmit=function onSubmit(value,_ref){var setSubmitting=_ref.setSubmitting,resetForm=_ref.resetForm;setSubmitting(true);Post('app/updateMealPlan',value).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onClose();onSuccess();}).catch(function(err){setSubmitting(false);if(err.message==='Request failed with status code 500'){Snackbar.show('No combination found','error');}else{Snackbar.show(err.message,'error');}});};useLayoutEffect(function(){var _props$data=props.data,_id=_props$data._id,fitnessGoal=_props$data.fitnessGoal,lifestyle=_props$data.lifestyle,diet_type=_props$data.diet_type,weight=_props$data.weight,height=_props$data.height;setInitialValue(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{id:_id,fitnessGoal:fitnessGoal,lifestyle:lifestyle,diet_type:diet_type,weight:weight,height:height});});},[props.data]);return/*#__PURE__*/_jsx(Card,{className:classes.editCardRoot,children:/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialValue,validationSchema:Yup.object().shape({fitnessGoal:Yup.string().trim().required('Fitness goal is required'),lifestyle:Yup.string().trim().required('Life style is required'),diet_type:Yup.string().trim().required('Diet type is required'),weight:Yup.number().required('Weight is required'),weightUnit:Yup.string().trim().required('Weight unit is required'),height:Yup.number().required('Height is required'),heightUnit:Yup.string().trim().required('Height unit is required')}),onSubmit:onSubmit,children:function children(_ref2){var _props$data2;var values=_ref2.values,errors=_ref2.errors,touched=_ref2.touched,handleChange=_ref2.handleChange,handleBlur=_ref2.handleBlur,setFieldValue=_ref2.setFieldValue,submitForm=_ref2.submitForm,isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Autocomplete,{options:((_props$data2=props.data)===null||_props$data2===void 0?void 0:_props$data2.gender)!=='She/Her/Hers'?FitnessGoalDrop:FitnessGoalWomenDrop,value:FitnessGoalDrop.find(function(data){return data.id==values.fitnessGoal;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.fitnessGoal;},onChange:function onChange(event,newValue){setFieldValue('fitnessGoal',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Fitness goals\",variant:\"outlined\",error:Boolean(touched.fitnessGoal&&errors.fitnessGoal),helperText:touched.fitnessGoal&&errors.fitnessGoal,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Autocomplete,{options:LifeStyleDrop,value:LifeStyleDrop.find(function(data){return data.id==values.lifestyle;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.lifestyle;},onChange:function onChange(event,newValue){setFieldValue('lifestyle',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Life style\",variant:\"outlined\",error:Boolean(touched.lifestyle&&errors.lifestyle),helperText:touched.lifestyle&&errors.lifestyle,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Autocomplete,{options:DietTypeDrop,value:DietTypeDrop.find(function(data){return data.id==values.diet_type;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.diet_type;},onChange:function onChange(event,newValue){setFieldValue('diet_type',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Diet Types\",variant:\"outlined\",error:Boolean(touched.diet_type&&errors.diet_type),helperText:touched.diet_type&&errors.diet_type,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Weight\",name:\"weight\",variant:\"outlined\",error:Boolean(touched.weight&&errors.weight),helperText:touched.weight&&errors.weight,value:values===null||values===void 0?void 0:values.weight,onChange:handleChange,onBlur:handleBlur,InputProps:{endAdornment:values===null||values===void 0?void 0:values.weightUnit}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Height\",name:\"height\",variant:\"outlined\",error:Boolean(touched.height&&errors.height),helperText:touched.height&&errors.height,value:values===null||values===void 0?void 0:values.height,onChange:handleChange,onBlur:handleBlur,InputProps:{endAdornment:values===null||values===void 0?void 0:values.heightUnit}})}),/*#__PURE__*/_jsxs(Grid,{className:classes.actionGrid,item:true,xs:12,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return onClose();},variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:clsx(classes.themeButton,classes.marginLeft1),onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):'Update'})]})]})});}})});};var ViewCard=function ViewCard(props){var classes=useStyles();var data=props.data;var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),formData=_useState8[0],setFormData=_useState8[1];useEffect(function(){setFormData(data);},[props]);return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Fitness Goals\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(FitnessGoalDrop,formData===null||formData===void 0?void 0:formData.fitnessGoal)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Life Style\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(LifeStyleDrop,formData===null||formData===void 0?void 0:formData.lifestyle)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Diet Type\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(DietTypeDrop,formData===null||formData===void 0?void 0:formData.diet_type)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Height\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.height)!==null?formData===null||formData===void 0?void 0:formData.height:''+' '+(formData===null||formData===void 0?void 0:formData.heightUnit)!==null?formData===null||formData===void 0?void 0:formData.heightUnit:''})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Weight\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.weight)!==null?formData===null||formData===void 0?void 0:formData.weight:''+' '+(formData===null||formData===void 0?void 0:formData.weightUnit)!==null?formData===null||formData===void 0?void 0:formData.weightUnit:''})]})]})})});};export default AppNutrition;","map":null,"metadata":{},"sourceType":"module"}