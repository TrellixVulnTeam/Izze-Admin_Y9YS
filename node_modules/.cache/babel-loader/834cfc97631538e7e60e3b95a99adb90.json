{"ast":null,"code":"import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Card,CardContent,CircularProgress,Divider,Link,TextField,Typography}from'@material-ui/core';import{makeStyles}from'@material-ui/styles';import React,{useEffect,useState}from'react';import{Link as RouterLink,useNavigate}from'react-router-dom';import Logo from'../../assets/Images/logo.png';import Page from'../../components/Page/Page';import useSnackbar from'../../hook/useSnackbar';import{useStore}from'../../Mobx/Helpers/UseStore';import{AuthStateChange,signInWithCredenrials}from'../../utils/FirebaseUtils';import Loader from'../../components/Loader/Loader';import{DashboardRoute,ForgotPasswordRoute}from'../../Routes/RoutesConstants';import{Formik}from'formik';import*as Yup from'yup';import MobxObserver from'../../Mobx/Helpers/MobxObserver';// const useStyles1 = makeStyles((theme: any) =>{console.log(theme)})\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{height:'100%',padding:theme.spacing(6,2)},rootMain:{display:'flex',alignItems:'center',justifyContent:'center'},card:{width:theme.breakpoints.values.sm,maxWidth:'100%',overflow:'unset',display:'flex',position:'relative','& > *':{flexGrow:1,flexBasis:'50%',width:'50%'}},content:{padding:theme.spacing(3,4,3,4)},logoImgDiv:{display:'flex',justifyContent:'center',padding:theme.spacing(2,0)},logoImg:{width:theme.spacing(20),height:theme.spacing(10)},loginForm:{marginTop:theme.spacing(3)},divider:{margin:theme.spacing(2,0)},btnLoading:{color:'white'},fields:{margin:theme.spacing(-1),display:'flex',flexWrap:'wrap','& > *':{flexGrow:1,margin:theme.spacing(1)}},themeButton:{marginTop:theme.spacing(2),color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark},'&:disabled':{backgroundColor:theme.palette.green.main}}};});var Signin=function Signin(){var classes=useStyles();var navigate=useNavigate();var Snackbar=useSnackbar();var _useStore=useStore(),UserStore=_useStore.UserStore;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),authLoading=_useState2[0],setAuthLoading=_useState2[1];var loginUser=function loginUser(value,_ref){var setSubmitting=_ref.setSubmitting;setSubmitting(true);signInWithCredenrials(value.email,value.password).then(function(response){setSubmitting(false);UserStore.setIdToken(response.user.uid);}).catch(function(error){console.log('Firebase Login Error',error);Snackbar.show(error.message,'error');setSubmitting(false);});};var authStateChanged=function authStateChanged(user){if(user){navigate(DashboardRoute);setAuthLoading(true);}else{setAuthLoading(false);}};useEffect(function(){var unsubscribe=AuthStateChange(authStateChanged);return function(){return unsubscribe();};},[]);return/*#__PURE__*/_jsx(AuthLoader,{loading:authLoading,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Page,{title:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.logoImgDiv,children:/*#__PURE__*/_jsx(\"img\",{className:classes.logoImg,src:Logo})}),/*#__PURE__*/_jsx(\"div\",{className:classes.rootMain,children:/*#__PURE__*/_jsx(Card,{className:classes.card,children:/*#__PURE__*/_jsxs(CardContent,{className:classes.content,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h3\",children:\"Login\"}),/*#__PURE__*/_jsx(Formik,{enableReinitialize:true,initialValues:{email:'',password:''},onSubmit:loginUser,validationSchema:Yup.object().shape({email:Yup.string().trim().required('Email is required'),password:Yup.string().trim().required('Password is required')}),children:function children(_ref2){var values=_ref2.values,errors=_ref2.errors,touched=_ref2.touched,handleChange=_ref2.handleChange,handleBlur=_ref2.handleBlur,setFieldValue=_ref2.setFieldValue,handleSubmit=_ref2.handleSubmit,isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/_jsxs(\"form\",{className:classes.loginForm,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.fields,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email address\",name:\"email\",variant:\"outlined\",error:Boolean(touched.email&&errors.email),helperText:touched.email&&errors.email,value:values.email,onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Password\",name:\"password\",type:\"password\",variant:\"outlined\",error:Boolean(touched.password&&errors.password),helperText:touched.password&&errors.password,value:values.password,onChange:handleChange,onBlur:handleBlur})]}),/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,disabled:isSubmitting,size:\"large\",type:\"submit\",variant:\"contained\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{className:classes.btnLoading,size:25}):'Login'})]});}}),/*#__PURE__*/_jsx(Divider,{className:classes.divider}),/*#__PURE__*/_jsx(Link,{align:\"center\",color:\"textPrimary\",component:RouterLink,to:ForgotPasswordRoute,underline:\"always\",variant:\"subtitle2\",children:\"Forgot Password?\"})]})})})]})});};var AuthLoader=function AuthLoader(_ref3){var loading=_ref3.loading,children=_ref3.children;var _useState3=useState(loading),_useState4=_slicedToArray(_useState3,2),aLoading=_useState4[0],setALoading=_useState4[1];useEffect(function(){setALoading(loading);},[loading]);return/*#__PURE__*/_jsx(_Fragment,{children:aLoading?/*#__PURE__*/_jsx(Loader,{}):children});};export default MobxObserver(Signin);","map":null,"metadata":{},"sourceType":"module"}