{"ast":null,"code":"import _regeneratorRuntime from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectWithoutProperties from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Grid,Button,Paper,makeStyles,Avatar,Table,TableBody,TableCell,TableRow,IconButton,Dialog,DialogActions,DialogContent,TextField}from'@material-ui/core';import Page from'../../components/Page/Page';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import EditIcon from'@material-ui/icons/Edit';import CircularProgress from'@material-ui/core/CircularProgress';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import{Formik}from'formik';import*as Yup from'yup';import{uploadNewImage}from'../../utils/CloudinaryUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyle=makeStyles(function(theme){return{root:{width:theme.breakpoints.values.lg,height:'100%',maxWidth:'100%',margin:'0 auto',padding:theme.spacing(3)},paperStyle:{width:'100%',height:'85vh'},insidePaperDivStyle:{display:'flex',flexDirection:'column',justifyContent:'center',margin:'auto',alignItems:'center',height:'100%'},themeButton:{color:theme.palette.white,textTransform:'capitalize',backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},avatarStyle:{width:'150px',height:'150px'},lColor:{color:theme.palette.green.main}};});var AdminProfileDetails=function AdminProfileDetails(){var _profileData$image;var classes=useStyle();var _useService=useService(),Post=_useService.Post;var Snackbar=useSnackbar();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),profileData=_React$useState2[0],setProfileData=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];var getProfileDetails=function getProfileDetails(){setIsLoading(true);Post('app/getAdminUser',{}).then(function(res){setIsLoading(false);if(!res.error){setProfileData(res.data);}else{Snackbar.show(res.message,'error');}}).catch(function(err){console.log('err',err);setIsLoading(false);Snackbar.show(err.message,'error');});};React.useEffect(function(){getProfileDetails();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Page,{title:\"Admin Profile\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:2}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsxs(Paper,{className:classes.paperStyle,children:[!isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:classes.insidePaperDivStyle,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatarStyle,src:profileData===null||profileData===void 0?void 0:(_profileData$image=profileData.image)===null||_profileData$image===void 0?void 0:_profileData$image.url,alt:profileData===null||profileData===void 0?void 0:profileData.name,variant:\"square\"}),/*#__PURE__*/_jsx(Table,{style:{width:'65%'},children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:profileData===null||profileData===void 0?void 0:profileData.name}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(EditProfile,{data:profileData,getDatafunction:getProfileDetails})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:profileData===null||profileData===void 0?void 0:profileData.email}),/*#__PURE__*/_jsx(TableCell,{align:\"right\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Admin Type\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:profileData===null||profileData===void 0?void 0:profileData.user_type}),/*#__PURE__*/_jsx(TableCell,{align:\"right\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:\"Password\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"**********\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(ChangePassword,{getDatafunction:getProfileDetails})})]})]})})]}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:classes.insidePaperDivStyle,children:/*#__PURE__*/_jsx(CircularProgress,{className:classes.lColor})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:2})]})]});};var initialEditValues={name:'',image:{file:null,prevImage:'',isNew:null}};export var EditProfile=function EditProfile(props){var data=props.data,getDatafunction=props.getDatafunction;var classes=useStyle();var formikRef=React.useRef(null);var imageRef=React.useRef(null);var _useService2=useService(),Post=_useService2.Post;var Snackbar=useSnackbar();var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEdit=_React$useState6[0],setIsEdit=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isOpen=_React$useState8[0],setIsOpen=_React$useState8[1];var _React$useState9=React.useState(_objectSpread({},initialEditValues)),_React$useState10=_slicedToArray(_React$useState9,2),initialFormValues=_React$useState10[0],setInitialFormValues=_React$useState10[1];React.useEffect(function(){if(isEdit){var image=data.image,_id=data._id,rest=_objectWithoutProperties(data,[\"image\",\"_id\"]);var editData=_objectSpread(_objectSpread({},rest),{},{id:_id});editData.image={file:image,prevImage:image===null||image===void 0?void 0:image.url,isNew:false};console.log(editData);setInitialFormValues(editData);}else{setInitialFormValues(initialEditValues);}},[props,isEdit]);var editProfileModel=function editProfileModel(){setIsOpen(!isOpen);setIsEdit(true);};var onClose=function onClose(){setIsOpen(!isOpen);getDatafunction();};var onImageChange=function onImageChange(e){e.persist();var files=e.target.files;if(files&&files.length!=0){var reader=new FileReader();var file=files[0];reader.onloadend=function(){formikRef.current.setFieldValue('image',{file:file,prevImage:reader.result,isNew:true});};reader.readAsDataURL(file);}else{formikRef.current.setFieldValue('image',{file:null,prevImage:'',isNew:null});}};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value,helper){var name,image,postData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=value.name,image=value.image;postData={};postData.name=name;_context.next=5;return uploadNewImage(image);case 5:postData.image=_context.sent;editProfile(postData,helper);case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x,_x2){return _ref.apply(this,arguments);};}();var editProfile=function editProfile(data,_ref2){var setSubmitting=_ref2.setSubmitting,resetForm=_ref2.resetForm;Post('app/updateAdminDetails',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onClose();}).catch(function(err){Snackbar.show(err.message,'error');});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:editProfileModel,className:classes.themeButton,children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsxs(Dialog,{open:isOpen,disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:\"Edit Profile\"}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialFormValues,validationSchema:Yup.object().shape({name:Yup.string().required('Name is required'),image:Yup.object({file:Yup.mixed().required('A file is required')})}),onSubmit:onSubmit,children:function children(_ref3){var _values$image;var values=_ref3.values,errors=_ref3.errors,touched=_ref3.touched,handleChange=_ref3.handleChange,handleBlur=_ref3.handleBlur,setFieldValue=_ref3.setFieldValue,submitForm=_ref3.submitForm,isSubmitting=_ref3.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(\"input\",{name:\"recipe_image\",ref:imageRef,type:\"file\",accept:\".jpg,.png,jpeg\",onChange:onImageChange,onBlur:handleBlur,hidden:true}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(Avatar,{onClick:function onClick(){return imageRef.current.click();},className:classes.avatarStyle,src:values===null||values===void 0?void 0:(_values$image=values.image)===null||_values$image===void 0?void 0:_values$image.prevImage,alt:'profilePic',variant:\"square\"})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Name\",variant:\"outlined\",name:\"name\",value:values.name,onBlur:handleBlur,onChange:handleChange,error:Boolean(touched.name&&errors.name),helperText:touched.name&&errors.name})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):'Save'})]})]});}})]})]});};var initialValues={password:'',confirmPassword:''};export var ChangePassword=function ChangePassword(props){var getDatafunction=props.getDatafunction;var classes=useStyle();var formikRef=React.useRef(null);var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isOpen=_React$useState12[0],setIsOpen=_React$useState12[1];var _useService3=useService(),Post=_useService3.Post;var Snackbar=useSnackbar();var _React$useState13=React.useState(_objectSpread({},initialValues)),_React$useState14=_slicedToArray(_React$useState13,2),initialFormValues=_React$useState14[0],setInitialFormValues=_React$useState14[1];var changePasswordModel=function changePasswordModel(){setIsOpen(!isOpen);};var onClose=function onClose(){setIsOpen(!isOpen);getDatafunction();};var onSubmit=function onSubmit(value,helper){var confirmPassword=value.confirmPassword;var postData={password:confirmPassword};changePasswordData(postData,helper);};var changePasswordData=function changePasswordData(data,_ref4){var setSubmitting=_ref4.setSubmitting,resetForm=_ref4.resetForm;Post('app/updateAdminPassword',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onClose();}).catch(function(err){Snackbar.show(err.message,'error');});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:changePasswordModel,className:classes.themeButton,children:\"Change\"}),/*#__PURE__*/_jsxs(Dialog,{open:isOpen,disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:\"Change Password\"}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialFormValues,validationSchema:Yup.object().shape({password:Yup.string().required('Password is required'),confirmPassword:Yup.string().oneOf([Yup.ref('password'),null],'Password must be same').required('Confirm password is required')}),onSubmit:onSubmit,children:function children(_ref5){var values=_ref5.values,errors=_ref5.errors,touched=_ref5.touched,handleChange=_ref5.handleChange,handleBlur=_ref5.handleBlur,setFieldValue=_ref5.setFieldValue,submitForm=_ref5.submitForm,isSubmitting=_ref5.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Password\",variant:\"outlined\",name:\"password\",type:\"password\",value:values.password,onBlur:handleBlur,onChange:handleChange,error:Boolean(touched.password&&errors.password),helperText:touched.password&&errors.password})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Confirm Password\",variant:\"outlined\",name:\"confirmPassword\",type:\"password\",value:values.confirmPassword,onBlur:handleBlur,onChange:handleChange,error:Boolean(touched.confirmPassword&&errors.confirmPassword),helperText:touched.confirmPassword&&errors.confirmPassword})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):'ChangePassword'})]})]});}})]})]});};export default AdminProfileDetails;","map":{"version":3,"sources":["D:/Pyramidion/WebApp/Izze-Admin/src/pages/AdminProfileDetails/AdminProfileDetails.tsx"],"names":["React","Grid","Button","Paper","makeStyles","Avatar","Table","TableBody","TableCell","TableRow","IconButton","Dialog","DialogActions","DialogContent","TextField","Page","useService","useSnackbar","EditIcon","CircularProgress","DialogTitle","Formik","Yup","uploadNewImage","useStyle","theme","root","width","breakpoints","values","lg","height","maxWidth","margin","padding","spacing","paperStyle","insidePaperDivStyle","display","flexDirection","justifyContent","alignItems","themeButton","color","palette","white","textTransform","backgroundColor","green","main","dark","avatarStyle","lColor","AdminProfileDetails","classes","Post","Snackbar","useState","profileData","setProfileData","isLoading","setIsLoading","getProfileDetails","then","res","error","data","show","message","catch","err","console","log","useEffect","image","url","name","email","user_type","initialEditValues","file","prevImage","isNew","EditProfile","props","getDatafunction","formikRef","useRef","imageRef","isEdit","setIsEdit","isOpen","setIsOpen","initialFormValues","setInitialFormValues","_id","rest","editData","id","editProfileModel","onClose","onImageChange","e","persist","files","target","length","reader","FileReader","onloadend","current","setFieldValue","result","readAsDataURL","onSubmit","value","helper","postData","editProfile","setSubmitting","resetForm","object","shape","string","required","mixed","errors","touched","handleChange","handleBlur","submitForm","isSubmitting","click","Boolean","initialValues","password","confirmPassword","ChangePassword","changePasswordModel","changePasswordData","oneOf","ref"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Grid, Button, Paper, makeStyles, Avatar, Table, TableBody, TableCell, TableRow, IconButton, Dialog, DialogActions, DialogContent, TextField, List, ListItem, ListItemAvatar, ListItemText, Typography,} from '@material-ui/core'\r\nimport Page from '../../components/Page/Page';\r\nimport useService from '../../hook/useService';\r\nimport useSnackbar from '../../hook/useSnackbar';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport DialogTitle from '../../components/DialogTitlle/DialogTitle';\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { uploadNewImage } from '../../utils/CloudinaryUtils';\r\n\r\nconst useStyle = makeStyles((theme: any) => ({\r\n  root: {\r\n    width: theme.breakpoints.values.lg,\r\n    height : '100%',\r\n    maxWidth: '100%',\r\n    margin: '0 auto',\r\n    padding: theme.spacing(3),\r\n  },\r\n  paperStyle : {\r\n      width : '100%',\r\n      height : '85vh',\r\n  },\r\n  insidePaperDivStyle : {\r\n     display : 'flex',\r\n     flexDirection : 'column',\r\n     justifyContent : 'center',\r\n     margin : 'auto',\r\n     alignItems : 'center',\r\n     height : '100%'\r\n  },\r\n  themeButton: {\r\n    color: theme.palette.white,\r\n    textTransform : 'capitalize',\r\n    backgroundColor: theme.palette.green.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.green.dark,\r\n    },\r\n  },\r\n  avatarStyle : {\r\n      width : '150px',\r\n      height : '150px'\r\n  },\r\n  lColor: {\r\n    color: theme.palette.green.main,\r\n  }\r\n\r\n}));\r\n\r\nconst AdminProfileDetails = () => {\r\n  const classes = useStyle();\r\n  const { Post } = useService();\r\n  const Snackbar = useSnackbar();\r\n  const [profileData, setProfileData] = React.useState<any>('');\r\n  const [isLoading, setIsLoading] = React.useState(false)\r\n\r\n\r\n  const getProfileDetails = () =>{\r\n        setIsLoading(true);\r\n        Post('app/getAdminUser', {})\r\n        .then((res: any) => {\r\n            setIsLoading(false);\r\n            if (!res.error) {\r\n            setProfileData(res.data);\r\n            } else {\r\n            Snackbar.show(res.message, 'error');\r\n            }\r\n        })\r\n        .catch((err: any) => {\r\n            console.log('err', err);\r\n            setIsLoading(false);\r\n            Snackbar.show(err.message, 'error');\r\n        });\r\n    }\r\n\r\n    React.useEffect(()=>{\r\n        getProfileDetails()\r\n    },[])\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Page title='Admin Profile' />\r\n        <Grid container spacing={2}>\r\n            <Grid item xs={12} md={2}></Grid>\r\n            <Grid item xs={12} md={8}>\r\n                <Paper className={classes.paperStyle}>\r\n                    {!isLoading && (\r\n                        <div className={classes.insidePaperDivStyle}>\r\n                        <Avatar className={classes.avatarStyle} src={profileData?.image?.url} alt={profileData?.name} variant='square' />\r\n                        <Table style={{width : '65%'}}>\r\n                            <TableBody>\r\n                            <TableRow >\r\n                                <TableCell align = 'left'>Name</TableCell>\r\n                                <TableCell align = 'center'>{profileData?.name}</TableCell>\r\n                                <TableCell align = 'right'><EditProfile data={profileData} getDatafunction={getProfileDetails}/></TableCell>\r\n                            </TableRow>\r\n                            <TableRow >\r\n                                <TableCell align = 'left'>Email</TableCell>\r\n                                <TableCell align = 'center'>{profileData?.email}</TableCell>\r\n                                <TableCell align = 'right'></TableCell>\r\n                            </TableRow>\r\n                            <TableRow >\r\n                                <TableCell align = 'left'>Admin Type</TableCell>\r\n                                <TableCell align = 'center'>{profileData?.user_type}</TableCell>\r\n                                <TableCell align = 'right'></TableCell>\r\n                            </TableRow>\r\n                            <TableRow >\r\n                                <TableCell align = 'left'>Password</TableCell>\r\n                                <TableCell align = 'center'>**********</TableCell>\r\n                                <TableCell align = 'right'><ChangePassword getDatafunction={getProfileDetails}/></TableCell>\r\n                            </TableRow>\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n                    )}\r\n\r\n                    {isLoading && <div className={classes.insidePaperDivStyle}><CircularProgress className={classes.lColor} /></div>}\r\n                    \r\n                </Paper>\r\n            </Grid>\r\n            <Grid item xs={12} md={2}></Grid>\r\n        </Grid>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nconst initialEditValues = {\r\n    name : '',\r\n    image : {file : null, prevImage : '',isNew : null},\r\n}\r\n\r\nexport const EditProfile = (props: any) =>{\r\n    const { data, getDatafunction } = props;\r\n    const classes = useStyle();\r\n    const formikRef = React.useRef<any>(null);\r\n    const imageRef = React.useRef<any>(null);\r\n    const { Post } = useService();\r\n    const Snackbar = useSnackbar();\r\n    const [isEdit, setIsEdit] = React.useState(false)\r\n    const [isOpen, setIsOpen] = React.useState(false);\r\n    const [initialFormValues, setInitialFormValues] = React.useState({...initialEditValues});\r\n\r\n    React.useEffect(()=>{\r\n        if(isEdit){\r\n            const {image, _id, ...rest} = data;\r\n            const editData = {...rest, id: _id}\r\n            editData.image = {\r\n                file: image,\r\n                prevImage: image?.url,\r\n                isNew: false,\r\n            }\r\n            console.log(editData)\r\n            setInitialFormValues(editData)\r\n        }\r\n        else{\r\n            setInitialFormValues(initialEditValues)\r\n        }\r\n    },[props, isEdit])\r\n\r\n    const editProfileModel = () =>{\r\n        setIsOpen(!isOpen);\r\n        setIsEdit(true)\r\n    }\r\n\r\n    const onClose = () =>{\r\n        setIsOpen(!isOpen);\r\n        getDatafunction();\r\n    }\r\n\r\n    const onImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        e.persist();\r\n        const files = e.target.files;\r\n        if (files && files.length != 0) {\r\n          const reader = new FileReader();\r\n          const file = files[0];\r\n          reader.onloadend = () => {\r\n            formikRef.current.setFieldValue('image', {\r\n              file,\r\n              prevImage: reader.result,\r\n              isNew : true\r\n            });\r\n          };\r\n          reader.readAsDataURL(file);\r\n        } else {\r\n          formikRef.current.setFieldValue('image', {\r\n            file: null,\r\n            prevImage: '',\r\n            isNew : null\r\n          });\r\n        }\r\n    };\r\n\r\n    const onSubmit = async (value: any, helper: any) =>{\r\n        const { name , image} = value;\r\n        const postData: any = {};\r\n        postData.name = name;\r\n        postData.image = await uploadNewImage(image);\r\n        editProfile(postData,helper)\r\n    }\r\n\r\n    const editProfile = (data: any, { setSubmitting, resetForm }: any) =>{\r\n        Post('app/updateAdminDetails', data)\r\n        .then((res: any) => {\r\n            Snackbar.show(res.message, 'success');\r\n            setSubmitting(false);\r\n            resetForm();\r\n            onClose();\r\n        })\r\n        .catch((err: any) => {\r\n            Snackbar.show(err.message, 'error');\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <IconButton onClick={editProfileModel} className={classes.themeButton}><EditIcon /></IconButton>\r\n            <Dialog open={isOpen} disableBackdropClick disableEscapeKeyDown fullWidth maxWidth='sm' aria-labelledby='dialog-title'>\r\n                <DialogTitle id='dialog-title' onClose={onClose}>\r\n                    Edit Profile\r\n                </DialogTitle>\r\n\r\n                <Formik\r\n                    innerRef={formikRef}\r\n                    enableReinitialize\r\n                    initialValues={initialFormValues}\r\n                    validationSchema={Yup.object().shape({\r\n                        name : Yup.string().required('Name is required'),\r\n                        image : Yup.object({file: Yup.mixed().required('A file is required')})\r\n                    })}\r\n                    onSubmit={onSubmit}\r\n                >\r\n                {({ values, errors, touched, handleChange, handleBlur, setFieldValue, submitForm, isSubmitting }) => (\r\n                    <>\r\n                        <DialogContent dividers>\r\n                            <Grid container spacing={2}>\r\n                                <Grid item xs={12}>\r\n                                    <input\r\n                                        name='recipe_image'\r\n                                        ref={imageRef}\r\n                                        type='file'\r\n                                        accept='.jpg,.png,jpeg'\r\n                                        onChange={onImageChange}\r\n                                        onBlur={handleBlur}\r\n                                        hidden\r\n                                    />\r\n                                    <div style={{display : 'flex', justifyContent : 'center'}}>\r\n                                        <Avatar onClick={()=>imageRef.current.click()} className={classes.avatarStyle} src={values?.image?.prevImage} alt={'profilePic'} variant='square' />\r\n                                    </div>   \r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <TextField \r\n                                        fullWidth \r\n                                        label = 'Name'\r\n                                        variant='outlined' \r\n                                        name = 'name'\r\n                                        value={values.name}\r\n                                        onBlur={handleBlur}\r\n                                        onChange={handleChange}\r\n                                        error={Boolean(touched.name && errors.name)}\r\n                                        helperText={touched.name && errors.name}\r\n                                    />   \r\n                                </Grid>\r\n                            </Grid>\r\n                        </DialogContent>\r\n\r\n                        <DialogActions>\r\n                            <Button onClick={onClose} variant='outlined' color='secondary'>\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                            className={classes.themeButton}\r\n                            onClick={() => submitForm()}\r\n                            disabled={isSubmitting}\r\n                            variant='outlined'\r\n                            >\r\n                            {isSubmitting ? (\r\n                                <CircularProgress size={24} style={{ color: 'white' }} />\r\n                            ) : (\r\n                                'Save'\r\n                            )}\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </>\r\n                )}\r\n                </Formik>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nconst initialValues = {\r\n    password : '',\r\n    confirmPassword : '',\r\n}\r\nexport const ChangePassword = (props: any) =>{\r\n    const { getDatafunction } = props;\r\n    const classes = useStyle();\r\n    const formikRef = React.useRef<any>(null);\r\n    const [isOpen, setIsOpen] = React.useState(false);\r\n    const { Post } = useService();\r\n    const Snackbar = useSnackbar();\r\n    const [initialFormValues, setInitialFormValues] = React.useState({...initialValues})\r\n\r\n    const changePasswordModel = () =>{\r\n        setIsOpen(!isOpen)\r\n    }\r\n\r\n    const onClose = () =>{\r\n        setIsOpen(!isOpen);\r\n        getDatafunction()\r\n    }\r\n\r\n    const onSubmit = (value: any, helper: any) =>{\r\n        const { confirmPassword } = value\r\n        let postData = {\r\n            password : confirmPassword\r\n        }\r\n        changePasswordData(postData, helper)\r\n    }\r\n\r\n    const changePasswordData = (data: any, { setSubmitting, resetForm }: any) =>{\r\n        Post('app/updateAdminPassword', data)\r\n        .then((res: any) => {\r\n            Snackbar.show(res.message, 'success');\r\n            setSubmitting(false);\r\n            resetForm();\r\n            onClose();\r\n        })\r\n        .catch((err: any) => {\r\n            Snackbar.show(err.message, 'error');\r\n        });\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <Button onClick={changePasswordModel} className={classes.themeButton}>Change</Button>\r\n            <Dialog\r\n                open={isOpen}\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                fullWidth\r\n                maxWidth='sm'\r\n                aria-labelledby='dialog-title'\r\n            >\r\n                <DialogTitle id='dialog-title' onClose={onClose}>\r\n                    Change Password\r\n                </DialogTitle>\r\n                <Formik\r\n                    innerRef={formikRef}\r\n                    enableReinitialize\r\n                    initialValues={initialFormValues}\r\n                    validationSchema={Yup.object().shape({\r\n                        password : Yup.string().required('Password is required'),\r\n                        confirmPassword : Yup.string().oneOf([Yup.ref('password'),null], 'Password must be same').required('Confirm password is required')\r\n                    })}\r\n                    onSubmit={onSubmit}\r\n                >\r\n                {({ values, errors, touched, handleChange, handleBlur, setFieldValue, submitForm, isSubmitting }) => (\r\n                    <>\r\n                    <DialogContent dividers>\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={12}>\r\n                                <TextField \r\n                                    fullWidth \r\n                                    label = 'Password'\r\n                                    variant='outlined' \r\n                                    name = 'password'\r\n                                    type = 'password'\r\n                                    value={values.password}\r\n                                    onBlur={handleBlur}\r\n                                    onChange={handleChange}\r\n                                    error={Boolean(touched.password && errors.password)}\r\n                                    helperText={touched.password && errors.password}\r\n                                />    \r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField \r\n                                    fullWidth \r\n                                    label = 'Confirm Password'\r\n                                    variant='outlined'\r\n                                    name = 'confirmPassword'\r\n                                    type = 'password'\r\n                                    value={values.confirmPassword}\r\n                                    onBlur={handleBlur}\r\n                                    onChange={handleChange}\r\n                                    error={Boolean(touched.confirmPassword && errors.confirmPassword)}\r\n                                    helperText={touched.confirmPassword && errors.confirmPassword}\r\n                                />   \r\n                            </Grid>\r\n                        </Grid>\r\n                    </DialogContent>\r\n\r\n                    <DialogActions>\r\n                        <Button onClick={onClose} variant='outlined' color='secondary'>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                        className={classes.themeButton}\r\n                        onClick={() => submitForm()}\r\n                        disabled={isSubmitting}\r\n                        variant='outlined'\r\n                        >\r\n                        {isSubmitting ? (\r\n                            <CircularProgress size={24} style={{ color: 'white' }} />\r\n                        ) : (\r\n                            'ChangePassword'\r\n                        )}\r\n                        </Button>\r\n                    </DialogActions>\r\n                    </>\r\n                )}\r\n                </Formik>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AdminProfileDetails;\r\n"]},"metadata":{},"sourceType":"module"}