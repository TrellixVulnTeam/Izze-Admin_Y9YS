{"ast":null,"code":"import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import Button from'@material-ui/core/Button';import Divider from'@material-ui/core/Divider';import Grid from'@material-ui/core/Grid';import{makeStyles,useTheme}from'@material-ui/core/styles';import TextField from'@material-ui/core/TextField';import Typography from'@material-ui/core/Typography';import useMediaQuery from'@material-ui/core/useMediaQuery';import{Formik}from'formik';import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import*as Yup from'yup';import Loader from'../../components/Loader/Loader';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import{useStore}from'../../Mobx/Helpers/UseStore';import{DashboardRoute}from'../../Routes/RoutesConstants';import{AuthStateChange,signInWithCredenrials}from'../../utils/FirebaseUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{loginStyle:_defineProperty({width:'80%',backgroundColor:'white',margin:'auto',padding:theme.spacing(2),marginTop:theme.spacing(22),borderRadius:'10px',boxShadow:' 0px 20px 40px #0000001F'},theme.breakpoints.down('md'),{width:'90%'}),SigninTextStyle:{textAlign:'start',paddingLeft:theme.spacing(3),paddingBottom:theme.spacing(2),paddingTop:theme.spacing(1),fontWeight:500,color:'#41A58D'},textboxStyle:{paddingTop:theme.spacing(1)},textboxStyle1:{paddingTop:theme.spacing(5)},textfieldStyle:{width:'90%'},forgotpasswordStyle:{paddingTop:theme.spacing(3),paddingRight:theme.spacing(3),textAlign:'end',textDecoration:'underline',cursor:'pointer'},buttonStyle:{display:'flex',flex:1,justifyContent:'space-between',padding:theme.spacing(3.5)},signUpbutton:{width:'40%',backgroundColor:'white',border:'2px solid #41A58D',color:'#41A58D',textTransform:'capitalize','&:hover':{backgroundColor:'#41A58D',color:'white'}},signinButton:{width:'40%',backgroundColor:'#41A58D',color:'white',textTransform:'capitalize','&:hover':{backgroundColor:'white',color:'#41A58D',border:'2px solid #41A58D'}},textfields:{paddingLeft:theme.spacing(3)},divider:{width:'85%',marginLeft:theme.spacing(3)},errors:{textAlign:'initial',fontWeight:400,fontSize:12,color:'red',marginTop:theme.spacing(1)}};});var validationSchema=Yup.object().shape({userEmail:Yup.string().email('Enter the valid Email.').required('Required *.'),userPassword:Yup.string().min(8,'Password must be atleast 8 character.').required('Required *.')});function SignIn(props){var classes=useStyles();var navigate=useNavigate();var theme=useTheme();var Snackbar=useSnackbar();var _useService=useService(),Post=_useService.Post;var _useStore=useStore(),UserStore=_useStore.UserStore;var isMobile=useMediaQuery(theme.breakpoints.down('md'));var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isLoading=_React$useState2[0],setIsLoading=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),authLoading=_React$useState4[0],setAuthLoading=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),loginCredentials=_React$useState6[0],setLoginCredentials=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),invalidUserEmail=_React$useState8[0],setInvalidUserEmail=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),invalidUserPassword=_React$useState10[0],setInvalidUserPassword=_React$useState10[1];var loginUser=function loginUser(value){setLoginCredentials(value);setIsLoading(true);signInWithCredenrials(value.userEmail,value.userPassword).then(function(response){setIsLoading(false);localStorage.setItem('uid',response.user.uid);UserStore.setIdToken(response.user.uid);}).catch(function(error){console.log('Firebase Login Error',error);Snackbar.show(error.message,'error');setIsLoading(false);});};var authStateChanged=function authStateChanged(user){if(user){navigate(DashboardRoute);setAuthLoading(true);}else{setAuthLoading(false);}};useEffect(function(){var unsubscribe=AuthStateChange(authStateChanged);return function(){return unsubscribe();};},[]);// const handleKeyPress = (e: any) => {\n//   if (e.key === 'Enter') {\n//     loginUser(loginCredentials.userEmail, loginCredentials.userPassword);\n//   }\n// };\nreturn/*#__PURE__*/_jsx(AuthLoader,{loading:authLoading,children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,lg:3}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,lg:6,children:/*#__PURE__*/_jsx(\"div\",{className:classes.loginStyle,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",className:classes.SigninTextStyle,children:\"SignIn\"}),/*#__PURE__*/_jsx(Divider,{className:classes.divider}),/*#__PURE__*/_jsx(\"div\",{className:classes.textfields,children:/*#__PURE__*/_jsx(Formik,{validationSchema:validationSchema,initialValues:{userEmail:'',userPassword:''},onSubmit:loginUser,children:function children(props){var values=props.values,errors=props.errors,handleChange=props.handleChange,handleSubmit=props.handleSubmit;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.textboxStyle,children:[/*#__PURE__*/_jsx(TextField,{type:\"text\",className:classes.textfieldStyle,value:values.userEmail,onChange:handleChange('userEmail'),label:\"Enter Email\"// onKeyPress={handleKeyPress}\n}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Typography,{className:classes.errors,children:invalidUserEmail?'Invalid email, Please enter the valid email.':errors.userEmail})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.textboxStyle1,children:[/*#__PURE__*/_jsx(TextField,{type:\"password\",value:values.userPassword,onChange:handleChange('userPassword'),className:classes.textfieldStyle,label:\"Enter Password\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Typography,{className:classes.errors,children:invalidUserPassword?'Invalid password, Please enter the valid password.':errors.userPassword})})]}),/*#__PURE__*/_jsx(Typography,{className:classes.forgotpasswordStyle,children:\"Forgot Password ?\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.buttonStyle,children:[/*#__PURE__*/_jsx(Button,{className:classes.signUpbutton,children:\"SignUp\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",style:isMobile&&isLoading?{width:'50%'}:{},className:classes.signinButton,children:[isLoading?'Signing In':'Sign In',isLoading?/*#__PURE__*/_jsx(\"i\",{style:{fontSize:15,marginLeft:20},className:\"fas fa-spinner fa-pulse\"}):'']})]})]});}})})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,lg:3})]})});}var AuthLoader=function AuthLoader(_ref){var loading=_ref.loading,children=_ref.children;var _useState=useState(loading),_useState2=_slicedToArray(_useState,2),aLoading=_useState2[0],setALoading=_useState2[1];useEffect(function(){setALoading(loading);},[loading]);return/*#__PURE__*/_jsx(_Fragment,{children:aLoading?/*#__PURE__*/_jsx(Loader,{}):children});};export default SignIn;","map":{"version":3,"sources":["D:/Pyramidion/WebApp/Izze-Admin/src/pages/SignIn/SignIn.tsx"],"names":["Button","Divider","Grid","makeStyles","useTheme","TextField","Typography","useMediaQuery","Formik","React","useEffect","useState","useNavigate","Yup","Loader","useService","useSnackbar","useStore","DashboardRoute","AuthStateChange","signInWithCredenrials","useStyles","theme","loginStyle","width","backgroundColor","margin","padding","spacing","marginTop","borderRadius","boxShadow","breakpoints","down","SigninTextStyle","textAlign","paddingLeft","paddingBottom","paddingTop","fontWeight","color","textboxStyle","textboxStyle1","textfieldStyle","forgotpasswordStyle","paddingRight","textDecoration","cursor","buttonStyle","display","flex","justifyContent","signUpbutton","border","textTransform","signinButton","textfields","divider","marginLeft","errors","fontSize","validationSchema","object","shape","userEmail","string","email","required","userPassword","min","SignIn","props","classes","navigate","Snackbar","Post","UserStore","isMobile","isLoading","setIsLoading","authLoading","setAuthLoading","loginCredentials","setLoginCredentials","invalidUserEmail","setInvalidUserEmail","invalidUserPassword","setInvalidUserPassword","loginUser","value","then","response","localStorage","setItem","user","uid","setIdToken","catch","error","console","log","show","message","authStateChanged","unsubscribe","values","handleChange","handleSubmit","AuthLoader","loading","children","aLoading","setALoading"],"mappings":"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","sourcesContent":["import Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport { Formik } from 'formik';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as Yup from 'yup';\r\nimport Loader from '../../components/Loader/Loader';\r\nimport useService from '../../hook/useService';\r\nimport useSnackbar from '../../hook/useSnackbar';\r\nimport { useStore } from '../../Mobx/Helpers/UseStore';\r\nimport { DashboardRoute } from '../../Routes/RoutesConstants';\r\nimport { AuthStateChange, signInWithCredenrials } from '../../utils/FirebaseUtils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  loginStyle: {\r\n    width: '80%',\r\n    backgroundColor: 'white',\r\n    margin: 'auto',\r\n    padding: theme.spacing(2),\r\n    marginTop: theme.spacing(22),\r\n    borderRadius: '10px',\r\n    boxShadow: ' 0px 20px 40px #0000001F',\r\n    [theme.breakpoints.down('md')]: {\r\n      width: '90%',\r\n    },\r\n  },\r\n  SigninTextStyle: {\r\n    textAlign: 'start',\r\n    paddingLeft: theme.spacing(3),\r\n    paddingBottom: theme.spacing(2),\r\n    paddingTop: theme.spacing(1),\r\n    fontWeight: 500,\r\n    color: '#41A58D',\r\n  },\r\n  textboxStyle: {\r\n    paddingTop: theme.spacing(1),\r\n  },\r\n  textboxStyle1: {\r\n    paddingTop: theme.spacing(5),\r\n  },\r\n  textfieldStyle: {\r\n    width: '90%',\r\n  },\r\n  forgotpasswordStyle: {\r\n    paddingTop: theme.spacing(3),\r\n    paddingRight: theme.spacing(3),\r\n    textAlign: 'end',\r\n    textDecoration: 'underline',\r\n    cursor: 'pointer',\r\n  },\r\n  buttonStyle: {\r\n    display: 'flex',\r\n    flex: 1,\r\n    justifyContent: 'space-between',\r\n    padding: theme.spacing(3.5),\r\n  },\r\n  signUpbutton: {\r\n    width: '40%',\r\n    backgroundColor: 'white',\r\n    border: '2px solid #41A58D',\r\n    color: '#41A58D',\r\n    textTransform: 'capitalize',\r\n    '&:hover': {\r\n      backgroundColor: '#41A58D',\r\n      color: 'white',\r\n    },\r\n  },\r\n  signinButton: {\r\n    width: '40%',\r\n    backgroundColor: '#41A58D',\r\n    color: 'white',\r\n    textTransform: 'capitalize',\r\n    '&:hover': {\r\n      backgroundColor: 'white',\r\n      color: '#41A58D',\r\n      border: '2px solid #41A58D',\r\n    },\r\n  },\r\n  textfields: {\r\n    paddingLeft: theme.spacing(3),\r\n  },\r\n  divider: {\r\n    width: '85%',\r\n    marginLeft: theme.spacing(3),\r\n  },\r\n  errors: {\r\n    textAlign: 'initial',\r\n    fontWeight: 400,\r\n    fontSize: 12,\r\n    color: 'red',\r\n    marginTop: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  userEmail: Yup.string()\r\n    .email('Enter the valid Email.')\r\n    .required('Required *.'),\r\n  userPassword: Yup.string()\r\n    .min(8, 'Password must be atleast 8 character.')\r\n    .required('Required *.'),\r\n});\r\n\r\nfunction SignIn(props: any) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const Snackbar = useSnackbar();\r\n  const { Post } = useService();\r\n  const { UserStore } = useStore();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const [authLoading, setAuthLoading] = React.useState(true);\r\n  const [loginCredentials, setLoginCredentials] = React.useState<any>('');\r\n  const [invalidUserEmail, setInvalidUserEmail] = React.useState(false);\r\n  const [invalidUserPassword, setInvalidUserPassword] = React.useState(false);\r\n\r\n  const loginUser = (value: any) => {\r\n    setLoginCredentials(value);\r\n    setIsLoading(true);\r\n    signInWithCredenrials(value.userEmail, value.userPassword)\r\n      .then((response: any) => {\r\n        setIsLoading(false);\r\n        localStorage.setItem('uid', response.user.uid);\r\n        UserStore.setIdToken(response.user.uid);\r\n      })\r\n      .catch((error: any) => {\r\n        console.log('Firebase Login Error', error);\r\n        Snackbar.show(error.message, 'error');\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const authStateChanged = (user: any) => {\r\n    if (user) {\r\n      navigate(DashboardRoute);\r\n      setAuthLoading(true);\r\n    } else {\r\n      setAuthLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = AuthStateChange(authStateChanged);\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // const handleKeyPress = (e: any) => {\r\n  //   if (e.key === 'Enter') {\r\n  //     loginUser(loginCredentials.userEmail, loginCredentials.userPassword);\r\n  //   }\r\n  // };\r\n  return (\r\n    <AuthLoader loading={authLoading}>\r\n      <Grid container>\r\n        <Grid item xs={12} md={12} lg={3}></Grid>\r\n        <Grid item xs={12} md={12} lg={6}>\r\n          <div className={classes.loginStyle}>\r\n            <div>\r\n              <Typography variant='h5' className={classes.SigninTextStyle}>\r\n                SignIn\r\n              </Typography>\r\n              <Divider className={classes.divider} />\r\n              <div className={classes.textfields}>\r\n                <Formik\r\n                  validationSchema={validationSchema}\r\n                  initialValues={{ userEmail: '', userPassword: '' }}\r\n                  onSubmit={loginUser}\r\n                >\r\n                  {(props) => {\r\n                    const { values, errors, handleChange, handleSubmit } =\r\n                      props;\r\n                    return (\r\n                      <form onSubmit={handleSubmit}>\r\n                        <div className={classes.textboxStyle}>\r\n                          <TextField\r\n                            type='text'\r\n                            className={classes.textfieldStyle}\r\n                            value={values.userEmail}\r\n                            onChange={handleChange('userEmail')}\r\n                            label='Enter Email'\r\n                          // onKeyPress={handleKeyPress}\r\n                          />\r\n                          <div>\r\n                            <Typography className={classes.errors}>\r\n                              {invalidUserEmail\r\n                                ? 'Invalid email, Please enter the valid email.'\r\n                                : errors.userEmail}\r\n                            </Typography>\r\n                          </div>\r\n                        </div>\r\n                        <div className={classes.textboxStyle1}>\r\n                          <TextField\r\n                            type='password'\r\n                            value={values.userPassword}\r\n                            onChange={handleChange('userPassword')}\r\n                            className={classes.textfieldStyle}\r\n                            label='Enter Password'\r\n                          />\r\n                          <div>\r\n                            <Typography className={classes.errors}>\r\n                              {invalidUserPassword\r\n                                ? 'Invalid password, Please enter the valid password.'\r\n                                : errors.userPassword}\r\n                            </Typography>\r\n                          </div>\r\n                        </div>\r\n                        <Typography className={classes.forgotpasswordStyle}>\r\n                          Forgot Password ?\r\n                        </Typography>\r\n                        <div className={classes.buttonStyle}>\r\n                          <Button className={classes.signUpbutton}>\r\n                            SignUp\r\n                          </Button>\r\n                          <Button\r\n                            type='submit'\r\n                            style={\r\n                              isMobile && isLoading ? { width: '50%' } : {}\r\n                            }\r\n                            className={classes.signinButton}\r\n                          >\r\n                            {isLoading ? 'Signing In' : 'Sign In'}\r\n                            {isLoading ? (\r\n                              <i\r\n                                style={{ fontSize: 15, marginLeft: 20 }}\r\n                                className='fas fa-spinner fa-pulse'\r\n                              ></i>\r\n                            ) : (\r\n                              ''\r\n                            )}\r\n                          </Button>\r\n                        </div>\r\n                      </form>\r\n                    );\r\n                  }}\r\n                </Formik>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs={12} md={12} lg={3}></Grid>\r\n      </Grid>\r\n    </AuthLoader>\r\n  );\r\n}\r\n\r\nconst AuthLoader = ({ loading, children }: any) => {\r\n  const [aLoading, setALoading] = useState(loading);\r\n\r\n  useEffect(() => {\r\n    setALoading(loading);\r\n  }, [loading]);\r\n\r\n  return <>{aLoading ? <Loader /> : children}</>;\r\n};\r\n\r\nexport default SignIn;\r\n"]},"metadata":{},"sourceType":"module"}