{"ast":null,"code":"import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useLayoutEffect,useRef,useState}from'react';import{Button,Card,CircularProgress,Grid,Table,TableBody,TableCell,TableRow,TextField}from'@material-ui/core';import{Autocomplete}from'@material-ui/lab';import{makeStyles}from'@material-ui/styles';import{Formik}from'formik';import clsx from'clsx';import*as Yup from'yup';import getDropValues,{CurrentClimateDrop,getSubSkinIrregular,NoOption,SkinIrregularDrop,SkinTextureDrop,SkinTypeDrop}from'../../utils/PlanDropdowns';import useSnackbar from'../../hook/useSnackbar';import useService from'../../hook/useService';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{editCardRoot:{padding:theme.spacing(2)},marginLeft1:{marginLeft:theme.spacing(1)},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},actionGrid:{display:'flex',alignItems:\"center\",justifyContent:\"flex-end\"},editButtonDiv:{display:'flex',alignItems:\"center\",justifyContent:\"flex-end\",paddingBottom:theme.spacing(2)}};});var AppNutrition=function AppNutrition(props){var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEdit=_useState2[0],setIsEdit=_useState2[1];var data=props.data,onRefresh=props.onRefresh;var _useState3=useState(data),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];useEffect(function(){setFormData(props.data);},[props.data]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!isEdit&&/*#__PURE__*/_jsx(\"div\",{className:classes.editButtonDiv,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setIsEdit(true);},className:classes.themeButton,variant:\"outlined\",children:\"Edit\"})}),!isEdit&&/*#__PURE__*/_jsx(ViewCard,{data:formData}),isEdit&&/*#__PURE__*/_jsx(EditCard,{data:formData,onClose:function onClose(){return setIsEdit(false);},onSuccess:function onSuccess(){return onRefresh();}})]});};var EditCard=function EditCard(props){var classes=useStyles();var onClose=props.onClose,onSuccess=props.onSuccess;var formikRef=useRef(null);var Snackbar=useSnackbar();var _useService=useService(),Post=_useService.Post;var formInitialValue={id:\"\",skin_type:\"\",current_climate:\"\",skin_irregular:\"\",skin_irregular_sub:\"\",skin_texture:\"\"};var _useState5=useState(formInitialValue),_useState6=_slicedToArray(_useState5,2),initialValue=_useState6[0],setInitialValue=_useState6[1];var onSubmit=function onSubmit(value,_ref){var setSubmitting=_ref.setSubmitting,resetForm=_ref.resetForm;setSubmitting(true);Post('app/updateSkincarePlan',value).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onClose();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};useLayoutEffect(function(){var _props$data=props.data,_id=_props$data._id,skin_type=_props$data.skin_type,current_climate=_props$data.current_climate,skin_irregular=_props$data.skin_irregular,skin_irregular_sub=_props$data.skin_irregular_sub,skin_texture=_props$data.skin_texture;setInitialValue(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{id:_id,skin_type:skin_type,current_climate:current_climate,skin_irregular:skin_irregular,skin_irregular_sub:skin_irregular_sub,skin_texture:skin_texture});});},[props.data]);return/*#__PURE__*/_jsx(Card,{className:classes.editCardRoot,children:/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialValue,validationSchema:Yup.object().shape({skin_type:Yup.string().trim().required('Skin Type is required'),current_climate:Yup.string().trim().required('Current Climate is required'),skin_irregular:Yup.string().trim().required('Skin Irregularites is required'),skin_irregular_sub:Yup.string().trim().required('Sub Skin Irregularites is required'),skin_texture:Yup.string().trim().required('Skin Texture is required')}),onSubmit:onSubmit,children:function children(_ref2){var values=_ref2.values,errors=_ref2.errors,touched=_ref2.touched,handleChange=_ref2.handleChange,handleBlur=_ref2.handleBlur,setFieldValue=_ref2.setFieldValue,submitForm=_ref2.submitForm,isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Autocomplete,{options:SkinTypeDrop,value:SkinTypeDrop.find(function(data){return data.id==values.skin_type;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.skin_type;},onChange:function onChange(event,newValue){setFieldValue('skin_type',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Skin Type\",variant:\"outlined\",error:Boolean(touched.skin_type&&errors.skin_type),helperText:touched.skin_type&&errors.skin_type,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Autocomplete,{options:CurrentClimateDrop,value:CurrentClimateDrop.find(function(data){return data.id==values.current_climate;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.current_climate;},onChange:function onChange(event,newValue){setFieldValue('current_climate',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Current Climate\",variant:\"outlined\",error:Boolean(touched.current_climate&&errors.current_climate),helperText:touched.current_climate&&errors.current_climate,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(Autocomplete,{options:SkinTextureDrop,value:SkinTextureDrop.find(function(data){return data.id==values.skin_texture;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.skin_texture;},onChange:function onChange(event,newValue){setFieldValue('skin_texture',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Skin Texture\",variant:\"outlined\",error:Boolean(touched.skin_texture&&errors.skin_texture),helperText:touched.skin_texture&&errors.skin_texture,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Autocomplete,{options:SkinIrregularDrop,value:SkinIrregularDrop.find(function(data){return data.id==values.skin_irregular;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.skin_irregular;},onChange:function onChange(event,newValue){setFieldValue('skin_irregular',(newValue===null||newValue===void 0?void 0:newValue.id)||'');setFieldValue('skin_irregular_sub','');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Skin Irregularites\",variant:\"outlined\",error:Boolean(touched.skin_irregular&&errors.skin_irregular),helperText:touched.skin_irregular&&errors.skin_irregular,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Autocomplete,{options:getSubSkinIrregular(values.skin_irregular),value:getSubSkinIrregular(values.skin_irregular).find(function(data){return data.id==values.skin_irregular_sub;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==values.skin_irregular_sub;},onChange:function onChange(event,newValue){setFieldValue('skin_irregular_sub',(newValue===null||newValue===void 0?void 0:newValue.id)||'');},onBlur:handleBlur,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Sub Skin Irregularites\",variant:\"outlined\",error:Boolean(touched.skin_irregular_sub&&errors.skin_irregular_sub),helperText:touched.skin_irregular_sub&&errors.skin_irregular_sub,inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsxs(Grid,{className:classes.actionGrid,item:true,xs:12,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return onClose();},variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:clsx(classes.themeButton,classes.marginLeft1),onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):'Update'})]})]})});}})});};var ViewCard=function ViewCard(props){var classes=useStyles();var data=props.data;var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),formData=_useState8[0],setFormData=_useState8[1];useEffect(function(){setFormData(data);},[props]);return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Skin Type\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(SkinTypeDrop,formData===null||formData===void 0?void 0:formData.skin_type)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Current Climate\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CurrentClimateDrop,formData===null||formData===void 0?void 0:formData.current_climate)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Skin Irregularities\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(SkinIrregularDrop,formData===null||formData===void 0?void 0:formData.skin_irregular)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Sub Skin Irregularities\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(getSubSkinIrregular(formData===null||formData===void 0?void 0:formData.skin_irregular),formData===null||formData===void 0?void 0:formData.skin_irregular_sub)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Skin Texture\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(SkinTextureDrop,formData===null||formData===void 0?void 0:formData.skin_texture)})]})]})})});};export default AppNutrition;","map":null,"metadata":{},"sourceType":"module"}