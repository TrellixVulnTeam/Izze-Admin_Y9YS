{"ast":null,"code":"import _objectWithoutProperties from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _toConsumableArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import{Avatar,Button,Card,CardActions,CardContent,CircularProgress,Dialog,DialogActions,DialogContent,Grid,IconButton,makeStyles,Paper,Table,TableBody,FormControl,FormHelperText,TableCell,TableContainer,TableHead,TableRow,TextField,Tooltip,Typography}from'@material-ui/core';import AddIcon from'@material-ui/icons/Add';import CenterFocusStrongIcon from'@material-ui/icons/CenterFocusStrong';import DeleteIcon from'@material-ui/icons/Delete';import EditIcon from'@material-ui/icons/Edit';import{Pagination}from'@material-ui/lab';import{imageUpload}from'../../utils/FirebaseUtils';import{Formik}from'formik';import*as Yup from'yup';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import{TableLoader,TableNoData}from'../../components/Loader/Loader';import Page from'../../components/Page/Page';import useConfModel from'../../hook/useConfModel';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import ControlPointIcon from'@material-ui/icons/ControlPoint';import CloudUploadIcon from'@material-ui/icons/CloudUpload';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:theme.breakpoints.values.lg,maxWidth:'100%',margin:'0 auto',padding:theme.spacing(3)},content:{padding:0},tabCard:{marginTop:theme.spacing(3)},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},sEvenly:{display:'flex',justifyContent:'space-evenly'},iconPadd:{padding:5},jCenter:{display:'flex',justifyContent:'center'},actions:{padding:theme.spacing(1),justifyContent:'center'},deleteButton:{width:'100%',height:'50px'},imageView:{width:'100%',height:'100%'}};});function NutritionIngredients(){var classes=useStyles();var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var Snackbar=useSnackbar();var ConfModel=useConfModel();var _useService=useService(),Post=_useService.Post;var _useState=useState({page_no:1,page_limit:10}),_useState2=_slicedToArray(_useState,2),stateData=_useState2[0],setStateData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pageCount=_useState4[0],setPageCount=_useState4[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),ingredientList=_React$useState4[0],setIngredientList=_React$useState4[1];var _React$useState5=React.useState({isOpen:false,title:'',okBtnText:'',isEdit:false,data:{}}),_React$useState6=_slicedToArray(_React$useState5,2),addEditDialog=_React$useState6[0],setAddEditDialog=_React$useState6[1];var _useState5=useState({isOpen:false,title:'',data:{}}),_useState6=_slicedToArray(_useState5,2),viewDialog=_useState6[0],setViewDialog=_useState6[1];var listNutritionIngredient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);Post('app/listMealIngredient',stateData).then(function(res){setLoading(false);if(!res.error){setIngredientList(res.data);setPageCount(res.page_count);}else{Snackbar.show(res.message,'error');}}).catch(function(err){console.log('err',err);setLoading(false);Snackbar.show(err.message,'error');});case 2:case\"end\":return _context.stop();}}},_callee);}));return function listNutritionIngredient(){return _ref.apply(this,arguments);};}();var onPageChange=function onPageChange(event,value){setStateData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{page_no:value});});};var openAddDialog=function openAddDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,title:'Add Nutrition Ingredients',isEdit:false,okBtnText:'Save'});});};var openEditDialog=function openEditDialog(data){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,isEdit:true,data:data,title:'Edit Nutrition Ingredients',okBtnText:'Edit'});});};var openViewDialog=function openViewDialog(data){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,data:data,title:'View Nutrition Ingredient'});});};var onDelete=function onDelete(data){var openModel=ConfModel.openModel,setLoading=ConfModel.setLoading,closeModel=ConfModel.closeModel;var submitFunction=function submitFunction(){setLoading(true);Post('app/deleteMealIngredient',{id:data._id}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(false);closeModel();onSuccessAction();Snackbar.show(res.message,'success');case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){setLoading(false);Snackbar.show('Internal Server Error','error');});};openModel(submitFunction);};var closeViewDialog=function closeViewDialog(){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false});});};var closeAddEditDialog=function closeAddEditDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false});});};var setElipsis=function setElipsis(text){return(text===null||text===void 0?void 0:text.length)>=25?\"\".concat(text.substring(0,40),\"...\"):text;};var onSuccessAction=function onSuccessAction(){listNutritionIngredient();closeAddEditDialog();};useEffect(function(){listNutritionIngredient();},[stateData]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Page,{title:\"Nutrition Ingredients\"}),/*#__PURE__*/_jsxs(Grid,{alignItems:\"flex-end\",container:true,justify:\"space-between\",spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h3\",children:\"Nutrition Ingredients\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return openAddDialog();},className:classes.themeButton,startIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Add\"})})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Paper,{elevation:0,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,size:\"small\",placeholder:\"Name\",variant:\"outlined\",name:\"state\"})})})}),/*#__PURE__*/_jsxs(Card,{className:classes.tabCard,children:[/*#__PURE__*/_jsx(CardContent,{className:classes.content,children:/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"#\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Image\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Description\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[!loading&&ingredientList.map(function(data,index){return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:stateData.page_limit*(stateData.page_no-1)+index+1}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:classes.jCenter,children:/*#__PURE__*/_jsx(Avatar,{variant:\"square\",src:data===null||data===void 0?void 0:data.image})})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:data===null||data===void 0?void 0:data.name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Tooltip,{title:data===null||data===void 0?void 0:data.description,children:/*#__PURE__*/_jsx(\"span\",{children:setElipsis(data===null||data===void 0?void 0:data.description)})})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.sEvenly,children:[/*#__PURE__*/_jsx(Tooltip,{title:\"View\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openViewDialog(data);},children:/*#__PURE__*/_jsx(CenterFocusStrongIcon,{color:\"primary\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Edit\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openEditDialog(data);},children:/*#__PURE__*/_jsx(EditIcon,{color:\"action\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Delete\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return onDelete(data);},children:/*#__PURE__*/_jsx(DeleteIcon,{color:\"secondary\"})})})]})})]},index);}),loading&&/*#__PURE__*/_jsx(TableLoader,{}),!loading&&ingredientList.length==0&&/*#__PURE__*/_jsx(TableNoData,{children:\"No Data Found\"})]})]})})}),/*#__PURE__*/_jsx(CardActions,{className:classes.actions,children:/*#__PURE__*/_jsx(Pagination,{count:pageCount,page:stateData.page_no,onChange:onPageChange})})]}),/*#__PURE__*/_jsx(AddandEditDialogue,_objectSpread(_objectSpread({},addEditDialog),{},{onClose:closeAddEditDialog,onSuccess:onSuccessAction})),viewDialog.isOpen&&/*#__PURE__*/_jsx(ViewIngredientModel,_objectSpread(_objectSpread({},viewDialog),{},{onClose:closeViewDialog}))]});}var AddandEditDialogue=function AddandEditDialogue(props){var isEdit=props.isEdit,isOpen=props.isOpen,_props$okBtnText=props.okBtnText,okBtnText=_props$okBtnText===void 0?'OK':_props$okBtnText,onClose=props.onClose,data=props.data,title=props.title,onSuccess=props.onSuccess;var classes=useStyles();var formikRef=useRef(null);var imageRef=useRef(null);var Snackbar=useSnackbar();var _useService2=useService(),Post=_useService2.Post;var initialValues={nutrientName:'',image:{file:null,prevImage:'',isNew:null},quantity:'',protein:'',fat:'',carbs:'',calories:'',benfits:[],description:''};var _React$useState7=React.useState(_objectSpread({},initialValues)),_React$useState8=_slicedToArray(_React$useState7,2),initialFormValues=_React$useState8[0],setInitialFormValues=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),addBenifits=_React$useState10[0],setAddBenifits=_React$useState10[1];var handleAddBenifits=function handleAddBenifits(event){event.preventDefault();var dummyData=[].concat(_toConsumableArray(addBenifits),['']);setAddBenifits(dummyData);formikRef.current.setFieldValue('benfits',dummyData);};var removeBenifits=function removeBenifits(item){var deleteBenifitsData=_toConsumableArray(addBenifits);deleteBenifitsData.splice(deleteBenifitsData.indexOf(item),1);formikRef.current.setFieldValue('benfits',deleteBenifitsData);setAddBenifits(deleteBenifitsData);};var handleBenifitChange=function handleBenifitChange(event,index){addBenifits[index]=event.target.value;formikRef.current.setFieldValue('benfits',_toConsumableArray(addBenifits));};var onSubmit=function onSubmit(value,helper){try{helper.setSubmitting(true);var renderSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var image,nutrientName,rest,isNew,file,postData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:image=value.image,nutrientName=value.nutrientName,rest=_objectWithoutProperties(value,[\"image\",\"nutrientName\"]);isNew=image.isNew,file=image.file;postData=rest;postData.name=nutrientName;if(!isNew){_context3.next=10;break;}_context3.next=7;return imageUpload(file);case 7:postData.image=_context3.sent;_context3.next=11;break;case 10:postData.image=file;case 11:!isEdit&&addData(postData,helper);isEdit&&editData(postData,helper);case 13:case\"end\":return _context3.stop();}}},_callee3);}));return function renderSubmit(){return _ref3.apply(this,arguments);};}();renderSubmit();}catch(_unused){Snackbar.show('Image Upload Failed','error');}};var addData=function addData(data,_ref4){var setSubmitting=_ref4.setSubmitting,resetForm=_ref4.resetForm;setSubmitting(true);Post('app/addMealIngredient',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var editData=function editData(data,_ref5){var setSubmitting=_ref5.setSubmitting,resetForm=_ref5.resetForm;setSubmitting(true);Post('app/editMealIngredient',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var onImageChange=function onImageChange(e){e.persist();var files=e.target.files;if(files&&files.length!=0){var reader=new FileReader();var file=files[0];reader.onloadend=function(){formikRef.current.setFieldValue('image',{file:file,prevImage:reader.result,isNew:true});};reader.readAsDataURL(file);}else{formikRef.current.setFieldValue('image',{file:null,prevImage:'',isNew:null});}};useEffect(function(){if(isEdit){var name=data.name,image=data.image,_id=data._id,rest=_objectWithoutProperties(data,[\"name\",\"image\",\"_id\"]);var _editData=_objectSpread(_objectSpread({},rest),{},{id:_id});_editData.nutrientName=name;_editData.image={file:image,isNew:false,prevImage:image};setAddBenifits(data.benfits);setInitialFormValues(_editData);}else{setInitialFormValues(initialValues);}},[props]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Dialog,{open:isOpen,disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"md\",\"aria-labelledby\":\"dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialFormValues,onSubmit:onSubmit,validationSchema:Yup.object().shape({nutrientName:Yup.string().trim().required('Name is required'),quantity:Yup.string().trim().required('Quality is required'),protein:Yup.string().trim().required('Protein is required'),fat:Yup.string().trim().required('Fat is required'),carbs:Yup.string().trim().required('Carbs is required'),calories:Yup.string().trim().required('Calories is required'),description:Yup.string().trim().required('Description is required'),image:Yup.object({file:Yup.mixed().required('A file is required')}),benfits:Yup.array().of(Yup.string().required('Benefits is required'))}),children:function children(_ref6){var _values$benfits,_touched$image,_errors$image,_touched$image2,_errors$image2,_values$image,_values$image2;var values=_ref6.values,errors=_ref6.errors,touched=_ref6.touched,handleBlur=_ref6.handleBlur,handleChange=_ref6.handleChange,submitForm=_ref6.submitForm,isSubmitting=_ref6.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[console.log(errors),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Name\",name:\"nutrientName\",variant:\"outlined\",error:Boolean(touched.nutrientName&&errors.nutrientName),helperText:touched.nutrientName&&errors.nutrientName,value:values.nutrientName,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Quantity\",name:\"quantity\",variant:\"outlined\",error:Boolean(touched.quantity&&errors.quantity),helperText:touched.quantity&&errors.quantity,value:values.quantity,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Protein\",name:\"protein\",variant:\"outlined\",error:Boolean(touched.protein&&errors.protein),helperText:touched.protein&&errors.protein,value:values.protein,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Fat\",name:\"fat\",variant:\"outlined\",error:Boolean(touched.fat&&errors.fat),helperText:touched.fat&&errors.fat,value:values.fat,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Carbs\",name:\"carbs\",variant:\"outlined\",error:Boolean(touched.carbs&&errors.carbs),helperText:touched.carbs&&errors.carbs,value:values.carbs,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Calories\",name:\"calories\",variant:\"outlined\",error:Boolean(touched.calories&&errors.calories),helperText:touched.calories&&errors.calories,value:values.calories,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,variant:\"contained\",color:\"default\",onClick:function onClick(e){return handleAddBenifits(e);},endIcon:/*#__PURE__*/_jsx(ControlPointIcon,{}),children:\"Add Benefits\"})}),values===null||values===void 0?void 0:(_values$benfits=values.benfits)===null||_values$benfits===void 0?void 0:_values$benfits.map(function(data,index){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:11,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Benefits\",name:\"benfits[\".concat(index,\"]\"),variant:\"outlined\",error:Boolean((touched===null||touched===void 0?void 0:touched.benfits)&&(touched===null||touched===void 0?void 0:touched.benfits[index])&&(errors===null||errors===void 0?void 0:errors.benfits)&&(errors===null||errors===void 0?void 0:errors.benfits[index])),helperText:(touched===null||touched===void 0?void 0:touched.benfits)&&(touched===null||touched===void 0?void 0:touched.benfits[index])&&(errors===null||errors===void 0?void 0:errors.benfits)&&(errors===null||errors===void 0?void 0:errors.benfits[index]),value:data,onChange:function onChange(e){return handleBenifitChange(e,index);},onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:1,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.deleteButton,variant:\"contained\",color:\"secondary\",onClick:function onClick(){return removeBenifits(data);},children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]});}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,label:\"Description\",name:\"description\",variant:\"outlined\",error:Boolean(touched.description&&errors.description),helperText:touched.description&&errors.description,value:values.description,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsxs(Grid,{item:true,md:12,xs:12,children:[/*#__PURE__*/_jsx(\"input\",{name:\"image\",ref:imageRef,type:\"file\",accept:\".jpg,.png,jpeg\",onChange:onImageChange,onBlur:handleBlur,hidden:true}),/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,variant:\"contained\",color:\"default\",onClick:function onClick(){return imageRef.current.click();},startIcon:/*#__PURE__*/_jsx(CloudUploadIcon,{}),children:\"Upload Image\"}),/*#__PURE__*/_jsx(FormControl,{error:Boolean((touched===null||touched===void 0?void 0:(_touched$image=touched.image)===null||_touched$image===void 0?void 0:_touched$image.file)&&(errors===null||errors===void 0?void 0:(_errors$image=errors.image)===null||_errors$image===void 0?void 0:_errors$image.file)),children:/*#__PURE__*/_jsx(FormHelperText,{children:(touched===null||touched===void 0?void 0:(_touched$image2=touched.image)===null||_touched$image2===void 0?void 0:_touched$image2.file)&&(errors===null||errors===void 0?void 0:(_errors$image2=errors.image)===null||_errors$image2===void 0?void 0:_errors$image2.file)})})]}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:((_values$image=values.image)===null||_values$image===void 0?void 0:_values$image.prevImage)&&/*#__PURE__*/_jsx(\"img\",{className:classes.imageView,src:(_values$image2=values.image)===null||_values$image2===void 0?void 0:_values$image2.prevImage})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):okBtnText})]})]});}})]})});};var ViewIngredientModel=function ViewIngredientModel(props){var _formValue$benfits;var isOpen=props.isOpen,title=props.title,onClose=props.onClose,data=props.data;var classes=useStyles();var _useState7=useState(data),_useState8=_slicedToArray(_useState7,2),formValue=_useState8[0],setFormValue=_useState8[1];console.log(formValue);useEffect(function(){setFormValue(data);},[props]);return/*#__PURE__*/_jsxs(Dialog,{disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"md\",\"aria-labelledby\":\"dialog-view-title\",open:isOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-view-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.name})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Calories\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.calories})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Carbs\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.carbs})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Fat\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.fat})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Protein\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.protein})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Quantity\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.quantity})})]})]})})}),/*#__PURE__*/_jsx(Paper,{style:{marginTop:'20px'},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"#\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Benifits\"})})]})}),/*#__PURE__*/_jsx(TableBody,{children:formValue===null||formValue===void 0?void 0:(_formValue$benfits=formValue.benfits)===null||_formValue$benfits===void 0?void 0:_formValue$benfits.map(function(item,index){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:index+1}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:item})]});})})]})}),/*#__PURE__*/_jsx(Typography,{style:{marginTop:'20px'},variant:\"h4\",children:\"Description\"}),/*#__PURE__*/_jsx(Typography,{style:{marginTop:'10px'},variant:\"h5\",children:formValue===null||formValue===void 0?void 0:formValue.description}),/*#__PURE__*/_jsx(Grid,{style:{marginTop:'20px'},container:true,children:/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:(formValue===null||formValue===void 0?void 0:formValue.image)&&/*#__PURE__*/_jsx(\"img\",{className:classes.imageView,src:formValue===null||formValue===void 0?void 0:formValue.image})})})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Close\"})})]});};export default NutritionIngredients;","map":{"version":3,"sources":["D:/Pyramidion/WebApp/Izze-Admin/src/pages/NutritionIngredients/NutritionIngredients.tsx"],"names":["React","useEffect","useRef","useState","Avatar","Button","Card","CardActions","CardContent","CircularProgress","Dialog","DialogActions","DialogContent","Grid","IconButton","makeStyles","Paper","Table","TableBody","FormControl","FormHelperText","TableCell","TableContainer","TableHead","TableRow","TextField","Tooltip","Typography","AddIcon","CenterFocusStrongIcon","DeleteIcon","EditIcon","Pagination","imageUpload","Formik","Yup","DialogTitle","TableLoader","TableNoData","Page","useConfModel","useService","useSnackbar","ControlPointIcon","CloudUploadIcon","useStyles","theme","root","width","breakpoints","values","lg","maxWidth","margin","padding","spacing","content","tabCard","marginTop","themeButton","color","palette","white","backgroundColor","green","main","dark","sEvenly","display","justifyContent","iconPadd","jCenter","actions","deleteButton","height","imageView","NutritionIngredients","classes","loading","setLoading","Snackbar","ConfModel","Post","page_no","page_limit","stateData","setStateData","pageCount","setPageCount","ingredientList","setIngredientList","isOpen","title","okBtnText","isEdit","data","addEditDialog","setAddEditDialog","viewDialog","setViewDialog","listNutritionIngredient","then","res","error","page_count","show","message","catch","err","console","log","onPageChange","event","value","prevState","openAddDialog","openEditDialog","openViewDialog","onDelete","openModel","closeModel","submitFunction","id","_id","onSuccessAction","closeViewDialog","closeAddEditDialog","setElipsis","text","length","substring","map","index","image","name","description","AddandEditDialogue","props","onClose","onSuccess","formikRef","imageRef","initialValues","nutrientName","file","prevImage","isNew","quantity","protein","fat","carbs","calories","benfits","initialFormValues","setInitialFormValues","addBenifits","setAddBenifits","handleAddBenifits","preventDefault","dummyData","current","setFieldValue","removeBenifits","item","deleteBenifitsData","splice","indexOf","handleBenifitChange","target","onSubmit","helper","setSubmitting","renderSubmit","rest","postData","addData","editData","resetForm","onImageChange","e","persist","files","reader","FileReader","onloadend","result","readAsDataURL","object","shape","string","trim","required","mixed","array","of","errors","touched","handleBlur","handleChange","submitForm","isSubmitting","Boolean","click","ViewIngredientModel","formValue","setFormValue"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Avatar, Button, Card, CardActions, CardContent, CircularProgress, Dialog, DialogActions, DialogContent, Grid, IconButton, makeStyles, Paper, Tab, Table, TableBody, FormControl, FormHelperText, TableCell, TableContainer, TableHead, TableRow, TextField, Tooltip, Typography } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CenterFocusStrongIcon from '@material-ui/icons/CenterFocusStrong';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { Pagination } from '@material-ui/lab';\r\nimport { imageUpload } from '../../utils/FirebaseUtils';\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport DialogTitle from '../../components/DialogTitlle/DialogTitle';\r\nimport { TableLoader, TableNoData } from '../../components/Loader/Loader';\r\nimport Page from '../../components/Page/Page';\r\nimport useConfModel from '../../hook/useConfModel';\r\nimport useService from '../../hook/useService';\r\nimport useSnackbar from '../../hook/useSnackbar';\r\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme: any) => ({\r\n    root: {\r\n      width: theme.breakpoints.values.lg,\r\n      maxWidth: '100%',\r\n      margin: '0 auto',\r\n      padding: theme.spacing(3),\r\n    },\r\n    content: {\r\n      padding: 0,\r\n    },\r\n    tabCard: {\r\n      marginTop: theme.spacing(3),\r\n    },\r\n    themeButton: {\r\n        color: theme.palette.white,\r\n        backgroundColor: theme.palette.green.main,\r\n        '&:hover': {\r\n          backgroundColor: theme.palette.green.dark,\r\n        },\r\n    },\r\n    sEvenly: {\r\n      display: 'flex',\r\n      justifyContent: 'space-evenly',\r\n    },\r\n    iconPadd: {\r\n      padding: 5,\r\n    },\r\n    jCenter: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n    },\r\n    actions: {\r\n      padding: theme.spacing(1),\r\n      justifyContent: 'center',\r\n    },\r\n    deleteButton: {\r\n      width: '100%',\r\n      height: '50px',\r\n    },\r\n    imageView : {\r\n      width : '100%',\r\n      height : '100%',\r\n    }\r\n  }));\r\n\r\nfunction NutritionIngredients() {\r\n  const classes = useStyles()\r\n  const [loading,setLoading] = React.useState(true)\r\n  const Snackbar = useSnackbar();\r\n  const ConfModel = useConfModel();\r\n  const { Post } = useService();\r\n  const [stateData, setStateData] = useState({ page_no: 1, page_limit: 10 });\r\n  const [pageCount, setPageCount] = useState(0);\r\n  const [ingredientList, setIngredientList] = React.useState([])\r\n  const [addEditDialog, setAddEditDialog] = React.useState({\r\n    isOpen: false,\r\n    title: '',\r\n    okBtnText: '',\r\n    isEdit: false,\r\n    data: {},\r\n  });\r\n  const [viewDialog, setViewDialog] = useState({\r\n    isOpen: false,\r\n    title: '',\r\n    data: {},\r\n  });\r\n\r\n  const listNutritionIngredient = async () => {\r\n    setLoading(true);\r\n    Post('app/listMealIngredient', stateData)\r\n      .then((res: any) => {\r\n        setLoading(false);\r\n        if (!res.error) {\r\n          setIngredientList(res.data);\r\n          setPageCount(res.page_count);\r\n        } else {\r\n          Snackbar.show(res.message, 'error');\r\n        }\r\n      })\r\n      .catch((err: any) => {\r\n        console.log('err', err);\r\n        setLoading(false);\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  };\r\n\r\n  const onPageChange = (event: React.ChangeEvent<unknown>, value: number) => {\r\n    setStateData((prevState: any) => ({ ...prevState, page_no: value }));\r\n  };\r\n\r\n  const openAddDialog = () => {\r\n    setAddEditDialog((prevState: any) => ({\r\n      ...prevState,\r\n      isOpen: true,\r\n      title: 'Add Nutrition Ingredients',\r\n      isEdit: false,\r\n      okBtnText: 'Save',\r\n    }));\r\n  };\r\n\r\n  const openEditDialog = (data: any) => {\r\n    setAddEditDialog((prevState: any) => ({\r\n      ...prevState,\r\n      isOpen: true,\r\n      isEdit: true,\r\n      data,\r\n      title: 'Edit Nutrition Ingredients',\r\n      okBtnText: 'Edit',\r\n    }));\r\n  };\r\n\r\n  const openViewDialog = (data: any) => {\r\n    setViewDialog((prevState: any) => ({\r\n      ...prevState,\r\n      isOpen: true,\r\n      data,\r\n      title: 'View Nutrition Ingredient',\r\n    }));\r\n  };\r\n\r\n  const onDelete = (data: any) => {\r\n    const { openModel, setLoading, closeModel } = ConfModel;\r\n    const submitFunction = () => {\r\n      setLoading(true);\r\n      Post('app/deleteMealIngredient', { id: data._id })\r\n        .then(async (res: any) => {\r\n          setLoading(false);\r\n          closeModel();\r\n          onSuccessAction();\r\n          Snackbar.show(res.message, 'success');\r\n        })\r\n        .catch((err: any) => {\r\n          setLoading(false);\r\n          Snackbar.show('Internal Server Error', 'error');\r\n        });\r\n    };\r\n    openModel(submitFunction);\r\n  };\r\n\r\n  const closeViewDialog = () => {\r\n    setViewDialog((prevState: any) => ({ ...prevState, isOpen: false }));\r\n  };\r\n\r\n  const closeAddEditDialog = () =>{\r\n    setAddEditDialog((prevState: any) => ({ ...prevState, isOpen: false }));\r\n  }\r\n\r\n  const setElipsis = (text: any) => {\r\n    return text?.length >= 25 ? `${text.substring(0, 40)}...` : text;\r\n  };\r\n\r\n  const onSuccessAction = () => {\r\n    listNutritionIngredient();\r\n    closeAddEditDialog();\r\n  };\r\n\r\n  useEffect(() => {\r\n    listNutritionIngredient();\r\n  }, [stateData]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Page title='Nutrition Ingredients' />\r\n\r\n      <Grid alignItems='flex-end' container justify='space-between' spacing={3}>\r\n        <Grid item>\r\n          <Typography component='h1' variant='h3'>\r\n            Nutrition Ingredients\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button\r\n            variant='contained'\r\n            onClick={() => openAddDialog()}\r\n            className={classes.themeButton}\r\n            startIcon={<AddIcon />}\r\n          >\r\n            Add\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* =============Search======== */}\r\n      <Grid container spacing={3}>\r\n        <Grid item>\r\n          <Paper elevation={0}>\r\n            <TextField\r\n              fullWidth\r\n              size='small'\r\n              placeholder='Name'\r\n              variant='outlined'\r\n              name='state'\r\n            />\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Card className={classes.tabCard}>\r\n        <CardContent className={classes.content}>\r\n          <TableContainer>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell align='center'>#</TableCell>\r\n                  <TableCell align='center'>Image</TableCell>\r\n                  <TableCell align='center'>Name</TableCell>\r\n                  <TableCell align='center'>Description</TableCell>\r\n                  <TableCell align='center'>Actions</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {!loading &&\r\n                  ingredientList.map((data: any, index: number) => (\r\n                    <TableRow hover key={index}>\r\n                      <TableCell align='center'>\r\n                        {stateData.page_limit * (stateData.page_no - 1) + index + 1}\r\n                      </TableCell>\r\n                      <TableCell align='center'>\r\n                        <div className={classes.jCenter}>\r\n                          <Avatar variant='square' src={data?.image} />\r\n                        </div>\r\n                      </TableCell>\r\n                      <TableCell align='center'>{data?.name}</TableCell>\r\n                      <TableCell align='center'>\r\n                        <Tooltip title={data?.description}>\r\n                          <span>{setElipsis(data?.description)}</span>\r\n                        </Tooltip>\r\n                      </TableCell>\r\n                      <TableCell align='center'>\r\n                        <div className={classes.sEvenly}>\r\n                          <Tooltip title='View' arrow>\r\n                            <IconButton\r\n                              className={classes.iconPadd}\r\n                              onClick={() => openViewDialog(data)}\r\n                            >\r\n                              <CenterFocusStrongIcon color='primary' />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                          <Tooltip title='Edit' arrow>\r\n                            <IconButton\r\n                              className={classes.iconPadd}\r\n                              onClick={() => openEditDialog(data)}\r\n                            >\r\n                              <EditIcon color='action' />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                          <Tooltip title='Delete' arrow>\r\n                            <IconButton\r\n                              className={classes.iconPadd}\r\n                              onClick={() => onDelete(data)}\r\n                            >\r\n                              <DeleteIcon color='secondary' />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                {loading && <TableLoader />}\r\n                {!loading && ingredientList.length == 0 && (\r\n                  <TableNoData>No Data Found</TableNoData>\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </CardContent>\r\n\r\n        <CardActions className={classes.actions}>\r\n          <Pagination\r\n            count={pageCount}\r\n            page={stateData.page_no}\r\n            onChange={onPageChange}\r\n          />\r\n        </CardActions>\r\n      </Card>\r\n\r\n      <AddandEditDialogue {...addEditDialog}  onClose={closeAddEditDialog} onSuccess={onSuccessAction}/>\r\n      {viewDialog.isOpen && <ViewIngredientModel {...viewDialog} onClose={closeViewDialog} />}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\ninterface NutritionValues {\r\n  nutrientName : string,\r\n  image : {file : null | any ,prevImage : string , isNew : null | boolean},\r\n  quantity : string,\r\n  protein : string,\r\n  fat : string,\r\n  carbs : string,\r\n  calories : string,\r\n  benfits : Array<any>,\r\n  description : string\r\n}\r\n\r\nconst AddandEditDialogue = (props: any) =>{\r\n    const { isEdit, isOpen, okBtnText = 'OK', onClose,data, title, onSuccess} = props;\r\n    const classes = useStyles()\r\n    const formikRef = useRef<any>(null)\r\n    const imageRef = useRef<any>(null)\r\n    const Snackbar = useSnackbar();\r\n    const { Post } = useService();\r\n    const initialValues: NutritionValues = {\r\n        nutrientName : '',\r\n        image : {file : null,prevImage : '' , isNew : null},\r\n        quantity : '',\r\n        protein : '',\r\n        fat : '',\r\n        carbs : '',\r\n        calories : '',\r\n        benfits : [],\r\n        description : '',\r\n    };\r\n    \r\n    const [initialFormValues,setInitialFormValues] = React.useState({...initialValues});\r\n    const [addBenifits,setAddBenifits] = React.useState<any>([])\r\n\r\n    const handleAddBenifits = (event: any) =>{\r\n      event.preventDefault()\r\n      const dummyData = [...addBenifits,''];\r\n      setAddBenifits(dummyData)\r\n      formikRef.current.setFieldValue('benfits',dummyData)\r\n    }\r\n\r\n    const removeBenifits = (item: any) =>{\r\n      const deleteBenifitsData = [...addBenifits];\r\n      deleteBenifitsData.splice(deleteBenifitsData.indexOf(item), 1);\r\n      formikRef.current.setFieldValue('benfits',deleteBenifitsData)\r\n      setAddBenifits(deleteBenifitsData)\r\n    }\r\n\r\n    const handleBenifitChange = (event:any,index:any) =>{\r\n      addBenifits[index] = event.target.value;\r\n      formikRef.current.setFieldValue('benfits',[...addBenifits])\r\n    }\r\n\r\n    const onSubmit = (value: any,helper: any) =>{\r\n      try{\r\n        helper.setSubmitting(true)\r\n        const renderSubmit = async () =>{\r\n          const { image, nutrientName, ...rest} = value;\r\n          const { isNew, file} = image;\r\n          const postData = rest;\r\n          postData.name = nutrientName\r\n          if (isNew) {\r\n            postData.image = await imageUpload(file);\r\n          } else {\r\n            postData.image = file;\r\n          }\r\n          !isEdit && addData(postData, helper);\r\n          isEdit && editData(postData, helper);\r\n        }\r\n        renderSubmit()\r\n      }\r\n      catch{\r\n        Snackbar.show('Image Upload Failed', 'error');\r\n      }\r\n    }\r\n\r\n    const addData = (data: any, { setSubmitting, resetForm }: any) => {\r\n      setSubmitting(true);\r\n      Post('app/addMealIngredient', data)\r\n        .then((res: any) => {\r\n          Snackbar.show(res.message, 'success');\r\n          setSubmitting(false);\r\n          resetForm();\r\n          onSuccess();\r\n        })\r\n        .catch((err: any) => {\r\n          setSubmitting(false);\r\n          Snackbar.show(err.message, 'error');\r\n        });\r\n    };\r\n\r\n    const editData = (data: any, { setSubmitting, resetForm }: any) => {\r\n      setSubmitting(true);\r\n      Post('app/editMealIngredient', data)\r\n        .then((res: any) => {\r\n          Snackbar.show(res.message, 'success');\r\n          setSubmitting(false);\r\n          resetForm();\r\n          onSuccess();\r\n        })\r\n        .catch((err: any) => {\r\n          setSubmitting(false);\r\n          Snackbar.show(err.message, 'error');\r\n        });\r\n    };\r\n\r\n\r\n    const onImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      e.persist();\r\n      const files = e.target.files;\r\n      if (files && files.length != 0) {\r\n        const reader = new FileReader();\r\n        const file = files[0];\r\n        reader.onloadend = () => {\r\n          formikRef.current.setFieldValue('image', {\r\n            file,\r\n            prevImage: reader.result,\r\n            isNew: true,\r\n          });\r\n        };\r\n        reader.readAsDataURL(file);\r\n      } else {\r\n        formikRef.current.setFieldValue('image', {\r\n          file: null,\r\n          prevImage: '',\r\n          isNew: null,\r\n        });\r\n      }\r\n    };\r\n\r\n    useEffect(()=>{\r\n      if(isEdit){\r\n        const { name, image, _id, ...rest} = data;\r\n        const editData = {...rest, id:_id}\r\n        editData.nutrientName = name;\r\n        editData.image = {file : image, isNew : false, prevImage : image}\r\n        setAddBenifits(data.benfits)\r\n        setInitialFormValues(editData);\r\n      } else {\r\n        setInitialFormValues(initialValues);\r\n      }\r\n    },[props])\r\n\r\n    return (\r\n    <div>\r\n       <Dialog \r\n        open={isOpen}\r\n        disableBackdropClick\r\n        disableEscapeKeyDown\r\n        fullWidth\r\n        maxWidth='md'\r\n        aria-labelledby='dialog-title' >\r\n\r\n        <DialogTitle id='dialog-title' onClose={onClose}>\r\n          {title}\r\n        </DialogTitle>\r\n        <Formik\r\n        innerRef={formikRef}\r\n        enableReinitialize\r\n        initialValues={initialFormValues}\r\n        onSubmit={onSubmit}\r\n        validationSchema={Yup.object().shape({\r\n            nutrientName: Yup.string().trim().required('Name is required'),\r\n            quantity : Yup.string().trim().required('Quality is required'),\r\n            protein : Yup.string().trim().required('Protein is required'),\r\n            fat : Yup.string().trim().required('Fat is required'),\r\n            carbs : Yup.string().trim().required('Carbs is required'),\r\n            calories : Yup.string().trim().required('Calories is required'),\r\n            description : Yup.string().trim().required('Description is required'),\r\n            image: Yup.object({\r\n              file: Yup.mixed().required('A file is required'),\r\n            }),\r\n            benfits : Yup.array().of(Yup.string().required('Benefits is required'))\r\n        })}\r\n        >\r\n            {({values, errors, touched, handleBlur,handleChange, submitForm, isSubmitting,}: any)=>(\r\n                <>\r\n                {console.log(errors)}\r\n                <DialogContent dividers>\r\n                    <Grid container spacing = {2}>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                fullWidth\r\n                                label='Name'\r\n                                name='nutrientName'\r\n                                variant='outlined'\r\n                                error={Boolean(touched.nutrientName && errors.nutrientName)}\r\n                                helperText={touched.nutrientName && errors.nutrientName}\r\n                                value={values.nutrientName}\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                fullWidth\r\n                                label='Quantity'\r\n                                name='quantity'\r\n                                variant='outlined'\r\n                                error={Boolean(touched.quantity && errors.quantity)}\r\n                                helperText={touched.quantity && errors.quantity}\r\n                                value={values.quantity}\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <TextField\r\n                                fullWidth\r\n                                label='Protein'\r\n                                name='protein'\r\n                                variant='outlined'\r\n                                error={Boolean(touched.protein && errors.protein)}\r\n                                helperText={touched.protein && errors.protein}\r\n                                value={values.protein}\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <TextField\r\n                                fullWidth\r\n                                label='Fat'\r\n                                name='fat'\r\n                                variant='outlined'\r\n                                error={Boolean(touched.fat && errors.fat)}\r\n                                helperText={touched.fat && errors.fat}\r\n                                value={values.fat}\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <TextField\r\n                                fullWidth\r\n                                label='Carbs'\r\n                                name='carbs'\r\n                                variant='outlined'\r\n                                error={Boolean(touched.carbs && errors.carbs)}\r\n                                helperText={touched.carbs && errors.carbs}\r\n                                value={values.carbs}\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <TextField\r\n                                fullWidth\r\n                                label='Calories'\r\n                                name='calories'\r\n                                variant='outlined'\r\n                                error={Boolean(touched.calories && errors.calories)}\r\n                                helperText={touched.calories && errors.calories}\r\n                                value={values.calories}\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid item xs={12}>\r\n                             <Button\r\n                             fullWidth\r\n                              className={classes.themeButton}\r\n                              variant='contained'\r\n                              color='default'\r\n                              onClick={(e)=>handleAddBenifits(e)}\r\n                              endIcon={<ControlPointIcon />}\r\n                            >\r\n                              Add Benefits\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        {values?.benfits?.map((data: any,index: any)=>{\r\n                          return (\r\n                            <>\r\n                              <Grid item xs={11}>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    label='Benefits'\r\n                                    name={`benfits[${index}]`}\r\n                                    variant='outlined'\r\n                                    error={Boolean(\r\n                                      touched?.benfits &&\r\n                                      touched?.benfits[index] &&\r\n                                      errors?.benfits &&\r\n                                      (errors?.benfits[index] as any)\r\n                                    )}\r\n                                    helperText={\r\n                                      touched?.benfits &&\r\n                                      touched?.benfits[index] &&\r\n                                      errors?.benfits &&\r\n                                      (errors?.benfits[index] as any)\r\n                                    }\r\n                                    value={data}\r\n                                    onChange={(e)=>handleBenifitChange(e,index)}\r\n                                    onBlur={handleBlur}\r\n                                />\r\n                              </Grid>\r\n                              <Grid item xs={1}>\r\n                                <Button\r\n                                  fullWidth\r\n                                  className={classes.deleteButton}\r\n                                  variant='contained'\r\n                                  color='secondary'\r\n                                  onClick={() =>\r\n                                    removeBenifits(data)\r\n                                  }\r\n                                >\r\n                                  <DeleteIcon />\r\n                                </Button>\r\n                              </Grid>\r\n                            </>\r\n                          )\r\n                        })}\r\n\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                fullWidth\r\n                                multiline\r\n                                label='Description'\r\n                                name='description'\r\n                                variant='outlined'\r\n                                error={Boolean(touched.description && errors.description)}\r\n                                helperText={touched.description && errors.description}\r\n                                value={values.description}\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid item md={12} xs={12}>\r\n                          <input\r\n                            name='image'\r\n                            ref={imageRef}\r\n                            type='file'\r\n                            accept='.jpg,.png,jpeg'\r\n                            onChange={onImageChange}\r\n                            onBlur={handleBlur}\r\n                            hidden\r\n                          />\r\n                          <Button\r\n                            fullWidth\r\n                            className={classes.themeButton}\r\n                            variant='contained'\r\n                            color='default'\r\n                            onClick={() => imageRef.current.click()}\r\n                            startIcon={<CloudUploadIcon />}\r\n                          >\r\n                            Upload Image\r\n                          </Button>\r\n                          <FormControl\r\n                            error={Boolean(\r\n                              touched?.image?.file && errors?.image?.file\r\n                            )}\r\n                          >\r\n                            <FormHelperText>\r\n                              {touched?.image?.file &&\r\n                                errors?.image?.file}\r\n                            </FormHelperText>\r\n                          </FormControl>\r\n                        </Grid>\r\n\r\n                        <Grid item md={12} xs={12}>\r\n                          {values.image?.prevImage && (\r\n                            <img\r\n                              className={classes.imageView}\r\n                              src={values.image?.prevImage}\r\n                            />\r\n                          )}\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={onClose} variant='outlined' color='secondary'>\r\n                      Cancel\r\n                    </Button>\r\n\r\n                    <Button\r\n                      className={classes.themeButton}\r\n                      onClick={() => submitForm()}\r\n                      disabled={isSubmitting}\r\n                      variant='outlined'\r\n                    >\r\n                      {isSubmitting ? (\r\n                        <CircularProgress size={24} style={{color : 'white'}} />\r\n                      ) : (\r\n                        okBtnText\r\n                      )}\r\n                    </Button>\r\n                  </DialogActions>\r\n                </>\r\n            )}\r\n        </Formik>\r\n\r\n       </Dialog>\r\n    </div>\r\n    )\r\n}\r\n\r\nconst ViewIngredientModel = (props: any) =>{\r\n  const { isOpen, title, onClose, data } = props;\r\n  const classes = useStyles();\r\n  const [formValue, setFormValue] = useState(data);\r\n  console.log(formValue)\r\n\r\n  useEffect(() => {\r\n    setFormValue(data);\r\n  }, [props]);\r\n\r\n\r\n  return (\r\n    <Dialog\r\n      disableBackdropClick\r\n      disableEscapeKeyDown\r\n      fullWidth\r\n      maxWidth='md'\r\n      aria-labelledby='dialog-view-title'\r\n      open={isOpen}\r\n    >\r\n      <DialogTitle id='dialog-view-title' onClose={onClose}>\r\n        {title}\r\n      </DialogTitle>\r\n\r\n      <DialogContent dividers>\r\n        <Paper >\r\n          <Table>\r\n            <TableBody>\r\n              <TableRow >\r\n                <TableCell>Name</TableCell>\r\n                <TableCell><strong>{formValue?.name}</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Calories</TableCell>\r\n                <TableCell><strong>{formValue?.calories}</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Carbs</TableCell>\r\n                <TableCell><strong>{formValue?.carbs}</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Fat</TableCell>\r\n                <TableCell><strong>{formValue?.fat}</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Protein</TableCell>\r\n                <TableCell><strong>{formValue?.protein}</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Quantity</TableCell>\r\n                <TableCell><strong>{formValue?.quantity}</strong></TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n\r\n        <Paper style={{marginTop : '20px'}} >\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell align='center'><strong>#</strong></TableCell>\r\n                <TableCell align='center'><strong>Benifits</strong></TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {formValue?.benfits?.map((item: any,index: any)=>{\r\n                return (\r\n                  <TableRow>\r\n                    <TableCell align='center'>{index + 1}</TableCell>\r\n                    <TableCell align='center'>{item}</TableCell>\r\n                  </TableRow>\r\n                )\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n\r\n        <Typography style={{marginTop : '20px'}} variant = 'h4'>Description</Typography>\r\n        <Typography style={{marginTop : '10px'}} variant = 'h5'>{formValue?.description}</Typography>\r\n\r\n        <Grid style={{marginTop : '20px'}} container>\r\n          <Grid item md={12} xs={12}>\r\n            {formValue?.image && (\r\n              <img className={classes.imageView} src={formValue?.image} />\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button onClick={onClose} variant='outlined' color='secondary'>\r\n          Close\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default NutritionIngredients;\r\n"]},"metadata":{},"sourceType":"module"}