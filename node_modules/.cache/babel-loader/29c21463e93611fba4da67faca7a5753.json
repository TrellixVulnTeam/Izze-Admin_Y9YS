{"ast":null,"code":"import _objectWithoutProperties from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar,Button,Card,CardActions,CardContent,CircularProgress,Dialog,DialogActions,DialogContent,FormControl,FormHelperText,Grid,IconButton,makeStyles,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TextField,Tooltip,Typography}from'@material-ui/core';import AddIcon from'@material-ui/icons/Add';import CenterFocusStrongIcon from'@material-ui/icons/CenterFocusStrong';import ControlPointIcon from'@material-ui/icons/ControlPoint';import DeleteIcon from'@material-ui/icons/Delete';import EditIcon from'@material-ui/icons/Edit';import{Autocomplete,Pagination}from'@material-ui/lab';import{Formik,getIn,useFormikContext,FieldArray}from'formik';import React,{useEffect,useRef,useState}from'react';import*as Yup from'yup';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import{TableLoader,TableNoData}from'../../components/Loader/Loader';import Page from'../../components/Page/Page';import TipTapEditor from'../../components/TipTapEditor/TipTapEditor';import useConfModel from'../../hook/useConfModel';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import{uploadNewImage}from'../../utils/CloudinaryUtils';import CloudUploadIcon from'@material-ui/icons/CloudUpload';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:theme.breakpoints.values.lg,maxWidth:'100%',margin:'0 auto',padding:theme.spacing(3)},addIcon:{marginRight:theme.spacing(1)},content:{padding:0},inner:{minWidth:700},actions:{padding:theme.spacing(1),justifyContent:'center'},tabCard:{marginTop:theme.spacing(3)},sEvenly:{display:'flex',justifyContent:'space-evenly'},iconPadd:{padding:5},jCenter:{display:'flex',justifyContent:'center'},imageView:{width:'100%',height:'100%'},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},lColor:{color:'white'},workouttermsavatar:{width:'100%',height:'100%'},deleteButton:{width:'100%',height:'50px'},avatarStyles:{width:theme.spacing(15),height:theme.spacing(15)// margin: 'auto',\n},ingredientsAvatarStyle:{width:theme.spacing(10),height:theme.spacing(10),margin:'auto'},marginTopStyle:{marginTop:theme.spacing(2)},adjustmentTop:{marginTop:'5px'},avatarRoot:{borderRadius:10,marginRight:15,width:theme.spacing(10),height:theme.spacing(10)},textPrimary:{marginTop:10,fontWeight:'bold'},textSecondary:{marginTop:10},ingrdientsGridMain:{marginTop:10},ingredientsAvatarRoot:{width:theme.spacing(7),height:theme.spacing(7),margin:'auto'},htmlContentGrid:{paddingLeft:theme.spacing(3),paddingRight:theme.spacing(3),paddingTop:theme.spacing(1)},noIngredientsText:{marginBottom:theme.spacing(3),display:'flex',justifyContent:'center'},htmlContent:{'& ul':{paddingLeft:'1.2rem'},'& p':{textAlign:'justify'}}};});var WorkoutExercise=function WorkoutExercise(){var classes=useStyles();var _useService=useService(),Post=_useService.Post;var Snackbar=useSnackbar();var ConfModel=useConfModel();var _useState=useState({page_no:1,page_limit:10}),_useState2=_slicedToArray(_useState,2),stateData=_useState2[0],setStateData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pageCount=_useState4[0],setPageCount=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dataList=_useState6[0],setDataList=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState({isOpen:false,title:'',okBtnText:'',isEdit:false,data:{}}),_useState10=_slicedToArray(_useState9,2),addEditDialog=_useState10[0],setAddEditDialog=_useState10[1];var _useState11=useState({isOpen:false,title:'',data:{}}),_useState12=_slicedToArray(_useState11,2),viewDialog=_useState12[0],setViewDialog=_useState12[1];var listWorkOutExercise=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);Post('app/listWorkout',stateData).then(function(res){setLoading(false);if(!res.error){setDataList(res.data);setPageCount(res.page_count);}else{Snackbar.show(res.message,'error');}}).catch(function(err){setLoading(false);Snackbar.show(err.message,'error');});case 2:case\"end\":return _context.stop();}}},_callee);}));return function listWorkOutExercise(){return _ref.apply(this,arguments);};}();var onPageChange=function onPageChange(event,value){setStateData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{page_no:value});});};var setElipsis=function setElipsis(text){return(text===null||text===void 0?void 0:text.length)>=25?\"\".concat(text.substring(0,40),\"...\"):text;};var openAddDialog=function openAddDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,isEdit:false,title:'Add Exercise',okBtnText:'Save'});});};var openEditDialog=function openEditDialog(data){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,isEdit:true,data:data,title:'Edit Exercise',okBtnText:'Edit'});});};var openViewDialog=function openViewDialog(data){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,data:data,title:'View Exerice'});});};var onDelete=function onDelete(data){var openModel=ConfModel.openModel,setLoading=ConfModel.setLoading,closeModel=ConfModel.closeModel;var submitFunction=function submitFunction(){setLoading(true);Post('app/deleteWorkout',{id:data._id}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(false);closeModel();onSuccessAction();Snackbar.show(res.message,'success');case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){setLoading(false);Snackbar.show('Internal Server Error','error');});};openModel(submitFunction);};var closeAddEditDialog=function closeAddEditDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false});});};var closeViewDialog=function closeViewDialog(){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false});});};var onSuccessAction=function onSuccessAction(){listWorkOutExercise();closeAddEditDialog();};useEffect(function(){listWorkOutExercise();},[stateData]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Page,{title:\"Workout Exercise\"}),/*#__PURE__*/_jsxs(Grid,{alignItems:\"flex-end\",container:true,justify:\"space-between\",spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h3\",children:\"Movement Exercise\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return openAddDialog();},className:classes.themeButton,startIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Add\"})})]}),/*#__PURE__*/_jsxs(Card,{className:classes.tabCard,children:[/*#__PURE__*/_jsx(CardContent,{className:classes.content,children:/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"#\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Exercise Image\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Exercise Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Exercise Description\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[!loading&&dataList.map(function(data,index){var _data$workout_image;return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:stateData.page_limit*(stateData.page_no-1)+index+1}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:classes.jCenter,children:/*#__PURE__*/_jsx(Avatar,{variant:\"square\",src:data===null||data===void 0?void 0:(_data$workout_image=data.workout_image)===null||_data$workout_image===void 0?void 0:_data$workout_image.url})})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:data===null||data===void 0?void 0:data.workout_name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Tooltip,{title:data===null||data===void 0?void 0:data.workout_description,children:/*#__PURE__*/_jsx(\"span\",{children:setElipsis(data===null||data===void 0?void 0:data.workout_description)})})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.sEvenly,children:[/*#__PURE__*/_jsx(Tooltip,{title:\"View\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openViewDialog(data);},children:/*#__PURE__*/_jsx(CenterFocusStrongIcon,{color:\"primary\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Edit\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openEditDialog(data);},children:/*#__PURE__*/_jsx(EditIcon,{color:\"action\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Delete\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return onDelete(data);},children:/*#__PURE__*/_jsx(DeleteIcon,{color:\"secondary\"})})})]})})]},index);}),loading&&/*#__PURE__*/_jsx(TableLoader,{}),!loading&&dataList.length==0&&/*#__PURE__*/_jsx(TableNoData,{children:\"No Data Found\"})]})]})})}),/*#__PURE__*/_jsx(CardActions,{className:classes.actions,children:/*#__PURE__*/_jsx(Pagination,{count:pageCount,page:stateData.page_no,onChange:onPageChange})})]}),/*#__PURE__*/_jsx(AddEditDailog,_objectSpread(_objectSpread({},addEditDialog),{},{onClose:closeAddEditDialog,onSuccess:onSuccessAction})),/*#__PURE__*/_jsx(ViewDailog,_objectSpread(_objectSpread({},viewDialog),{},{onClose:closeViewDialog}))]});};var AddEditDailog=function AddEditDailog(props){var isOpen=props.isOpen,title=props.title,onClose=props.onClose,isEdit=props.isEdit,data=props.data,onSuccess=props.onSuccess,_props$okBtnText=props.okBtnText,okBtnText=_props$okBtnText===void 0?'Ok':_props$okBtnText;var classes=useStyles();var formikRef=useRef(null);var imageRef=useRef(null);var thumbnailImageRef=useRef(null);var Snackbar=useSnackbar();var _useService2=useService(),Post=_useService2.Post;var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),equipmentList=_useState14[0],setEquipmentList=_useState14[1];var workoutTerms={name:'',image:{file:null,prevImage:'',isNew:null},description:''};var equipments={id:''};var initialFormValue={workout_name:'',workout_image:{file:null,prevImage:'',isNew:null},workout_description:'',// workout_thumbnail: { file: null, prevImage: '', isNew: null },\nworkout_type:'',workout_terms:[workoutTerms],required_equipments:[equipments],how_to_do:''};var _useState15=useState(_objectSpread({},initialFormValue)),_useState16=_slicedToArray(_useState15,2),initialValue=_useState16[0],setInitialValue=_useState16[1];var listIngredients=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:Post('app/listAllEquipment',{}).then(function(res){if(!res.error){var getequipmentList=res.data.map(function(data){data.id=data._id;return data;});setEquipmentList(getequipmentList);}else{Snackbar.show(res.message,'error');}}).catch(function(err){Snackbar.show(err.message,'error');});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function listIngredients(){return _ref3.apply(this,arguments);};}();var onImageChange=function onImageChange(e){e.persist();var files=e.target.files;if(files&&files.length!=0){var reader=new FileReader();var file=files[0];reader.onloadend=function(){formikRef.current.setFieldValue('workout_image',{file:file,prevImage:reader.result,isNew:true});};reader.readAsDataURL(file);}// else {\n//   formikRef.current.setFieldValue('workout_image', {\n//     file: null,\n//     prevImage: '',\n//     isNew: null,\n//   });\n// }\n};var onThumbnailImageChange=function onThumbnailImageChange(e){e.persist();var files=e.target.files;if(files&&files.length!=0){var reader=new FileReader();var file=files[0];reader.onloadend=function(){formikRef.current.setFieldValue('workout_thumbnail',{file:file,prevImage:reader.result,isNew:true});};reader.readAsDataURL(file);}// else {\n//   formikRef.current.setFieldValue('workout_thumbnail', {\n//     file: null,\n//     prevImage: '',\n//     isNew: null,\n//   });\n// }\n};var onSubmit=function onSubmit(value,helper){try{helper.setSubmitting(true);var render=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var workout_image,workout_terms,rest,postData,TermPromiseArray,_yield$Promise$all,_yield$Promise$all2,ImgRes,TermRes;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:workout_image=value.workout_image,workout_terms=value.workout_terms,rest=_objectWithoutProperties(value,[\"workout_image\",\"workout_terms\"]);postData=rest;TermPromiseArray=Promise.all(workout_terms.map(function(_ref5){var image=_ref5.image,rest=_objectWithoutProperties(_ref5,[\"image\"]);return uploadNewImage(image).then(function(ImgRes){return _objectSpread({image:ImgRes},rest);});}));_context4.next=5;return Promise.all([uploadNewImage(workout_image),TermPromiseArray]);case 5:_yield$Promise$all=_context4.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);ImgRes=_yield$Promise$all2[0];TermRes=_yield$Promise$all2[1];postData.workout_image=ImgRes;// postData.workout_thumbnail = ImgTumpRes\npostData.workout_terms=TermRes;!isEdit&&addData(postData,helper);isEdit&&editData(postData,helper);case 13:case\"end\":return _context4.stop();}}},_callee4);}));return function render(){return _ref4.apply(this,arguments);};}();render();}catch(err){Snackbar.show('Image Upload Failed','error');}};var addData=function addData(data,_ref6){var setSubmitting=_ref6.setSubmitting,resetForm=_ref6.resetForm;console.log(data);setSubmitting(true);Post('app/addWorkout',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var editData=function editData(data,_ref7){var setSubmitting=_ref7.setSubmitting,resetForm=_ref7.resetForm;setSubmitting(true);Post('app/editWorkout',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var handleEquipmentChange=function handleEquipmentChange(event,newValue){var sampleDatas=newValue.map(function(datas){return{id:datas._id};});formikRef.current.setFieldValue('required_equipments',sampleDatas);};var addIngredients=function addIngredients(values,push){var workout_terms=values.workout_terms;push(workoutTerms);};useEffect(function(){if(isEdit){var required_equipments=data.required_equipments,workout_terms=data.workout_terms,_id=data._id,workout_image=data.workout_image,rest=_objectWithoutProperties(data,[\"required_equipments\",\"workout_terms\",\"_id\",\"workout_image\"]);var _editData=_objectSpread(_objectSpread({},rest),{},{id:_id});_editData.required_equipments=required_equipments.map(function(data){// data.id = data._id;\nreturn{id:data._id};});var EquipmentIds=equipmentList.map(function(_ref8){var _id=_ref8._id;return _id;});_editData.required_equipments=required_equipments.filter(function(_ref9){var _id=_ref9._id;return EquipmentIds.includes(_id);}).map(function(_ref10){var _id=_ref10._id;return{id:_id};});_editData.workout_terms=workout_terms.map(function(item){var _item$image;return{name:item.name,image:{file:item.image,prevImage:(_item$image=item.image)===null||_item$image===void 0?void 0:_item$image.url,isNew:false},description:item.description};});// editData.workout_thumbnail = {\n//   file: workout_thumbnail,\n//   prevImage: workout_thumbnail?.url,\n//   isNew: false,\n// };\n_editData.workout_image={file:workout_image,prevImage:workout_image===null||workout_image===void 0?void 0:workout_image.url,isNew:false};setInitialValue(_editData);}else{setInitialValue(initialFormValue);}},[props]);useEffect(function(){listIngredients();},[]);return/*#__PURE__*/_jsxs(Dialog,{disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"md\",\"aria-labelledby\":\"dialog-title\",open:isOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialValue,onSubmit:onSubmit,validationSchema:Yup.object().shape({workout_name:Yup.string().trim().required('Workout name is required'),workout_image:Yup.object({file:Yup.mixed().required('A file is required')}),workout_description:Yup.string().trim().max(250,'Must be 250 characters or less').required('Workout description is required'),// workout_thumbnail: Yup.object({\n//   file: Yup.mixed().required('A file is required'),\n// }),\nworkout_type:Yup.string().trim().required('Workout type is required'),workout_terms:Yup.array().of(Yup.object().shape({name:Yup.string().trim().required('Workout term name is Required'),image:Yup.object({file:Yup.mixed().required('required')}),description:Yup.string().max(250,'Must be 250 characters or less').required('Workout description is Required')})),required_equipments:Yup.array().of(Yup.object().shape({id:Yup.string().trim().required(' Equipments is Required')})),how_to_do:Yup.string().trim().required('Steps is required')}),children:function children(_ref11){var _touched$workout_imag,_errors$workout_image,_touched$workout_imag2,_errors$workout_image2,_values$workout_image,_values$workout_image2;var values=_ref11.values,errors=_ref11.errors,touched=_ref11.touched,handleChange=_ref11.handleChange,setFieldValue=_ref11.setFieldValue,handleBlur=_ref11.handleBlur,setFieldTouched=_ref11.setFieldTouched,submitForm=_ref11.submitForm,isSubmitting=_ref11.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Workout name\",name:\"workout_name\",variant:\"outlined\",error:Boolean(touched.workout_name&&errors.workout_name),helperText:touched.workout_name&&errors.workout_name,value:values.workout_name,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,label:\"Workout description\",name:\"workout_description\",variant:\"outlined\",error:Boolean(touched.workout_description&&errors.workout_description),helperText:touched.workout_description&&errors.workout_description,value:values.workout_description,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,label:\"Workout type\",name:\"workout_type\",variant:\"outlined\",error:Boolean(touched.workout_type&&errors.workout_type),helperText:touched.workout_type&&errors.workout_type,value:values.workout_type,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(FieldArray,{name:\"workout_terms\",validateOnChange:true,children:function children(_ref12){var _values$workout_terms;var push=_ref12.push,remove=_ref12.remove;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,variant:\"contained\",color:\"default\",onClick:function onClick(){return addIngredients(values,push);},endIcon:/*#__PURE__*/_jsx(ControlPointIcon,{}),children:\"Add workout terms\"})}),values===null||values===void 0?void 0:(_values$workout_terms=values.workout_terms)===null||_values$workout_terms===void 0?void 0:_values$workout_terms.map(function(workoutValues,index){return/*#__PURE__*/_jsx(WorkoutTerms,{index:index},index);})]});}}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:/*#__PURE__*/_jsx(Autocomplete,{multiple:true,id:\"combo-box-demo\",options:equipmentList,value:equipmentList.filter(function(data){return values.required_equipments.map(function(_ref13){var id=_ref13.id;return id;}).includes(data._id);}),onChange:handleEquipmentChange,getOptionLabel:function getOptionLabel(option){return option.name;},renderInput:function renderInput(params){var _touched$required_equ,_errors$required_equi,_touched$required_equ2,_errors$required_equi2;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Equipments\",name:\"required_equipments\",variant:\"outlined\",error:Boolean((touched===null||touched===void 0?void 0:touched.required_equipments)&&(touched===null||touched===void 0?void 0:(_touched$required_equ=touched.required_equipments[0])===null||_touched$required_equ===void 0?void 0:_touched$required_equ.id)&&(errors===null||errors===void 0?void 0:errors.required_equipments)&&(errors===null||errors===void 0?void 0:(_errors$required_equi=errors.required_equipments[0])===null||_errors$required_equi===void 0?void 0:_errors$required_equi.id)),helperText:(touched===null||touched===void 0?void 0:touched.required_equipments)&&(touched===null||touched===void 0?void 0:(_touched$required_equ2=touched.required_equipments[0])===null||_touched$required_equ2===void 0?void 0:_touched$required_equ2.id)&&(errors===null||errors===void 0?void 0:errors.required_equipments)&&(errors===null||errors===void 0?void 0:(_errors$required_equi2=errors.required_equipments[0])===null||_errors$required_equi2===void 0?void 0:_errors$required_equi2.id),inputProps:_objectSpread({},params.inputProps)}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,error:Boolean((touched===null||touched===void 0?void 0:touched.how_to_do)&&(errors===null||errors===void 0?void 0:errors.how_to_do)),children:[/*#__PURE__*/_jsx(TipTapEditor,{value:values.how_to_do,onChange:function onChange(value){return setFieldValue('how_to_do',value);},onBlur:function onBlur(){return setFieldTouched('how_to_do',true,true);}}),/*#__PURE__*/_jsx(FormHelperText,{children:(touched===null||touched===void 0?void 0:touched.how_to_do)&&(errors===null||errors===void 0?void 0:errors.how_to_do)})]})}),/*#__PURE__*/_jsxs(Grid,{item:true,md:12,xs:12,children:[/*#__PURE__*/_jsx(\"input\",{name:\"recipe_image\",ref:imageRef,type:\"file\",accept:\".jpg,.png,jpeg\",onChange:onImageChange,onBlur:handleBlur,hidden:true}),/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,variant:\"contained\",color:\"default\",onClick:function onClick(){return imageRef.current.click();},startIcon:/*#__PURE__*/_jsx(CloudUploadIcon,{}),children:\"Workout image\"}),/*#__PURE__*/_jsx(FormControl,{error:Boolean((touched===null||touched===void 0?void 0:(_touched$workout_imag=touched.workout_image)===null||_touched$workout_imag===void 0?void 0:_touched$workout_imag.file)&&(errors===null||errors===void 0?void 0:(_errors$workout_image=errors.workout_image)===null||_errors$workout_image===void 0?void 0:_errors$workout_image.file)),children:/*#__PURE__*/_jsx(FormHelperText,{children:(touched===null||touched===void 0?void 0:(_touched$workout_imag2=touched.workout_image)===null||_touched$workout_imag2===void 0?void 0:_touched$workout_imag2.file)&&(errors===null||errors===void 0?void 0:(_errors$workout_image2=errors.workout_image)===null||_errors$workout_image2===void 0?void 0:_errors$workout_image2.file)})})]}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:((_values$workout_image=values.workout_image)===null||_values$workout_image===void 0?void 0:_values$workout_image.prevImage)&&/*#__PURE__*/_jsx(\"img\",{className:classes.imageView,src:(_values$workout_image2=values.workout_image)===null||_values$workout_image2===void 0?void 0:_values$workout_image2.prevImage})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,className:classes.lColor}):okBtnText})]})]});}})]});};var WorkoutTerms=function WorkoutTerms(props){var _FieldValue$image,_FieldTouched$image,_FieldError$image,_FieldTouched$image2,_FieldError$image2;var classes=useStyles();var FormikContext=useFormikContext();var values=FormikContext.values,errors=FormikContext.errors,touched=FormikContext.touched,setFieldValue=FormikContext.setFieldValue,handleBlur=FormikContext.handleBlur,handleChange=FormikContext.handleChange;// const [{ values, errors, touched, setFieldValue, handleBlur, handleChange }, setFormikContext]: any = useState(FormikContext);\nvar index=props.index;var imgRef=useRef(null);var FieldName=\"workout_terms[\".concat(index,\"]\");var FieldValue=getIn(values,\"workout_terms[\".concat(index,\"]\"));var FieldError=getIn(errors,\"workout_terms[\".concat(index,\"]\"));var FieldTouched=getIn(touched,\"workout_terms[\".concat(index,\"]\"));var onImageChange=function onImageChange(event){event.persist();var files=event.target.files;if(files&&files.length!=0){var reader=new FileReader();var file=files[0];reader.onloadend=function(){setFieldValue(\"\".concat(FieldName,\".image\"),{file:file,prevImage:reader.result,isNew:true});};reader.readAsDataURL(file);}else{setFieldValue(\"\".concat(FieldName,\".image\"),{file:null,prevImage:'',isNew:null});}};var removeTerm=function removeTerm(){var OldTerms=getIn(values,'workout_terms');var Terms=OldTerms.filter(function(d,i){return i!=index;});setFieldValue('workout_terms',Terms);};// useEffect(() => {\n//   setFormikContext(FormikContext)\n// }, [props])\nreturn/*#__PURE__*/_jsxs(Grid,{item:true,container:true,md:12,xs:12,direction:\"row\",spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,md:1,xs:12,children:[/*#__PURE__*/_jsx(\"input\",{name:\"\".concat(FieldName,\".image\"),ref:imgRef,type:\"file\",accept:\".jpg,.png,jpeg\",onChange:function onChange(e){return onImageChange(e);},onBlur:handleBlur,hidden:true}),/*#__PURE__*/_jsx(Avatar,{className:classes.workouttermsavatar,variant:\"square\",onClick:function onClick(){var _imgRef$current;return imgRef===null||imgRef===void 0?void 0:(_imgRef$current=imgRef.current)===null||_imgRef$current===void 0?void 0:_imgRef$current.click();},src:FieldValue===null||FieldValue===void 0?void 0:(_FieldValue$image=FieldValue.image)===null||_FieldValue$image===void 0?void 0:_FieldValue$image.prevImage}),/*#__PURE__*/_jsx(FormControl,{error:Boolean((FieldTouched===null||FieldTouched===void 0?void 0:(_FieldTouched$image=FieldTouched.image)===null||_FieldTouched$image===void 0?void 0:_FieldTouched$image.file)&&(FieldError===null||FieldError===void 0?void 0:(_FieldError$image=FieldError.image)===null||_FieldError$image===void 0?void 0:_FieldError$image.file)),children:/*#__PURE__*/_jsx(FormHelperText,{children:(FieldTouched===null||FieldTouched===void 0?void 0:(_FieldTouched$image2=FieldTouched.image)===null||_FieldTouched$image2===void 0?void 0:_FieldTouched$image2.file)&&(FieldError===null||FieldError===void 0?void 0:(_FieldError$image2=FieldError.image)===null||_FieldError$image2===void 0?void 0:_FieldError$image2.file)})})]}),/*#__PURE__*/_jsx(Grid,{item:true,md:5,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,label:\"Workout terms name\",name:\"\".concat(FieldName,\".name\"),variant:\"outlined\",error:Boolean((FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.name)&&(FieldError===null||FieldError===void 0?void 0:FieldError.name)),helperText:(FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.name)&&(FieldError===null||FieldError===void 0?void 0:FieldError.name),value:FieldValue.name,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,md:5,xs:8,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,label:\"Workout terms description\",name:\"\".concat(FieldName,\".description\"),variant:\"outlined\",error:Boolean((FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.description)&&(FieldError===null||FieldError===void 0?void 0:FieldError.description)),helperText:(FieldTouched===null||FieldTouched===void 0?void 0:FieldTouched.description)&&(FieldError===null||FieldError===void 0?void 0:FieldError.description),value:FieldValue.description,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,md:1,xs:4,children:(values===null||values===void 0?void 0:values.workout_terms.length)>1&&/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.deleteButton,variant:\"contained\",color:\"secondary\",onClick:function onClick(){return removeTerm();},children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]});};var ViewDailog=function ViewDailog(props){var _formValue$workout_im,_formValue$workout_te,_formValue$workout_te2,_formValue$required_e,_formValue$required_e2;var isOpen=props.isOpen,title=props.title,onClose=props.onClose,data=props.data;var classes=useStyles();var _useState17=useState(data),_useState18=_slicedToArray(_useState17,2),formValue=_useState18[0],setFormValue=_useState18[1];useEffect(function(){setFormValue(data);},[props]);return/*#__PURE__*/_jsxs(Dialog,{disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"dialog-view-title\",open:isOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-view-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:formValue===null||formValue===void 0?void 0:(_formValue$workout_im=formValue.workout_image)===null||_formValue$workout_im===void 0?void 0:_formValue$workout_im.url,alt:'Workout image',className:classes.imageView})}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"left\",className:classes.textPrimary,children:formValue===null||formValue===void 0?void 0:formValue.workout_name}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,className:classes.ingrdientsGridMain,justify:\"center\",children:[formValue===null||formValue===void 0?void 0:(_formValue$workout_te=formValue.workout_terms)===null||_formValue$workout_te===void 0?void 0:_formValue$workout_te.map(function(value,index){var _value$image;return/*#__PURE__*/_jsxs(Grid,{item:true,xs:4,md:3,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.ingredientsAvatarRoot,src:value===null||value===void 0?void 0:(_value$image=value.image)===null||_value$image===void 0?void 0:_value$image.url}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:value===null||value===void 0?void 0:value.name}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",align:\"center\",children:value.description.length>=25?\"\".concat(value.description.substring(0,30),\"...\"):value.description})]},index);}),(formValue===null||formValue===void 0?void 0:(_formValue$workout_te2=formValue.workout_terms)===null||_formValue$workout_te2===void 0?void 0:_formValue$workout_te2.length)==0&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,className:classes.noIngredientsText,children:/*#__PURE__*/_jsx(\"div\",{children:\"No workout terms added\"})})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"left\",className:classes.textSecondary,children:formValue===null||formValue===void 0?void 0:formValue.workout_description}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"left\",style:{color:'#41A58D'},className:classes.textPrimary,children:\"Equipments\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,className:classes.ingrdientsGridMain,justify:\"center\",children:[formValue===null||formValue===void 0?void 0:(_formValue$required_e=formValue.required_equipments)===null||_formValue$required_e===void 0?void 0:_formValue$required_e.map(function(value,index){var _value$image2;return/*#__PURE__*/_jsxs(Grid,{item:true,xs:4,md:3,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.ingredientsAvatarRoot,src:value===null||value===void 0?void 0:(_value$image2=value.image)===null||_value$image2===void 0?void 0:_value$image2.url}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:value===null||value===void 0?void 0:value.name})]},index);}),(formValue===null||formValue===void 0?void 0:(_formValue$required_e2=formValue.required_equipments)===null||_formValue$required_e2===void 0?void 0:_formValue$required_e2.length)==0&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,className:classes.noIngredientsText,children:/*#__PURE__*/_jsx(\"div\",{children:\"No Equipments Added\"})})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"left\",style:{color:'#41A58D'},children:\"How to do\"}),/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,className:classes.htmlContentGrid,children:/*#__PURE__*/_jsx(\"div\",{className:classes.htmlContent,dangerouslySetInnerHTML:{__html:formValue===null||formValue===void 0?void 0:formValue.how_to_do}})})})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Close\"})})]});};export default WorkoutExercise;","map":null,"metadata":{},"sourceType":"module"}