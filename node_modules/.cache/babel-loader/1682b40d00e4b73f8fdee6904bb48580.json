{"ast":null,"code":"import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Card,Table,TableBody,TableCell,TextField,TableRow,Typography,Button,Dialog,DialogActions,DialogContent,Grid,CircularProgress}from'@material-ui/core';import{makeStyles}from'@material-ui/styles';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import React,{useEffect,useState}from'react';import getDropValues,{CcpaStatus,NoOption}from'../../utils/PlanDropdowns';import{Autocomplete}from'@material-ui/lab';import clsx from'clsx';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import{cloneDeep}from'lodash';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{marginTop10:{marginTop:10},lColor:{color:'white'},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},noTextTransform:{textTransform:'none'}};});var AppUserCCPA=function AppUserCCPA(props){var _formData$ccpa_access,_formData$ccpa_access2,_formData$ccpa_access3,_formData$ccpa_access4,_formData$ccpa_access5,_formData$ccpa_share_,_formData$ccpa_share_2,_formData$ccpa_share_3,_formData$ccpa_delete,_formData$ccpa_delete2,_formData$ccpa_delete3,_formData$ccpa_delete4,_formData$ccpa_delete5;var classes=useStyles();var data=props.data,onRefresh=props.onRefresh;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];useEffect(function(){setFormData(data);},[props]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"GDPR\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Share your personal data\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.isSharePersonalData)=='0'?'No':'Yes'})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Protect your data\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.isProtectYourData)=='0'?'No':'Yes'})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Personal Information\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:formData.isPersonalInformation)=='0'?'No':'Yes'})]})]})})}),(formData===null||formData===void 0?void 0:formData.ccpa_access_data)&&/*#__PURE__*/_jsxs(\"div\",{className:classes.marginTop10,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"CCPA Access your data\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:(_formData$ccpa_access=formData.ccpa_access_data)===null||_formData$ccpa_access===void 0?void 0:_formData$ccpa_access.firstName)+' '+(formData===null||formData===void 0?void 0:(_formData$ccpa_access2=formData.ccpa_access_data)===null||_formData$ccpa_access2===void 0?void 0:_formData$ccpa_access2.lastName)}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_access3=formData.ccpa_access_data)===null||_formData$ccpa_access3===void 0?void 0:_formData$ccpa_access3.email}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"State\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_access4=formData.ccpa_access_data)===null||_formData$ccpa_access4===void 0?void 0:_formData$ccpa_access4.state}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$ccpa_access5=formData.ccpa_access_data)===null||_formData$ccpa_access5===void 0?void 0:_formData$ccpa_access5.status)}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.ccpa_access_data,apiUrl:'app/ccpaUpdateAccessData',onSuccess:onRefresh})})]})]})})})]}),(formData===null||formData===void 0?void 0:formData.ccpa_share_data)&&/*#__PURE__*/_jsxs(\"div\",{className:classes.marginTop10,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"CCPA Share your data\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_share_=formData.ccpa_share_data)===null||_formData$ccpa_share_===void 0?void 0:_formData$ccpa_share_.email}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"State\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_share_2=formData.ccpa_share_data)===null||_formData$ccpa_share_2===void 0?void 0:_formData$ccpa_share_2.state}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$ccpa_share_3=formData.ccpa_share_data)===null||_formData$ccpa_share_3===void 0?void 0:_formData$ccpa_share_3.status)}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.ccpa_share_data,apiUrl:'app/ccpaUpdateShareData',onSuccess:onRefresh})})]})]})})})]}),(formData===null||formData===void 0?void 0:formData.ccpa_delete_data)&&/*#__PURE__*/_jsxs(\"div\",{className:classes.marginTop10,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"CCPA Delete your data\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:(formData===null||formData===void 0?void 0:(_formData$ccpa_delete=formData.ccpa_delete_data)===null||_formData$ccpa_delete===void 0?void 0:_formData$ccpa_delete.firstName)+' '+(formData===null||formData===void 0?void 0:(_formData$ccpa_delete2=formData.ccpa_delete_data)===null||_formData$ccpa_delete2===void 0?void 0:_formData$ccpa_delete2.lastName)}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_delete3=formData.ccpa_delete_data)===null||_formData$ccpa_delete3===void 0?void 0:_formData$ccpa_delete3.email}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"State\"}),/*#__PURE__*/_jsx(TableCell,{children:formData===null||formData===void 0?void 0:(_formData$ccpa_delete4=formData.ccpa_delete_data)===null||_formData$ccpa_delete4===void 0?void 0:_formData$ccpa_delete4.state}),/*#__PURE__*/_jsx(TableCell,{})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:getDropValues(CcpaStatus,formData===null||formData===void 0?void 0:(_formData$ccpa_delete5=formData.ccpa_delete_data)===null||_formData$ccpa_delete5===void 0?void 0:_formData$ccpa_delete5.status)}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(ChangeStatusModel,{data:formData===null||formData===void 0?void 0:formData.ccpa_delete_data,apiUrl:'app/ccpaUpdateDeleteData',onSuccess:onRefresh})})]})]})})})]})]});};export var ChangeStatusModel=function ChangeStatusModel(props){var _props$data;var classes=useStyles();var onSuccess=props.onSuccess;var _useService=useService(),Post=_useService.Post;var Snackbar=useSnackbar();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),submitting=_useState6[0],setSubmitting=_useState6[1];var _useState7=useState(props===null||props===void 0?void 0:props.data),_useState8=_slicedToArray(_useState7,2),formData=_useState8[0],setFormData=_useState8[1];var _useState9=useState(props.apiUrl),_useState10=_slicedToArray(_useState9,2),apiUrl=_useState10[0],setApiUrl=_useState10[1];var _useState11=useState(props===null||props===void 0?void 0:(_props$data=props.data)===null||_props$data===void 0?void 0:_props$data.status),_useState12=_slicedToArray(_useState11,2),status=_useState12[0],setStatus=_useState12[1];var handleModel=function handleModel(){setIsOpen(!isOpen);setSubmitting(false);};var onSubmit=function onSubmit(){if(status==''){Snackbar.show('Status required','error');return;}setSubmitting(true);Post(apiUrl,{id:formData._id,status:status}).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);handleModel();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};useEffect(function(){var _cloneDeep=cloneDeep(props),data=_cloneDeep.data,apiUrl=_cloneDeep.apiUrl;var _cloneDeep2=cloneDeep(data),status=_cloneDeep2.status;setFormData(data);setStatus(status);setApiUrl(apiUrl);},[props,isOpen]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleModel,className:clsx(classes.themeButton,classes.noTextTransform),children:\"Change Status\"}),isOpen&&/*#__PURE__*/_jsxs(Dialog,{disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"sm\",\"aria-labelledby\":\"dialog-title\",open:isOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:handleModel,children:\"Change Status\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Autocomplete,{options:CcpaStatus,value:CcpaStatus.find(function(data){return data.id==status;})||NoOption,getOptionLabel:function getOptionLabel(option){return option.name;},getOptionSelected:function getOptionSelected(option){return option.id==status;},onChange:function onChange(event,newValue){setStatus((newValue===null||newValue===void 0?void 0:newValue.id)||'');},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Change Status\",variant:\"outlined\",inputProps:_objectSpread({},params.inputProps)}));}})})})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleModel,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return onSubmit();},variant:\"outlined\",children:submitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,className:classes.lColor}):'Change'})]})]})]});};export default AppUserCCPA;","map":{"version":3,"sources":["D:/Pyramidion/WebApp/Izze-Admin/src/pages/AppUsers/AppUserCCPA.tsx"],"names":["Card","Table","TableBody","TableCell","TextField","TableRow","Typography","Button","Dialog","DialogActions","DialogContent","Grid","CircularProgress","makeStyles","DialogTitle","React","useEffect","useState","getDropValues","CcpaStatus","NoOption","Autocomplete","clsx","useService","useSnackbar","cloneDeep","useStyles","theme","marginTop10","marginTop","lColor","color","themeButton","palette","white","backgroundColor","green","main","dark","noTextTransform","textTransform","AppUserCCPA","props","classes","data","onRefresh","formData","setFormData","isSharePersonalData","isProtectYourData","isPersonalInformation","ccpa_access_data","firstName","lastName","email","state","status","ccpa_share_data","ccpa_delete_data","ChangeStatusModel","onSuccess","Post","Snackbar","isOpen","setIsOpen","submitting","setSubmitting","apiUrl","setApiUrl","setStatus","handleModel","onSubmit","show","id","_id","then","res","message","catch","err","find","option","name","event","newValue","params","inputProps"],"mappings":"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","sourcesContent":["import {\r\n  Card, Table, TableBody, TableCell, TextField,\r\n  TableHead, TableRow, Typography, Button,\r\n  Dialog, DialogActions, DialogContent, Grid, CircularProgress\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport DialogTitle from '../../components/DialogTitlle/DialogTitle';\r\nimport React, { useEffect, useState } from 'react';\r\nimport getDropValues, { CcpaStatus, NoOption } from '../../utils/PlanDropdowns';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport clsx from 'clsx';\r\nimport useService from '../../hook/useService';\r\nimport useSnackbar from '../../hook/useSnackbar';\r\nimport { cloneDeep } from 'lodash';\r\n\r\nconst useStyles = makeStyles((theme: any) => ({\r\n  marginTop10: {\r\n    marginTop: 10\r\n  },\r\n  lColor: {\r\n    color: 'white',\r\n  },\r\n  themeButton: {\r\n    color: theme.palette.white,\r\n    backgroundColor: theme.palette.green.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.green.dark,\r\n    },\r\n  },\r\n  noTextTransform: {\r\n    textTransform: 'none'\r\n  }\r\n}));\r\n\r\nconst AppUserCCPA = (props: any) => {\r\n  const classes = useStyles();\r\n\r\n  const { data, onRefresh } = props;\r\n  const [formData, setFormData] = useState<any>({});\r\n  useEffect(() => {\r\n    setFormData(data)\r\n  }, [props]);\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"body1\">GDPR</Typography>\r\n      <Card>\r\n        <Table>\r\n          <TableBody>\r\n            <TableRow >\r\n              <TableCell>Share your personal data</TableCell>\r\n              <TableCell>{formData?.isSharePersonalData == '0' ? 'No' : 'Yes'}</TableCell>\r\n            </TableRow>\r\n            <TableRow >\r\n              <TableCell>Protect your data</TableCell>\r\n              <TableCell>{formData?.isProtectYourData == '0' ? 'No' : 'Yes'}</TableCell>\r\n            </TableRow>\r\n            <TableRow >\r\n              <TableCell>Personal Information</TableCell>\r\n              <TableCell>{formData?.isPersonalInformation == '0' ? 'No' : 'Yes'}</TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </Card>\r\n\r\n      {formData?.ccpa_access_data &&\r\n        <div className={classes.marginTop10}>\r\n          <Typography variant=\"body1\">CCPA Access your data</Typography>\r\n          <Card>\r\n            <Table>\r\n              <TableBody>\r\n                <TableRow >\r\n                  <TableCell>Name</TableCell>\r\n                  <TableCell>{formData?.ccpa_access_data?.firstName + ' ' + formData?.ccpa_access_data?.lastName}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>Email</TableCell>\r\n                  <TableCell>{formData?.ccpa_access_data?.email}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>State</TableCell>\r\n                  <TableCell>{formData?.ccpa_access_data?.state}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>Status</TableCell>\r\n                  <TableCell>{getDropValues(CcpaStatus, formData?.ccpa_access_data?.status)}</TableCell>\r\n                  <TableCell><ChangeStatusModel data={formData?.ccpa_access_data} apiUrl={'app/ccpaUpdateAccessData'} onSuccess={onRefresh} /></TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </Card>\r\n        </div>\r\n      }\r\n\r\n      {formData?.ccpa_share_data &&\r\n        <div className={classes.marginTop10}>\r\n          <Typography variant=\"body1\">CCPA Share your data</Typography>\r\n          <Card>\r\n            <Table>\r\n              <TableBody>\r\n                <TableRow >\r\n                  <TableCell>Email</TableCell>\r\n                  <TableCell>{formData?.ccpa_share_data?.email}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>State</TableCell>\r\n                  <TableCell>{formData?.ccpa_share_data?.state}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>Status</TableCell>\r\n                  <TableCell>{getDropValues(CcpaStatus, formData?.ccpa_share_data?.status)}</TableCell>\r\n                  <TableCell><ChangeStatusModel data={formData?.ccpa_share_data} apiUrl={'app/ccpaUpdateShareData'} onSuccess={onRefresh} /></TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </Card>\r\n        </div>\r\n      }\r\n\r\n      {formData?.ccpa_delete_data &&\r\n        <div className={classes.marginTop10}>\r\n          <Typography variant=\"body1\">CCPA Delete your data</Typography>\r\n          <Card>\r\n            <Table>\r\n              <TableBody>\r\n                <TableRow >\r\n                  <TableCell>Name</TableCell>\r\n                  <TableCell>{formData?.ccpa_delete_data?.firstName + ' ' + formData?.ccpa_delete_data?.lastName}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>Email</TableCell>\r\n                  <TableCell>{formData?.ccpa_delete_data?.email}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>State</TableCell>\r\n                  <TableCell>{formData?.ccpa_delete_data?.state}</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n                <TableRow >\r\n                  <TableCell>Status</TableCell>\r\n                  <TableCell>{getDropValues(CcpaStatus, formData?.ccpa_delete_data?.status)}</TableCell>\r\n                  <TableCell><ChangeStatusModel data={formData?.ccpa_delete_data} apiUrl={'app/ccpaUpdateDeleteData'} onSuccess={onRefresh} /></TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </Card>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport const ChangeStatusModel = (props: any) => {\r\n  const classes = useStyles();\r\n  const { onSuccess } = props;\r\n  const { Post } = useService();\r\n  const Snackbar = useSnackbar();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const [formData, setFormData] = useState(props?.data);\r\n  const [apiUrl, setApiUrl] = useState(props.apiUrl);\r\n  const [status, setStatus] = useState(props?.data?.status);\r\n\r\n  const handleModel = () => {\r\n    setIsOpen(!isOpen);\r\n    setSubmitting(false);\r\n  }\r\n\r\n  const onSubmit = () => {\r\n    if (status == '') {\r\n      Snackbar.show('Status required', 'error');\r\n      return\r\n    }\r\n    setSubmitting(true);\r\n    Post(apiUrl, { id: formData._id, status })\r\n      .then((res: any) => {\r\n        Snackbar.show(res.message, 'success');\r\n        setSubmitting(false);\r\n        handleModel();\r\n        onSuccess()\r\n      })\r\n      .catch((err: any) => {\r\n        setSubmitting(false);\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    const { data, apiUrl } = cloneDeep(props)\r\n    const { status } = cloneDeep(data)\r\n    setFormData(data)\r\n    setStatus(status)\r\n    setApiUrl(apiUrl)\r\n  }, [props, isOpen])\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={handleModel} className={clsx(classes.themeButton, classes.noTextTransform)}>Change Status</Button>\r\n      {isOpen &&\r\n        <Dialog\r\n          disableBackdropClick\r\n          disableEscapeKeyDown\r\n          fullWidth\r\n          maxWidth='sm'\r\n          aria-labelledby='dialog-title'\r\n          open={isOpen}\r\n        >\r\n          <DialogTitle id='dialog-title' onClose={handleModel}>Change Status</DialogTitle>\r\n          <DialogContent>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12}>\r\n                <Autocomplete\r\n                  options={CcpaStatus}\r\n                  value={CcpaStatus.find((data: any) => data.id == status) || NoOption}\r\n                  getOptionLabel={(option: any) => option.name}\r\n                  getOptionSelected={(option) => option.id == status}\r\n                  onChange={(event: any, newValue: any) => {\r\n                    setStatus(newValue?.id || '');\r\n                  }}\r\n                  renderInput={(params: any) => (\r\n                    <TextField\r\n                      {...params}\r\n                      label='Change Status'\r\n                      variant='outlined'\r\n                      inputProps={{\r\n                        ...params.inputProps,\r\n                      }}\r\n                    />\r\n                  )}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </DialogContent>\r\n\r\n          <DialogActions>\r\n            <Button onClick={handleModel} variant='outlined' color='secondary'>Cancel</Button>\r\n            <Button className={classes.themeButton} onClick={() => onSubmit()} variant='outlined'>\r\n              {submitting ? <CircularProgress size={24} className={classes.lColor} /> : 'Change'}\r\n            </Button>\r\n          </DialogActions>\r\n\r\n        </Dialog>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AppUserCCPA;\r\n"]},"metadata":{},"sourceType":"module"}