{"ast":null,"code":"import _objectWithoutProperties from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _toConsumableArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar,Button,Card,CardActions,CardContent,CircularProgress,Dialog,DialogActions,DialogContent,FormControl,FormHelperText,Grid,IconButton,makeStyles,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TextField,Tooltip,Typography}from'@material-ui/core';import AddIcon from'@material-ui/icons/Add';import CenterFocusStrongIcon from'@material-ui/icons/CenterFocusStrong';import CloudUploadIcon from'@material-ui/icons/CloudUpload';import ControlPointIcon from'@material-ui/icons/ControlPoint';import DeleteIcon from'@material-ui/icons/Delete';import EditIcon from'@material-ui/icons/Edit';import{Pagination}from'@material-ui/lab';import{Formik}from'formik';import React,{useEffect,useRef,useState}from'react';import*as Yup from'yup';import DialogTitle from'../../components/DialogTitlle/DialogTitle';import{TableLoader,TableNoData}from'../../components/Loader/Loader';import Page from'../../components/Page/Page';import UnitSelect from'../../components/UnitSelect/UnitSelect';import UnitDropdown from'../../utils/MetricUnits';import useConfModel from'../../hook/useConfModel';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import{uploadNewImage}from'../../utils/CloudinaryUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:theme.breakpoints.values.lg,maxWidth:'100%',margin:'0 auto',padding:theme.spacing(3)},content:{padding:0},tabCard:{marginTop:theme.spacing(3)},themeButton:{color:theme.palette.white,backgroundColor:theme.palette.green.main,'&:hover':{backgroundColor:theme.palette.green.dark}},sEvenly:{display:'flex',justifyContent:'space-evenly'},iconPadd:{padding:5},jCenter:{display:'flex',justifyContent:'center'},actions:{padding:theme.spacing(1),justifyContent:'center'},deleteButton:{width:'100%',height:'50px'},imageView:{width:'100%',height:'100%'},textareaAdornedEnd:{paddingRight:0}};});function NutritionIngredients(){var classes=useStyles();var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var Snackbar=useSnackbar();var ConfModel=useConfModel();var _useService=useService(),Post=_useService.Post;var _useState=useState({page_no:1,page_limit:10}),_useState2=_slicedToArray(_useState,2),stateData=_useState2[0],setStateData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pageCount=_useState4[0],setPageCount=_useState4[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),ingredientList=_React$useState4[0],setIngredientList=_React$useState4[1];var _React$useState5=React.useState({isOpen:false,title:'',okBtnText:'',isEdit:false,data:{}}),_React$useState6=_slicedToArray(_React$useState5,2),addEditDialog=_React$useState6[0],setAddEditDialog=_React$useState6[1];var _useState5=useState({isOpen:false,title:'',data:{}}),_useState6=_slicedToArray(_useState5,2),viewDialog=_useState6[0],setViewDialog=_useState6[1];var listNutritionIngredient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);Post('app/listMealIngredient',stateData).then(function(res){setLoading(false);if(!res.error){setIngredientList(res.data);setPageCount(res.page_count);}else{Snackbar.show(res.message,'error');}}).catch(function(err){console.log('err',err);setLoading(false);Snackbar.show(err.message,'error');});case 2:case\"end\":return _context.stop();}}},_callee);}));return function listNutritionIngredient(){return _ref.apply(this,arguments);};}();var onPageChange=function onPageChange(event,value){setStateData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{page_no:value});});};var openAddDialog=function openAddDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,title:'Add Nutrition Ingredients',isEdit:false,okBtnText:'Save'});});};var openEditDialog=function openEditDialog(data){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,isEdit:true,data:data,title:'Edit Nutrition Ingredients',okBtnText:'Edit'});});};var openViewDialog=function openViewDialog(data){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:true,data:data,title:'View Nutrition Ingredient'});});};var onDelete=function onDelete(data){var openModel=ConfModel.openModel,setLoading=ConfModel.setLoading,closeModel=ConfModel.closeModel;var submitFunction=function submitFunction(){setLoading(true);Post('app/deleteMealIngredient',{id:data._id}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(false);closeModel();onSuccessAction();Snackbar.show(res.message,'success');case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){setLoading(false);Snackbar.show('Internal Server Error','error');});};openModel(submitFunction);};var closeViewDialog=function closeViewDialog(){setViewDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false});});};var closeAddEditDialog=function closeAddEditDialog(){setAddEditDialog(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isOpen:false});});};var setElipsis=function setElipsis(text){return(text===null||text===void 0?void 0:text.length)>=25?\"\".concat(text.substring(0,40),\"...\"):text;};var onSuccessAction=function onSuccessAction(){listNutritionIngredient();closeAddEditDialog();};useEffect(function(){listNutritionIngredient();},[stateData]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Page,{title:\"Nutrition Ingredients\"}),/*#__PURE__*/_jsxs(Grid,{alignItems:\"flex-end\",container:true,justify:\"space-between\",spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h3\",children:\"Nutrition Ingredients\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return openAddDialog();},className:classes.themeButton,startIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Add\"})})]}),/*#__PURE__*/_jsxs(Card,{className:classes.tabCard,children:[/*#__PURE__*/_jsx(CardContent,{className:classes.content,children:/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"#\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Image\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Description\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[!loading&&ingredientList.map(function(data,index){var _data$image;return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:stateData.page_limit*(stateData.page_no-1)+index+1}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:classes.jCenter,children:/*#__PURE__*/_jsx(Avatar,{variant:\"square\",src:data===null||data===void 0?void 0:(_data$image=data.image)===null||_data$image===void 0?void 0:_data$image.url})})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:data===null||data===void 0?void 0:data.name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Tooltip,{title:data===null||data===void 0?void 0:data.description,children:/*#__PURE__*/_jsx(\"span\",{children:setElipsis(data===null||data===void 0?void 0:data.description)})})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.sEvenly,children:[/*#__PURE__*/_jsx(Tooltip,{title:\"View\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openViewDialog(data);},children:/*#__PURE__*/_jsx(CenterFocusStrongIcon,{color:\"primary\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Edit\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return openEditDialog(data);},children:/*#__PURE__*/_jsx(EditIcon,{color:\"action\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Delete\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{className:classes.iconPadd,onClick:function onClick(){return onDelete(data);},children:/*#__PURE__*/_jsx(DeleteIcon,{color:\"secondary\"})})})]})})]},index);}),loading&&/*#__PURE__*/_jsx(TableLoader,{}),!loading&&ingredientList.length==0&&/*#__PURE__*/_jsx(TableNoData,{children:\"No Data Found\"})]})]})})}),/*#__PURE__*/_jsx(CardActions,{className:classes.actions,children:/*#__PURE__*/_jsx(Pagination,{count:pageCount,page:stateData.page_no,onChange:onPageChange})})]}),/*#__PURE__*/_jsx(AddandEditDialogue,_objectSpread(_objectSpread({},addEditDialog),{},{onClose:closeAddEditDialog,onSuccess:onSuccessAction})),viewDialog.isOpen&&/*#__PURE__*/_jsx(ViewIngredientModel,_objectSpread(_objectSpread({},viewDialog),{},{onClose:closeViewDialog}))]});}var AddandEditDialogue=function AddandEditDialogue(props){var isEdit=props.isEdit,isOpen=props.isOpen,_props$okBtnText=props.okBtnText,okBtnText=_props$okBtnText===void 0?'OK':_props$okBtnText,onClose=props.onClose,data=props.data,title=props.title,onSuccess=props.onSuccess;var classes=useStyles();var formikRef=useRef(null);var imageRef=useRef(null);var Snackbar=useSnackbar();var _useService2=useService(),Post=_useService2.Post;var initialValues={nutrientName:'',image:{file:null,prevImage:'',isNew:null},quantity:'',protein:'',quantity_unit:'',fat:'',carbs:'',calories:'',benfits:[],description:''};var _React$useState7=React.useState(_objectSpread({},initialValues)),_React$useState8=_slicedToArray(_React$useState7,2),initialFormValues=_React$useState8[0],setInitialFormValues=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),addBenifits=_React$useState10[0],setAddBenifits=_React$useState10[1];var handleAddBenifits=function handleAddBenifits(event){event.preventDefault();var dummyData=[].concat(_toConsumableArray(addBenifits),['']);setAddBenifits(dummyData);formikRef.current.setFieldValue('benfits',dummyData);};var removeBenifits=function removeBenifits(item){var deleteBenifitsData=_toConsumableArray(addBenifits);deleteBenifitsData.splice(deleteBenifitsData.indexOf(item),1);formikRef.current.setFieldValue('benfits',deleteBenifitsData);setAddBenifits(deleteBenifitsData);};var handleBenifitChange=function handleBenifitChange(event,index){addBenifits[index]=event.target.value;formikRef.current.setFieldValue('benfits',_toConsumableArray(addBenifits));};var onSubmit=function onSubmit(value,helper){try{helper.setSubmitting(true);var renderSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var image,nutrientName,rest,postData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:image=value.image,nutrientName=value.nutrientName,rest=_objectWithoutProperties(value,[\"image\",\"nutrientName\"]);postData=rest;postData.name=nutrientName;_context3.next=5;return uploadNewImage(image);case 5:postData.image=_context3.sent;!isEdit&&addData(postData,helper);isEdit&&editData(postData,helper);case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function renderSubmit(){return _ref3.apply(this,arguments);};}();renderSubmit();}catch(_unused){Snackbar.show('Image Upload Failed','error');}};var addData=function addData(data,_ref4){var setSubmitting=_ref4.setSubmitting,resetForm=_ref4.resetForm;setSubmitting(true);Post('app/addMealIngredient',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var editData=function editData(data,_ref5){var setSubmitting=_ref5.setSubmitting,resetForm=_ref5.resetForm;setSubmitting(true);Post('app/editMealIngredient',data).then(function(res){Snackbar.show(res.message,'success');setSubmitting(false);resetForm();onSuccess();}).catch(function(err){setSubmitting(false);Snackbar.show(err.message,'error');});};var onImageChange=function onImageChange(e){e.persist();var files=e.target.files;if(files&&files.length!=0){var reader=new FileReader();var file=files[0];reader.onloadend=function(){formikRef.current.setFieldValue('image',{file:file,prevImage:reader.result,isNew:true});};reader.readAsDataURL(file);}// else {\n//   formikRef.current.setFieldValue('image', {\n//     file: null,\n//     prevImage: '',\n//     isNew: null,\n//   });\n// }\n};useEffect(function(){if(isEdit){var name=data.name,image=data.image,_id=data._id,rest=_objectWithoutProperties(data,[\"name\",\"image\",\"_id\"]);var _editData=_objectSpread(_objectSpread({},rest),{},{id:_id});_editData.nutrientName=name;_editData.image={file:image,isNew:false,prevImage:image===null||image===void 0?void 0:image.url};setAddBenifits(data.benfits);setInitialFormValues(_editData);}else{setInitialFormValues(initialValues);}},[props]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Dialog,{open:isOpen,disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"md\",\"aria-labelledby\":\"dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsx(Formik,{innerRef:formikRef,enableReinitialize:true,initialValues:initialFormValues,onSubmit:onSubmit,validationSchema:Yup.object().shape({nutrientName:Yup.string().trim().required('Name is required'),quantity:Yup.number().typeError('Quantity must be in number').required('Quality is required'),protein:Yup.number().typeError('Protein must be in number').required('Protein is required'),quantity_unit:Yup.string().trim().required('Quantity unit is required'),fat:Yup.number().typeError('Fat must be in number').required('Fat is required'),carbs:Yup.number().typeError('Carbs must be in number').required('Carbs is required'),calories:Yup.number().typeError('Calories must be in number').required('Calories is required'),description:Yup.string().trim().max(250,'Must be 250 characters or less').required('Description is required'),image:Yup.object({file:Yup.mixed().required('A file is required')}),benfits:Yup.array().of(Yup.string().required('Benefits is required'))}),children:function children(_ref6){var _values$benfits,_touched$image,_errors$image,_touched$image2,_errors$image2,_values$image,_values$image2;var values=_ref6.values,errors=_ref6.errors,touched=_ref6.touched,handleBlur=_ref6.handleBlur,handleChange=_ref6.handleChange,submitForm=_ref6.submitForm,isSubmitting=_ref6.isSubmitting;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Name\",name:\"nutrientName\",variant:\"outlined\",error:Boolean(touched.nutrientName&&errors.nutrientName),helperText:touched.nutrientName&&errors.nutrientName,value:values.nutrientName,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Quantity\",name:\"quantity\",variant:\"outlined\",error:Boolean(touched.quantity&&errors.quantity)||Boolean(touched.quantity_unit&&errors.quantity_unit),helperText:touched.quantity&&errors.quantity||touched.quantity_unit&&errors.quantity_unit,value:values.quantity,onChange:handleChange,onBlur:handleBlur,InputProps:{classes:{adornedEnd:classes.textareaAdornedEnd},endAdornment:/*#__PURE__*/_jsx(UnitSelect,{id:\"quantity_unit\",option:UnitDropdown,name:\"quantity_unit\",value:values.quantity_unit,onChange:handleChange,onBlur:handleBlur})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Protein ( g )\",name:\"protein\",variant:\"outlined\",error:Boolean(touched.protein&&errors.protein),helperText:touched.protein&&errors.protein,value:values.protein,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Fat ( g )\",name:\"fat\",variant:\"outlined\",error:Boolean(touched.fat&&errors.fat),helperText:touched.fat&&errors.fat,value:values.fat,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Carbs ( g )\",name:\"carbs\",variant:\"outlined\",error:Boolean(touched.carbs&&errors.carbs),helperText:touched.carbs&&errors.carbs,value:values.carbs,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Calories ( kcal )\",name:\"calories\",variant:\"outlined\",error:Boolean(touched.calories&&errors.calories),helperText:touched.calories&&errors.calories,value:values.calories,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,variant:\"contained\",color:\"default\",onClick:function onClick(e){return handleAddBenifits(e);},endIcon:/*#__PURE__*/_jsx(ControlPointIcon,{}),children:\"Add Benefits\"})}),values===null||values===void 0?void 0:(_values$benfits=values.benfits)===null||_values$benfits===void 0?void 0:_values$benfits.map(function(data,index){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:11,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Benefits\",name:\"benfits[\".concat(index,\"]\"),variant:\"outlined\",error:Boolean((touched===null||touched===void 0?void 0:touched.benfits)&&(touched===null||touched===void 0?void 0:touched.benfits[index])&&(errors===null||errors===void 0?void 0:errors.benfits)&&(errors===null||errors===void 0?void 0:errors.benfits[index])),helperText:(touched===null||touched===void 0?void 0:touched.benfits)&&(touched===null||touched===void 0?void 0:touched.benfits[index])&&(errors===null||errors===void 0?void 0:errors.benfits)&&(errors===null||errors===void 0?void 0:errors.benfits[index]),value:data,onChange:function onChange(e){return handleBenifitChange(e,index);},onBlur:handleBlur})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:1,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.deleteButton,variant:\"contained\",color:\"secondary\",onClick:function onClick(){return removeBenifits(data);},children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]});}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,label:\"Description\",name:\"description\",variant:\"outlined\",error:Boolean(touched.description&&errors.description),helperText:touched.description&&errors.description,value:values.description,onChange:handleChange,onBlur:handleBlur})}),/*#__PURE__*/_jsxs(Grid,{item:true,md:12,xs:12,children:[/*#__PURE__*/_jsx(\"input\",{name:\"image\",ref:imageRef,type:\"file\",accept:\".jpg,.png,jpeg\",onChange:onImageChange,onBlur:handleBlur,hidden:true}),/*#__PURE__*/_jsx(Button,{fullWidth:true,className:classes.themeButton,variant:\"contained\",color:\"default\",onClick:function onClick(){return imageRef.current.click();},startIcon:/*#__PURE__*/_jsx(CloudUploadIcon,{}),children:\"Upload Image\"}),/*#__PURE__*/_jsx(FormControl,{error:Boolean((touched===null||touched===void 0?void 0:(_touched$image=touched.image)===null||_touched$image===void 0?void 0:_touched$image.file)&&(errors===null||errors===void 0?void 0:(_errors$image=errors.image)===null||_errors$image===void 0?void 0:_errors$image.file)),children:/*#__PURE__*/_jsx(FormHelperText,{children:(touched===null||touched===void 0?void 0:(_touched$image2=touched.image)===null||_touched$image2===void 0?void 0:_touched$image2.file)&&(errors===null||errors===void 0?void 0:(_errors$image2=errors.image)===null||_errors$image2===void 0?void 0:_errors$image2.file)})})]}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:((_values$image=values.image)===null||_values$image===void 0?void 0:_values$image.prevImage)&&/*#__PURE__*/_jsx(\"img\",{className:classes.imageView,src:(_values$image2=values.image)===null||_values$image2===void 0?void 0:_values$image2.prevImage})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{className:classes.themeButton,onClick:function onClick(){return submitForm();},disabled:isSubmitting,variant:\"outlined\",children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24,style:{color:'white'}}):okBtnText})]})]});}})]})});};var ViewIngredientModel=function ViewIngredientModel(props){var _formValue$benfits,_formValue$image;var isOpen=props.isOpen,title=props.title,onClose=props.onClose,data=props.data;var classes=useStyles();var _useState7=useState(data),_useState8=_slicedToArray(_useState7,2),formValue=_useState8[0],setFormValue=_useState8[1];console.log(formValue);useEffect(function(){setFormValue(data);},[props]);return/*#__PURE__*/_jsxs(Dialog,{disableBackdropClick:true,disableEscapeKeyDown:true,fullWidth:true,maxWidth:\"md\",\"aria-labelledby\":\"dialog-view-title\",open:isOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"dialog-view-title\",onClose:onClose,children:title}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(Table,{children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:formValue===null||formValue===void 0?void 0:formValue.name})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Calories\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[formValue===null||formValue===void 0?void 0:formValue.calories,\" Kcal\"]})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Carbs\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[formValue===null||formValue===void 0?void 0:formValue.carbs,\" g\"]})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Fat\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[formValue===null||formValue===void 0?void 0:formValue.fat,\" g\"]})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Protein\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[formValue===null||formValue===void 0?void 0:formValue.protein,\" g\"]})})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Quantity\"}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[formValue===null||formValue===void 0?void 0:formValue.quantity,\" \",formValue===null||formValue===void 0?void 0:formValue.quantity_unit]})})]})]})})}),/*#__PURE__*/_jsx(Paper,{style:{marginTop:'20px'},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"#\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Benifits\"})})]})}),/*#__PURE__*/_jsx(TableBody,{children:formValue===null||formValue===void 0?void 0:(_formValue$benfits=formValue.benfits)===null||_formValue$benfits===void 0?void 0:_formValue$benfits.map(function(item,index){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:index+1}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:item})]});})})]})}),/*#__PURE__*/_jsx(Typography,{style:{marginTop:'20px'},variant:\"h4\",children:\"Description\"}),/*#__PURE__*/_jsx(Typography,{style:{marginTop:'10px'},variant:\"h5\",children:formValue===null||formValue===void 0?void 0:formValue.description}),/*#__PURE__*/_jsx(Grid,{style:{marginTop:'20px'},container:true,children:/*#__PURE__*/_jsx(Grid,{item:true,md:12,xs:12,children:(formValue===null||formValue===void 0?void 0:formValue.image)&&/*#__PURE__*/_jsx(\"img\",{className:classes.imageView,src:formValue===null||formValue===void 0?void 0:(_formValue$image=formValue.image)===null||_formValue$image===void 0?void 0:_formValue$image.url})})})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outlined\",color:\"secondary\",children:\"Close\"})})]});};export default NutritionIngredients;","map":{"version":3,"sources":["D:/Pyramidion/WebApp/Izze-Admin/src/pages/NutritionIngredients/NutritionIngredients.tsx"],"names":["Avatar","Button","Card","CardActions","CardContent","CircularProgress","Dialog","DialogActions","DialogContent","FormControl","FormHelperText","Grid","IconButton","makeStyles","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TextField","Tooltip","Typography","AddIcon","CenterFocusStrongIcon","CloudUploadIcon","ControlPointIcon","DeleteIcon","EditIcon","Pagination","Formik","React","useEffect","useRef","useState","Yup","DialogTitle","TableLoader","TableNoData","Page","UnitSelect","UnitDropdown","useConfModel","useService","useSnackbar","uploadNewImage","useStyles","theme","root","width","breakpoints","values","lg","maxWidth","margin","padding","spacing","content","tabCard","marginTop","themeButton","color","palette","white","backgroundColor","green","main","dark","sEvenly","display","justifyContent","iconPadd","jCenter","actions","deleteButton","height","imageView","textareaAdornedEnd","paddingRight","NutritionIngredients","classes","loading","setLoading","Snackbar","ConfModel","Post","page_no","page_limit","stateData","setStateData","pageCount","setPageCount","ingredientList","setIngredientList","isOpen","title","okBtnText","isEdit","data","addEditDialog","setAddEditDialog","viewDialog","setViewDialog","listNutritionIngredient","then","res","error","page_count","show","message","catch","err","console","log","onPageChange","event","value","prevState","openAddDialog","openEditDialog","openViewDialog","onDelete","openModel","closeModel","submitFunction","id","_id","onSuccessAction","closeViewDialog","closeAddEditDialog","setElipsis","text","length","substring","map","index","image","url","name","description","AddandEditDialogue","props","onClose","onSuccess","formikRef","imageRef","initialValues","nutrientName","file","prevImage","isNew","quantity","protein","quantity_unit","fat","carbs","calories","benfits","initialFormValues","setInitialFormValues","addBenifits","setAddBenifits","handleAddBenifits","preventDefault","dummyData","current","setFieldValue","removeBenifits","item","deleteBenifitsData","splice","indexOf","handleBenifitChange","target","onSubmit","helper","setSubmitting","renderSubmit","rest","postData","addData","editData","resetForm","onImageChange","e","persist","files","reader","FileReader","onloadend","result","readAsDataURL","object","shape","string","trim","required","number","typeError","max","mixed","array","of","errors","touched","handleBlur","handleChange","submitForm","isSubmitting","Boolean","adornedEnd","endAdornment","click","ViewIngredientModel","formValue","setFormValue"],"mappings":"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","sourcesContent":["import { Avatar, Button, Card, CardActions, CardContent, CircularProgress, Dialog, DialogActions, DialogContent, FormControl, FormHelperText, Grid, IconButton, makeStyles, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TextField, Tooltip, Typography } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CenterFocusStrongIcon from '@material-ui/icons/CenterFocusStrong';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { Pagination } from '@material-ui/lab';\r\nimport { Formik } from 'formik';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport * as Yup from 'yup';\r\nimport DialogTitle from '../../components/DialogTitlle/DialogTitle';\r\nimport { TableLoader, TableNoData } from '../../components/Loader/Loader';\r\nimport Page from '../../components/Page/Page';\r\nimport UnitSelect from '../../components/UnitSelect/UnitSelect';\r\nimport UnitDropdown from '../../utils/MetricUnits';\r\nimport useConfModel from '../../hook/useConfModel';\r\nimport useService from '../../hook/useService';\r\nimport useSnackbar from '../../hook/useSnackbar';\r\nimport { imageUpload } from '../../utils/FirebaseUtils';\r\nimport { uploadNewImage } from '../../utils/CloudinaryUtils';\r\n\r\nconst useStyles = makeStyles((theme: any) => ({\r\n  root: {\r\n    width: theme.breakpoints.values.lg,\r\n    maxWidth: '100%',\r\n    margin: '0 auto',\r\n    padding: theme.spacing(3),\r\n  },\r\n  content: {\r\n    padding: 0,\r\n  },\r\n  tabCard: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  themeButton: {\r\n    color: theme.palette.white,\r\n    backgroundColor: theme.palette.green.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.green.dark,\r\n    },\r\n  },\r\n  sEvenly: {\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n  },\r\n  iconPadd: {\r\n    padding: 5,\r\n  },\r\n  jCenter: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n  },\r\n  actions: {\r\n    padding: theme.spacing(1),\r\n    justifyContent: 'center',\r\n  },\r\n  deleteButton: {\r\n    width: '100%',\r\n    height: '50px',\r\n  },\r\n  imageView: {\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  textareaAdornedEnd: {\r\n    paddingRight: 0\r\n  },\r\n}));\r\n\r\nfunction NutritionIngredients() {\r\n  const classes = useStyles()\r\n  const [loading, setLoading] = React.useState(true)\r\n  const Snackbar = useSnackbar();\r\n  const ConfModel = useConfModel();\r\n  const { Post } = useService();\r\n  const [stateData, setStateData] = useState({ page_no: 1, page_limit: 10 });\r\n  const [pageCount, setPageCount] = useState(0);\r\n  const [ingredientList, setIngredientList] = React.useState([])\r\n  const [addEditDialog, setAddEditDialog] = React.useState({\r\n    isOpen: false,\r\n    title: '',\r\n    okBtnText: '',\r\n    isEdit: false,\r\n    data: {},\r\n  });\r\n  const [viewDialog, setViewDialog] = useState({\r\n    isOpen: false,\r\n    title: '',\r\n    data: {},\r\n  });\r\n\r\n  const listNutritionIngredient = async () => {\r\n    setLoading(true);\r\n    Post('app/listMealIngredient', stateData)\r\n      .then((res: any) => {\r\n        setLoading(false);\r\n        if (!res.error) {\r\n          setIngredientList(res.data);\r\n          setPageCount(res.page_count);\r\n        } else {\r\n          Snackbar.show(res.message, 'error');\r\n        }\r\n      })\r\n      .catch((err: any) => {\r\n        console.log('err', err);\r\n        setLoading(false);\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  };\r\n\r\n  const onPageChange = (event: React.ChangeEvent<unknown>, value: number) => {\r\n    setStateData((prevState: any) => ({ ...prevState, page_no: value }));\r\n  };\r\n\r\n  const openAddDialog = () => {\r\n    setAddEditDialog((prevState: any) => ({\r\n      ...prevState,\r\n      isOpen: true,\r\n      title: 'Add Nutrition Ingredients',\r\n      isEdit: false,\r\n      okBtnText: 'Save',\r\n    }));\r\n  };\r\n\r\n  const openEditDialog = (data: any) => {\r\n    setAddEditDialog((prevState: any) => ({\r\n      ...prevState,\r\n      isOpen: true,\r\n      isEdit: true,\r\n      data,\r\n      title: 'Edit Nutrition Ingredients',\r\n      okBtnText: 'Edit',\r\n    }));\r\n  };\r\n\r\n  const openViewDialog = (data: any) => {\r\n    setViewDialog((prevState: any) => ({\r\n      ...prevState,\r\n      isOpen: true,\r\n      data,\r\n      title: 'View Nutrition Ingredient',\r\n    }));\r\n  };\r\n\r\n  const onDelete = (data: any) => {\r\n    const { openModel, setLoading, closeModel } = ConfModel;\r\n    const submitFunction = () => {\r\n      setLoading(true);\r\n      Post('app/deleteMealIngredient', { id: data._id })\r\n        .then(async (res: any) => {\r\n          setLoading(false);\r\n          closeModel();\r\n          onSuccessAction();\r\n          Snackbar.show(res.message, 'success');\r\n        })\r\n        .catch((err: any) => {\r\n          setLoading(false);\r\n          Snackbar.show('Internal Server Error', 'error');\r\n        });\r\n    };\r\n    openModel(submitFunction);\r\n  };\r\n\r\n  const closeViewDialog = () => {\r\n    setViewDialog((prevState: any) => ({ ...prevState, isOpen: false }));\r\n  };\r\n\r\n  const closeAddEditDialog = () => {\r\n    setAddEditDialog((prevState: any) => ({ ...prevState, isOpen: false }));\r\n  }\r\n\r\n  const setElipsis = (text: any) => {\r\n    return text?.length >= 25 ? `${text.substring(0, 40)}...` : text;\r\n  };\r\n\r\n  const onSuccessAction = () => {\r\n    listNutritionIngredient();\r\n    closeAddEditDialog();\r\n  };\r\n\r\n  useEffect(() => {\r\n    listNutritionIngredient();\r\n  }, [stateData]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Page title='Nutrition Ingredients' />\r\n\r\n      <Grid alignItems='flex-end' container justify='space-between' spacing={3}>\r\n        <Grid item>\r\n          <Typography component='h1' variant='h3'>\r\n            Nutrition Ingredients\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button\r\n            variant='contained'\r\n            onClick={() => openAddDialog()}\r\n            className={classes.themeButton}\r\n            startIcon={<AddIcon />}\r\n          >\r\n            Add\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* =============Search======== */}\r\n      {/* <Grid container spacing={3}>\r\n        <Grid item>\r\n          <Paper elevation={0}>\r\n            <TextField\r\n              fullWidth\r\n              size='small'\r\n              placeholder='Name'\r\n              variant='outlined'\r\n              name='state'\r\n            />\r\n          </Paper>\r\n        </Grid>\r\n      </Grid> */}\r\n\r\n      <Card className={classes.tabCard}>\r\n        <CardContent className={classes.content}>\r\n          <TableContainer>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell align='center'>#</TableCell>\r\n                  <TableCell align='center'>Image</TableCell>\r\n                  <TableCell align='center'>Name</TableCell>\r\n                  <TableCell align='center'>Description</TableCell>\r\n                  <TableCell align='center'>Actions</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {!loading &&\r\n                  ingredientList.map((data: any, index: number) => (\r\n                    <TableRow hover key={index}>\r\n                      <TableCell align='center'>\r\n                        {stateData.page_limit * (stateData.page_no - 1) + index + 1}\r\n                      </TableCell>\r\n                      <TableCell align='center'>\r\n                        <div className={classes.jCenter}>\r\n                          <Avatar variant='square' src={data?.image?.url} />\r\n                        </div>\r\n                      </TableCell>\r\n                      <TableCell align='center'>{data?.name}</TableCell>\r\n                      <TableCell align='center'>\r\n                        <Tooltip title={data?.description}>\r\n                          <span>{setElipsis(data?.description)}</span>\r\n                        </Tooltip>\r\n                      </TableCell>\r\n                      <TableCell align='center'>\r\n                        <div className={classes.sEvenly}>\r\n                          <Tooltip title='View' arrow>\r\n                            <IconButton\r\n                              className={classes.iconPadd}\r\n                              onClick={() => openViewDialog(data)}\r\n                            >\r\n                              <CenterFocusStrongIcon color='primary' />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                          <Tooltip title='Edit' arrow>\r\n                            <IconButton\r\n                              className={classes.iconPadd}\r\n                              onClick={() => openEditDialog(data)}\r\n                            >\r\n                              <EditIcon color='action' />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                          <Tooltip title='Delete' arrow>\r\n                            <IconButton\r\n                              className={classes.iconPadd}\r\n                              onClick={() => onDelete(data)}\r\n                            >\r\n                              <DeleteIcon color='secondary' />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                {loading && <TableLoader />}\r\n                {!loading && ingredientList.length == 0 && (\r\n                  <TableNoData>No Data Found</TableNoData>\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </CardContent>\r\n\r\n        <CardActions className={classes.actions}>\r\n          <Pagination\r\n            count={pageCount}\r\n            page={stateData.page_no}\r\n            onChange={onPageChange}\r\n          />\r\n        </CardActions>\r\n      </Card>\r\n\r\n      <AddandEditDialogue {...addEditDialog} onClose={closeAddEditDialog} onSuccess={onSuccessAction} />\r\n      {viewDialog.isOpen && <ViewIngredientModel {...viewDialog} onClose={closeViewDialog} />}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface NutritionValues {\r\n  nutrientName: string,\r\n  image: { file: null | any, prevImage: string, isNew: null | boolean },\r\n  quantity: string,\r\n  protein: string,\r\n  quantity_unit: string,\r\n  fat: string,\r\n  carbs: string,\r\n  calories: string,\r\n  benfits: Array<any>,\r\n  description: string\r\n}\r\n\r\nconst AddandEditDialogue = (props: any) => {\r\n  const { isEdit, isOpen, okBtnText = 'OK', onClose, data, title, onSuccess } = props;\r\n  const classes = useStyles()\r\n  const formikRef = useRef<any>(null)\r\n  const imageRef = useRef<any>(null)\r\n  const Snackbar = useSnackbar();\r\n  const { Post } = useService();\r\n  const initialValues: NutritionValues = {\r\n    nutrientName: '',\r\n    image: { file: null, prevImage: '', isNew: null },\r\n    quantity: '',\r\n    protein: '',\r\n    quantity_unit: '',\r\n    fat: '',\r\n    carbs: '',\r\n    calories: '',\r\n    benfits: [],\r\n    description: '',\r\n  };\r\n\r\n  const [initialFormValues, setInitialFormValues] = React.useState({ ...initialValues });\r\n  const [addBenifits, setAddBenifits] = React.useState<any>([])\r\n\r\n  const handleAddBenifits = (event: any) => {\r\n    event.preventDefault()\r\n    const dummyData = [...addBenifits, ''];\r\n    setAddBenifits(dummyData)\r\n    formikRef.current.setFieldValue('benfits', dummyData)\r\n  }\r\n\r\n  const removeBenifits = (item: any) => {\r\n    const deleteBenifitsData = [...addBenifits];\r\n    deleteBenifitsData.splice(deleteBenifitsData.indexOf(item), 1);\r\n    formikRef.current.setFieldValue('benfits', deleteBenifitsData)\r\n    setAddBenifits(deleteBenifitsData)\r\n  }\r\n\r\n  const handleBenifitChange = (event: any, index: any) => {\r\n    addBenifits[index] = event.target.value;\r\n    formikRef.current.setFieldValue('benfits', [...addBenifits])\r\n  }\r\n\r\n  const onSubmit = (value: any, helper: any) => {\r\n    try {\r\n      helper.setSubmitting(true)\r\n      const renderSubmit = async () => {\r\n        const { image, nutrientName, ...rest } = value;\r\n        const postData = rest;\r\n\r\n        postData.name = nutrientName\r\n        postData.image = await uploadNewImage(image);\r\n\r\n        !isEdit && addData(postData, helper);\r\n        isEdit && editData(postData, helper);\r\n      }\r\n      renderSubmit()\r\n    }\r\n    catch {\r\n      Snackbar.show('Image Upload Failed', 'error');\r\n    }\r\n  }\r\n\r\n  const addData = (data: any, { setSubmitting, resetForm }: any) => {\r\n    setSubmitting(true);\r\n    Post('app/addMealIngredient', data)\r\n      .then((res: any) => {\r\n        Snackbar.show(res.message, 'success');\r\n        setSubmitting(false);\r\n        resetForm();\r\n        onSuccess();\r\n      })\r\n      .catch((err: any) => {\r\n        setSubmitting(false);\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  };\r\n\r\n  const editData = (data: any, { setSubmitting, resetForm }: any) => {\r\n    setSubmitting(true);\r\n    Post('app/editMealIngredient', data)\r\n      .then((res: any) => {\r\n        Snackbar.show(res.message, 'success');\r\n        setSubmitting(false);\r\n        resetForm();\r\n        onSuccess();\r\n      })\r\n      .catch((err: any) => {\r\n        setSubmitting(false);\r\n        Snackbar.show(err.message, 'error');\r\n      });\r\n  };\r\n\r\n\r\n  const onImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    e.persist();\r\n    const files = e.target.files;\r\n    if (files && files.length != 0) {\r\n      const reader = new FileReader();\r\n      const file = files[0];\r\n      reader.onloadend = () => {\r\n        formikRef.current.setFieldValue('image', {\r\n          file,\r\n          prevImage: reader.result,\r\n          isNew: true,\r\n        });\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } \r\n    // else {\r\n    //   formikRef.current.setFieldValue('image', {\r\n    //     file: null,\r\n    //     prevImage: '',\r\n    //     isNew: null,\r\n    //   });\r\n    // }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isEdit) {\r\n      const { name, image, _id, ...rest } = data;\r\n      const editData = { ...rest, id: _id }\r\n      editData.nutrientName = name;\r\n      editData.image = { file: image, isNew: false, prevImage: image?.url }\r\n      setAddBenifits(data.benfits)\r\n      setInitialFormValues(editData);\r\n    } else {\r\n      setInitialFormValues(initialValues);\r\n    }\r\n  }, [props])\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={isOpen}\r\n        disableBackdropClick\r\n        disableEscapeKeyDown\r\n        fullWidth\r\n        maxWidth='md'\r\n        aria-labelledby='dialog-title' >\r\n\r\n        <DialogTitle id='dialog-title' onClose={onClose}>\r\n          {title}\r\n        </DialogTitle>\r\n        <Formik\r\n          innerRef={formikRef}\r\n          enableReinitialize\r\n          initialValues={initialFormValues}\r\n          onSubmit={onSubmit}\r\n          validationSchema={Yup.object().shape({\r\n            nutrientName: Yup.string().trim().required('Name is required'),\r\n            quantity: Yup.number().typeError('Quantity must be in number').required('Quality is required'),\r\n            protein:Yup.number().typeError('Protein must be in number').required('Protein is required'),\r\n            quantity_unit: Yup.string().trim().required('Quantity unit is required'),\r\n            fat: Yup.number().typeError('Fat must be in number').required('Fat is required'),\r\n            carbs:Yup.number().typeError('Carbs must be in number').required('Carbs is required'),\r\n            calories: Yup.number().typeError('Calories must be in number').required('Calories is required'),\r\n            description: Yup.string().trim().max(250, 'Must be 250 characters or less').required('Description is required'),\r\n            image: Yup.object({\r\n              file: Yup.mixed().required('A file is required'),\r\n            }),\r\n            benfits: Yup.array().of(Yup.string().required('Benefits is required'))\r\n          })}\r\n        >\r\n          {({ values, errors, touched, handleBlur, handleChange, submitForm, isSubmitting, }: any) => (\r\n            <>\r\n              <DialogContent dividers>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Name'\r\n                      name='nutrientName'\r\n                      variant='outlined'\r\n                      error={Boolean(touched.nutrientName && errors.nutrientName)}\r\n                      helperText={touched.nutrientName && errors.nutrientName}\r\n                      value={values.nutrientName}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Quantity'\r\n                      name='quantity'\r\n                      variant='outlined'\r\n                      error={Boolean(touched.quantity && errors.quantity) || Boolean(touched.quantity_unit && errors.quantity_unit)}\r\n                      helperText={touched.quantity && errors.quantity || (touched.quantity_unit && errors.quantity_unit)}\r\n                      value={values.quantity}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                      InputProps={{\r\n                        classes: {\r\n                          adornedEnd: classes.textareaAdornedEnd\r\n                        },\r\n                        endAdornment: <UnitSelect id='quantity_unit' option={UnitDropdown} name='quantity_unit' value={values.quantity_unit} onChange={handleChange} onBlur={handleBlur} />\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={6}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Protein ( g )'\r\n                      name='protein'\r\n                      variant='outlined'\r\n                      error={Boolean(touched.protein && errors.protein)}\r\n                      helperText={(touched.protein && errors.protein)}\r\n                      value={values.protein}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={6}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Fat ( g )'\r\n                      name='fat'\r\n                      variant='outlined'\r\n                      error={Boolean(touched.fat && errors.fat)}\r\n                      helperText={touched.fat && errors.fat}\r\n                      value={values.fat}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={6}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Carbs ( g )'\r\n                      name='carbs'\r\n                      variant='outlined'\r\n                      error={Boolean(touched.carbs && errors.carbs)}\r\n                      helperText={touched.carbs && errors.carbs}\r\n                      value={values.carbs}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={6}>\r\n                    <TextField\r\n                      fullWidth\r\n                      label='Calories ( kcal )'\r\n                      name='calories'\r\n                      variant='outlined'\r\n                      error={Boolean(touched.calories && errors.calories)}\r\n                      helperText={touched.calories && errors.calories}\r\n                      value={values.calories}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <Button\r\n                      fullWidth\r\n                      className={classes.themeButton}\r\n                      variant='contained'\r\n                      color='default'\r\n                      onClick={(e) => handleAddBenifits(e)}\r\n                      endIcon={<ControlPointIcon />}\r\n                    >\r\n                      Add Benefits\r\n                    </Button>\r\n                  </Grid>\r\n\r\n                  {values?.benfits?.map((data: any, index: any) => {\r\n                    return (\r\n                      <>\r\n                        <Grid item xs={11}>\r\n                          <TextField\r\n                            fullWidth\r\n                            label='Benefits'\r\n                            name={`benfits[${index}]`}\r\n                            variant='outlined'\r\n                            error={Boolean(\r\n                              touched?.benfits &&\r\n                              touched?.benfits[index] &&\r\n                              errors?.benfits &&\r\n                              (errors?.benfits[index] as any)\r\n                            )}\r\n                            helperText={\r\n                              touched?.benfits &&\r\n                              touched?.benfits[index] &&\r\n                              errors?.benfits &&\r\n                              (errors?.benfits[index] as any)\r\n                            }\r\n                            value={data}\r\n                            onChange={(e) => handleBenifitChange(e, index)}\r\n                            onBlur={handleBlur}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={1}>\r\n                          <Button\r\n                            fullWidth\r\n                            className={classes.deleteButton}\r\n                            variant='contained'\r\n                            color='secondary'\r\n                            onClick={() =>\r\n                              removeBenifits(data)\r\n                            }\r\n                          >\r\n                            <DeleteIcon />\r\n                          </Button>\r\n                        </Grid>\r\n                      </>\r\n                    )\r\n                  })}\r\n\r\n                  <Grid item xs={12}>\r\n                    <TextField\r\n                      fullWidth\r\n                      multiline\r\n                      label='Description'\r\n                      name='description'\r\n                      variant='outlined'\r\n                      error={Boolean(touched.description && errors.description)}\r\n                      helperText={touched.description && errors.description}\r\n                      value={values.description}\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item md={12} xs={12}>\r\n                    <input\r\n                      name='image'\r\n                      ref={imageRef}\r\n                      type='file'\r\n                      accept='.jpg,.png,jpeg'\r\n                      onChange={onImageChange}\r\n                      onBlur={handleBlur}\r\n                      hidden\r\n                    />\r\n                    <Button\r\n                      fullWidth\r\n                      className={classes.themeButton}\r\n                      variant='contained'\r\n                      color='default'\r\n                      onClick={() => imageRef.current.click()}\r\n                      startIcon={<CloudUploadIcon />}\r\n                    >\r\n                      Upload Image\r\n                    </Button>\r\n                    <FormControl\r\n                      error={Boolean(\r\n                        touched?.image?.file && errors?.image?.file\r\n                      )}\r\n                    >\r\n                      <FormHelperText>\r\n                        {touched?.image?.file &&\r\n                          errors?.image?.file}\r\n                      </FormHelperText>\r\n                    </FormControl>\r\n                  </Grid>\r\n\r\n                  <Grid item md={12} xs={12}>\r\n                    {values.image?.prevImage && (\r\n                      <img\r\n                        className={classes.imageView}\r\n                        src={values.image?.prevImage}\r\n                      />\r\n                    )}\r\n                  </Grid>\r\n                </Grid>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button onClick={onClose} variant='outlined' color='secondary'>\r\n                  Cancel\r\n                </Button>\r\n\r\n                <Button\r\n                  className={classes.themeButton}\r\n                  onClick={() => submitForm()}\r\n                  disabled={isSubmitting}\r\n                  variant='outlined'\r\n                >\r\n                  {isSubmitting ? (\r\n                    <CircularProgress size={24} style={{ color: 'white' }} />\r\n                  ) : (\r\n                    okBtnText\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </>\r\n          )}\r\n        </Formik>\r\n\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ViewIngredientModel = (props: any) => {\r\n  const { isOpen, title, onClose, data } = props;\r\n  const classes = useStyles();\r\n  const [formValue, setFormValue] = useState(data);\r\n  console.log(formValue)\r\n\r\n  useEffect(() => {\r\n    setFormValue(data);\r\n  }, [props]);\r\n\r\n\r\n  return (\r\n    <Dialog\r\n      disableBackdropClick\r\n      disableEscapeKeyDown\r\n      fullWidth\r\n      maxWidth='md'\r\n      aria-labelledby='dialog-view-title'\r\n      open={isOpen}\r\n    >\r\n      <DialogTitle id='dialog-view-title' onClose={onClose}>\r\n        {title}\r\n      </DialogTitle>\r\n\r\n      <DialogContent dividers>\r\n        <Paper >\r\n          <Table>\r\n            <TableBody>\r\n              <TableRow >\r\n                <TableCell>Name</TableCell>\r\n                <TableCell><strong>{formValue?.name}</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Calories</TableCell>\r\n                <TableCell><strong>{formValue?.calories} Kcal</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Carbs</TableCell>\r\n                <TableCell><strong>{formValue?.carbs} g</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Fat</TableCell>\r\n                <TableCell><strong>{formValue?.fat} g</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Protein</TableCell>\r\n                <TableCell><strong>{formValue?.protein} g</strong></TableCell>\r\n              </TableRow>\r\n              <TableRow >\r\n                <TableCell>Quantity</TableCell>\r\n                <TableCell><strong>{formValue?.quantity} {formValue?.quantity_unit}</strong></TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n\r\n        <Paper style={{ marginTop: '20px' }} >\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell align='center'><strong>#</strong></TableCell>\r\n                <TableCell align='center'><strong>Benifits</strong></TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {formValue?.benfits?.map((item: any, index: any) => {\r\n                return (\r\n                  <TableRow>\r\n                    <TableCell align='center'>{index + 1}</TableCell>\r\n                    <TableCell align='center'>{item}</TableCell>\r\n                  </TableRow>\r\n                )\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n\r\n        <Typography style={{ marginTop: '20px' }} variant='h4'>Description</Typography>\r\n        <Typography style={{ marginTop: '10px' }} variant='h5'>{formValue?.description}</Typography>\r\n\r\n        <Grid style={{ marginTop: '20px' }} container>\r\n          <Grid item md={12} xs={12}>\r\n            {formValue?.image && (\r\n              <img className={classes.imageView} src={formValue?.image?.url} />\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button onClick={onClose} variant='outlined' color='secondary'>\r\n          Close\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default NutritionIngredients;\r\n"]},"metadata":{},"sourceType":"module"}