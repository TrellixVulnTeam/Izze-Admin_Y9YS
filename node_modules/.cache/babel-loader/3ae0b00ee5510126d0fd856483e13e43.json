{"ast":null,"code":"import _objectSpread from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Pyramidion/WebApp/Izze-Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import moment from'moment';import{makeStyles}from'@material-ui/styles';import{Card,CardHeader,CardContent,Avatar,Typography,Divider,Input,Paper,Tooltip,IconButton,CircularProgress}from'@material-ui/core';import AccessTimeIcon from'@material-ui/icons/AccessTime';import SendIcon from'@material-ui/icons/Send';import useService from'../../hook/useService';import useSnackbar from'../../hook/useSnackbar';import{Pagination}from'@material-ui/lab';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{},subheader:{display:'flex',alignItems:'center'},accessTimeIcon:{color:theme.palette.text.secondary,fontSize:'14px',height:14,width:14,marginRight:6},content:{paddingTop:0},message:{marginBottom:theme.spacing(2)},divider:{marginTop:theme.spacing(2),marginBottom:theme.spacing(2)},replayInsertDiv:{display:'flex',alignItems:'center'},paper:{flexGrow:1,marginLeft:theme.spacing(2),padding:theme.spacing(0.5,2)},input:{width:'100%'},replayListDiv:{display:'flex',marginBottom:theme.spacing(2)},bubble:{flexGrow:1,padding:theme.spacing(1),marginLeft:theme.spacing(2),borderRadius:theme.shape.borderRadius,backgroundColor:theme.palette.background.default},header:{display:'flex',alignItems:'center'},time:{marginLeft:'auto'},replayMessage:{marginTop:theme.spacing(1)},actions:{display:'flex',padding:theme.spacing(2,1),justifyContent:'center'},lColor:{color:theme.palette.green.main}};});var AppUserFeedback=function AppUserFeedback(props){var classes=useStyles();var data=props.data;var _useService=useService(),Post=_useService.Post;var Snackbar=useSnackbar();// const ConfModel = useConfModel();\nvar _useState=useState({page_no:1,page_limit:10,id:''}),_useState2=_slicedToArray(_useState,2),stateData=_useState2[0],setStateData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pageCount=_useState4[0],setPageCount=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dataList=_useState6[0],setDataList=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var listFeedback=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>0&&_args[0]!==undefined?_args[0]:stateData;setLoading(true);Post('app/listFeedback',data).then(function(res){console.log('listFeedback',res);setLoading(false);if(!res.error){setDataList(res.data);setPageCount(res.page_count);}else{Snackbar.show(res.message,'error');}}).catch(function(err){console.log('err',err);setLoading(false);Snackbar.show(err.message,'error');});case 3:case\"end\":return _context.stop();}}},_callee);}));return function listFeedback(){return _ref.apply(this,arguments);};}();var onPageChange=function onPageChange(event,value){setStateData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{page_no:value});});listFeedback(_objectSpread(_objectSpread({},stateData),{},{page_no:value}));};useEffect(function(){setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{id:data._id});});listFeedback(_objectSpread(_objectSpread({},stateData),{},{id:data._id}));},[props]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!loading&&dataList.map(function(data,index){return/*#__PURE__*/_jsx(FeedbackCard,{data:data});}),loading&&/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(CircularProgress,{className:classes.lColor})}),!loading&&dataList.length==0&&/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:\"No Feedback\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(Pagination,{count:pageCount,page:stateData.page_no,onChange:onPageChange})})]});};var FeedbackCard=function FeedbackCard(props){var classes=useStyles();var data=props.data;var _useService2=useService(),Post=_useService2.Post;var Snackbar=useSnackbar();var _useState9=useState(data),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setFormData=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),replayText=_useState12[0],setReplayText=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),loading=_useState14[0],setLoading=_useState14[1];var replaySubmit=function replaySubmit(){setLoading(true);Post('app/postReplay',{id:formData._id,replay:replayText}).then(function(res){console.log('postReplay',res);setLoading(false);formData.replay.push(res.data);setFormData(function(prevState){return formData;});setReplayText('');}).catch(function(err){console.log('err',err);setLoading(false);Snackbar.show(err.message,'error');});};var handleReplayChange=function handleReplayChange(e){setReplayText(e.target.value);};useEffect(function(){setFormData(data);},[props]);return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{alt:formData===null||formData===void 0?void 0:formData.name,src:formData===null||formData===void 0?void 0:formData.profilePic}),disableTypography:true,subheader:/*#__PURE__*/_jsxs(\"div\",{className:classes.subheader,children:[/*#__PURE__*/_jsx(AccessTimeIcon,{className:classes.accessTimeIcon}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:moment(formData===null||formData===void 0?void 0:formData.created_at).fromNow()})]}),title:formData===null||formData===void 0?void 0:formData.name}),/*#__PURE__*/_jsxs(CardContent,{className:classes.content,children:[/*#__PURE__*/_jsx(Typography,{className:classes.message,variant:\"body1\",children:formData===null||formData===void 0?void 0:formData.feedback}),!((formData===null||formData===void 0?void 0:formData.replay.length)==0)&&/*#__PURE__*/_jsx(Divider,{className:classes.divider}),(formData===null||formData===void 0?void 0:formData.replay)&&(formData===null||formData===void 0?void 0:formData.replay.map(function(data,index){return/*#__PURE__*/_jsx(FeedbackReplayCard,{data:data},index);})),/*#__PURE__*/_jsx(Divider,{className:classes.divider}),/*#__PURE__*/_jsxs(\"div\",{className:classes.replayInsertDiv,children:[/*#__PURE__*/_jsx(Paper,{className:classes.paper,elevation:1,children:/*#__PURE__*/_jsx(Input,{value:replayText,className:classes.input,disableUnderline:true,onChange:handleReplayChange,placeholder:\"Leave a replay\"})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Send\",children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",disabled:loading,onClick:replaySubmit,children:/*#__PURE__*/_jsx(SendIcon,{})})})]})]})]});};var FeedbackReplayCard=/*#__PURE__*/React.memo(function(props){var classes=useStyles();var data=props.data;var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),formData=_useState16[0],setFormData=_useState16[1];useEffect(function(){console.log('data',data);setFormData(data);},[props]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.replayListDiv,children:[/*#__PURE__*/_jsx(Avatar,{alt:formData===null||formData===void 0?void 0:formData.replay_by_name,src:formData===null||formData===void 0?void 0:formData.replay_by_image}),/*#__PURE__*/_jsxs(\"div\",{className:classes.bubble,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.header,children:[/*#__PURE__*/_jsx(Typography,{color:\"textPrimary\",variant:\"h6\",children:formData===null||formData===void 0?void 0:formData.replay_by_name}),/*#__PURE__*/_jsx(Typography,{className:classes.time,variant:\"body2\",children:moment(formData===null||formData===void 0?void 0:formData.created_at).fromNow()})]}),/*#__PURE__*/_jsx(Typography,{className:classes.replayMessage,variant:\"body1\",children:formData===null||formData===void 0?void 0:formData.feedback_replay})]})]});});export default AppUserFeedback;","map":{"version":3,"sources":["D:/Pyramidion/WebApp/Izze-Admin/src/pages/AppUsers/AppUserFeedback.tsx"],"names":["React","useEffect","useState","moment","makeStyles","Card","CardHeader","CardContent","Avatar","Typography","Divider","Input","Paper","Tooltip","IconButton","CircularProgress","AccessTimeIcon","SendIcon","useService","useSnackbar","Pagination","useStyles","theme","root","subheader","display","alignItems","accessTimeIcon","color","palette","text","secondary","fontSize","height","width","marginRight","content","paddingTop","message","marginBottom","spacing","divider","marginTop","replayInsertDiv","paper","flexGrow","marginLeft","padding","input","replayListDiv","bubble","borderRadius","shape","backgroundColor","background","default","header","time","replayMessage","actions","justifyContent","lColor","green","main","AppUserFeedback","props","classes","data","Post","Snackbar","page_no","page_limit","id","stateData","setStateData","pageCount","setPageCount","dataList","setDataList","loading","setLoading","listFeedback","then","res","console","log","error","page_count","show","catch","err","onPageChange","event","value","prevState","prevData","_id","map","index","length","FeedbackCard","formData","setFormData","replayText","setReplayText","replaySubmit","replay","push","handleReplayChange","e","target","name","profilePic","created_at","fromNow","feedback","FeedbackReplayCard","memo","replay_by_name","replay_by_image","feedback_replay"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport { makeStyles } from '@material-ui/styles';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  CardActionArea,\n  CardMedia,\n  Avatar,\n  Link,\n  Typography,\n  Divider,\n  Input,\n  Paper,\n  Tooltip,\n  IconButton,\n  CircularProgress\n} from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport SendIcon from '@material-ui/icons/Send';\nimport useService from '../../hook/useService';\nimport useSnackbar from '../../hook/useSnackbar';\nimport { TableLoader, TableNoData } from '../../components/Loader/Loader';\nimport { Pagination } from '@material-ui/lab';\n\nconst useStyles = makeStyles((theme: any) => ({\n  root: {},\n  subheader: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  accessTimeIcon: {\n    color: theme.palette.text.secondary,\n    fontSize: '14px',\n    height: 14,\n    width: 14,\n    marginRight: 6\n  },\n  content: {\n    paddingTop: 0\n  },\n  message: {\n    marginBottom: theme.spacing(2)\n  },\n  divider: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2)\n  },\n  replayInsertDiv: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  paper: {\n    flexGrow: 1,\n    marginLeft: theme.spacing(2),\n    padding: theme.spacing(0.5, 2)\n  },\n  input: {\n    width: '100%'\n  },\n  replayListDiv: {\n    display: 'flex',\n    marginBottom: theme.spacing(2)\n  },\n  bubble: {\n    flexGrow: 1,\n    padding: theme.spacing(1),\n    marginLeft: theme.spacing(2),\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: theme.palette.background.default\n  },\n  header: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  time: {\n    marginLeft: 'auto'\n  },\n  replayMessage: {\n    marginTop: theme.spacing(1)\n  },\n  actions: {\n    display: 'flex',\n    padding: theme.spacing(2, 1),\n    justifyContent: 'center',\n  },\n  lColor: {\n    color: theme.palette.green.main,\n  }\n\n}));\n\nconst AppUserFeedback = (props: any) => {\n  const classes = useStyles();\n  const { data } = props;\n  const { Post } = useService();\n  const Snackbar = useSnackbar();\n  // const ConfModel = useConfModel();\n\n  const [stateData, setStateData] = useState({ page_no: 1, page_limit: 10, id: '' });\n  const [pageCount, setPageCount] = useState(0);\n  const [dataList, setDataList] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const listFeedback = async (data: any = stateData) => {\n    setLoading(true);\n    Post('app/listFeedback', data)\n      .then((res: any) => {\n        console.log('listFeedback', res);\n        setLoading(false);\n        if (!res.error) {\n          setDataList(res.data);\n          setPageCount(res.page_count);\n        } else {\n          Snackbar.show(res.message, 'error');\n        }\n      })\n      .catch((err: any) => {\n        console.log('err', err);\n        setLoading(false);\n        Snackbar.show(err.message, 'error');\n      });\n  };\n\n  const onPageChange = (event: React.ChangeEvent<unknown>, value: number) => {\n    setStateData((prevState: any) => ({ ...prevState, page_no: value }));\n    listFeedback({ ...stateData, page_no: value })\n  };\n\n  useEffect(() => {\n    setStateData((prevData) => ({ ...prevData, id: data._id }))\n    listFeedback({ ...stateData, id: data._id })\n  }, [props]);\n\n  return (\n    <>\n      {!loading && dataList.map((data: any, index: number) => <FeedbackCard data={data} />)}\n      {loading && <div className={classes.actions}><CircularProgress className={classes.lColor} /></div>}\n      {!loading && dataList.length == 0 && <div className={classes.actions}>No Feedback</div>}\n      <div className={classes.actions}>\n        <Pagination\n          count={pageCount}\n          page={stateData.page_no}\n          onChange={onPageChange}\n        />\n      </div>\n    </>\n  );\n};\n\nconst FeedbackCard = (props: any) => {\n  const classes = useStyles();\n  const { data } = props;\n  const { Post } = useService();\n  const Snackbar = useSnackbar()\n  const [formData, setFormData] = useState<any>(data);\n  const [replayText, setReplayText] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const replaySubmit = () => {\n    setLoading(true);\n    Post('app/postReplay', { id: formData._id, replay: replayText })\n      .then((res: any) => {\n        console.log('postReplay', res);\n        setLoading(false);\n        formData.replay.push(res.data);\n        setFormData((prevState: any) => formData)\n        setReplayText('')\n      })\n      .catch((err: any) => {\n        console.log('err', err);\n        setLoading(false);\n        Snackbar.show(err.message, 'error');\n      });\n  };\n\n\n  const handleReplayChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setReplayText(e.target.value)\n  }\n\n\n  useEffect(() => {\n    setFormData(data)\n  }, [props]);\n\n  return (\n    <Card>\n      <CardHeader\n        avatar={\n          <Avatar alt={formData?.name} src={formData?.profilePic} />\n        }\n        disableTypography\n        subheader={\n          <div className={classes.subheader}>\n            <AccessTimeIcon className={classes.accessTimeIcon} />\n            <Typography variant=\"body2\">\n              {moment(formData?.created_at).fromNow()}\n            </Typography>\n          </div>\n        }\n        title={formData?.name}\n      />\n      <CardContent className={classes.content}>\n        <Typography className={classes.message} variant=\"body1\">\n          {formData?.feedback}\n        </Typography>\n\n        {!(formData?.replay.length == 0) && <Divider className={classes.divider} />}\n        {formData?.replay && formData?.replay.map((data: any, index: number) => <FeedbackReplayCard key={index} data={data} />)}\n\n        <Divider className={classes.divider} />\n        <div className={classes.replayInsertDiv} >\n          <Paper\n            className={classes.paper}\n            elevation={1}\n          >\n            <Input\n              value={replayText}\n              className={classes.input}\n              disableUnderline\n              onChange={handleReplayChange}\n              placeholder=\"Leave a replay\"\n            />\n          </Paper>\n          <Tooltip title=\"Send\">\n            <IconButton color='primary' disabled={loading} onClick={replaySubmit}>\n              <SendIcon />\n            </IconButton>\n          </Tooltip>\n\n        </div>\n\n\n      </CardContent>\n    </Card>\n\n  )\n}\n\nconst FeedbackReplayCard = React.memo((props: any) => {\n  const classes = useStyles();\n  const { data } = props;\n  const [formData, setFormData] = useState<any>({});\n  useEffect(() => {\n    console.log('data', data)\n    setFormData(data)\n  }, [props]);\n  return (\n\n    <div className={classes.replayListDiv}>\n      <Avatar alt={formData?.replay_by_name} src={formData?.replay_by_image} />\n      <div className={classes.bubble}>\n        <div className={classes.header}>\n          <Typography color=\"textPrimary\" variant=\"h6\">\n            {formData?.replay_by_name}\n          </Typography>\n          <Typography className={classes.time} variant=\"body2\" >\n            {moment(formData?.created_at).fromNow()}\n          </Typography>\n        </div>\n        <Typography className={classes.replayMessage} variant=\"body1\" >\n          {formData?.feedback_replay}\n        </Typography>\n      </div>\n    </div>\n  )\n})\n\nexport default AppUserFeedback;\n"]},"metadata":{},"sourceType":"module"}